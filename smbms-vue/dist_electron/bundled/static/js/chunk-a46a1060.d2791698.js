(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a46a1060","chunk-4de1c2b6","chunk-4686a231","chunk-1d1550d8","chunk-2d230fe7"],{"00f6":function(e,t,s){},"020c":function(e,t,s){"use strict";s.r(t);var i=s("8ad4"),a=s("a6dc"),r=s("4381"),n=s("5aee");t["default"]={directives:{permission:r["default"]},name:"menu",components:{treeTable:i["default"],IconSelect:n["default"]},data(){return{showTree:!1,defaultProps:{id:"code",label:"name",children:"children"},listLoading:!0,expandAll:!1,formTitle:"",formVisible:!1,isAdd:!1,form:{id:"",name:"",code:"",url:"",pcode:"",ismenu:1,hidden:!1,num:1},rules:{name:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],code:[{required:!0,message:"请输入编码",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],url:[{required:!0,message:"请输入资源地址",trigger:"blur"}],num:[{required:!0,message:"请输入排序",trigger:"blur"}]},data:[],treeData:[],selRow:{}}},created(){this.init()},methods:{selected(e){this.form.icon=e,this.$forceUpdate()},init(){this.fetchData(),Object(a["getMenuTree"])().then(e=>{this.treeData=e.data})},fetchData(){this.listLoading=!0,Object(a["getList"])().then(e=>{this.data=e.data,this.listLoading=!1})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},add(){this.form={ismenu:1,hidden:!1},this.formTitle="添加菜单",this.formVisible=!0,this.isAdd=!0,void 0!==this.$refs["form"]&&this.$refs["form"].resetFields()},save(){var e=this;this.$refs["form"].validate(t=>{if(!t)return!1;{const t=e.form;delete t.parent,delete t.children,Object(a["save"])(t).then(t=>{this.$message({message:"提交成功",type:"success"}),e.fetchData(),e.formVisible=!1})}})},edit(e){this.form=Object.assign({},e),"是"===e.isMenuName?this.form.ismenu=1:this.form.ismenu=0,"0"==this.form.pcode&&(this.form.pcode=void 0),this.formTitle="编辑菜单",this.formVisible=!0,this.isAdd=!1},remove(e){this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(a["delMenu"])(e.id).then(e=>{this.$message({message:"删除成功",type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})})},componentTips(){this.$notify({title:"提示",dangerouslyUseHTMLString:!0,message:"顶级目录请输入layout,<br/>左侧菜单请根据实际组件路径输入:views/...<br/>功能按钮无需输入该值"})}}}},"02b2":function(e,t,s){"use strict";s("4259")},"046a":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:6}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入字典名称"},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}})],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-search"},nativeOn:{click:function(t){return e.search(t)}}},[e._v(e._s(e.$t("button.search")))]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(e._s(e.$t("button.reset")))])],1)],1),e._v(" "),s("br"),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/dict/add"],expression:"['/dict/add']"}],attrs:{type:"success",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return e.add(t)}}},[e._v(e._s(e.$t("button.add")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/dict/update"],expression:"['/dict/update']"}],attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(t){return e.edit(t)}}},[e._v(e._s(e.$t("button.edit")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/dict/delete"],expression:"['/dict/delete']"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(t){return e.remove(t)}}},[e._v(e._s(e.$t("button.delete")))])],1)],1)],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[s("el-table-column",{attrs:{label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.id)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.name)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"详情"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.detail)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/dict/update"],expression:"['/dict/update']"}],attrs:{type:"text",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(s){return e.editItem(t.row)}}},[e._v(e._s(e.$t("button.edit")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/dict/delete"],expression:"['/dict/delete']"}],attrs:{type:"text",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(s){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("button.delete")))])]}}])})],1),e._v(" "),s("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,width:"60%"},on:{"update:visible":function(t){e.formVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"名称",prop:"name"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),e._l(e.form.details,(function(t,i){return s("el-form-item",{key:t.key,attrs:{label:"字典"+(i+1),prop:"details."+i+".value",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[s("el-col",{attrs:{span:9}},[s("el-input",{attrs:{placeholder:"值"},model:{value:t.key,callback:function(s){e.$set(t,"key",s)},expression:"rec.key"}})],1),e._v(" "),s("el-col",{staticClass:"line",attrs:{span:1}},[e._v("  ")]),e._v(" "),s("el-col",{attrs:{span:9}},[s("el-input",{attrs:{placeholder:"名称"},model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"rec.value"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[e._v(" \n        "),s("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(s){return s.preventDefault(),e.removeDetail(t)}}},[e._v(e._s(e.$t("button.delete")))])],1)],1)})),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("button.submit")))]),e._v(" "),s("el-button",{on:{click:e.addDetail}},[e._v("新增字典")]),e._v(" "),s("el-button",{nativeOn:{click:function(t){e.formVisible=!1}}},[e._v(e._s(e.$t("button.cancel")))])],1)],2)],1)],1)},a=[],r=(s("ac6a"),s("28a5"),s("7754")),n=s("4381"),o={name:"dict",directives:{permission:n["default"]},data(){return{formVisible:!1,formTitle:"添加字典",deptList:[],roleList:[],isAdd:!0,permissons:[],permissonVisible:!1,form:{name:"",id:"",detail:"",details:[]},rules:{name:[{required:!0,message:"请输入字典名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}]},listQuery:{name:void 0},list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,r["default"].getList(this.listQuery).then(e=>{this.list=e.data,this.listLoading=!1}).catch(()=>{})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.name="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={name:"",id:"",details:[],detail:[]}},add(){this.resetForm(),this.formTitle="添加字典",this.formVisible=!0,this.isAdd=!0},save(){const e=this;this.$refs["form"].validate(t=>{if(!t)return!1;{const t=e.form.name;let s="";for(const i in e.form.details){const t=e.form.details[i];s+=t["key"]+":"+t["value"]+";"}""!==this.form.id?r["default"].update({id:e.form.id,dictName:t,dictValues:s}).then(t=>{this.$message({message:"提交成功",type:"success"}),e.fetchData(),e.formVisible=!1}):r["default"].save({dictName:t,dictValues:s}).then(t=>{this.$message({message:"提交成功",type:"success"}),e.fetchData(),e.formVisible=!1})}})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},editItem(e){this.selRow=e,this.edit()},edit(){if(this.checkSel()){this.isAdd=!1,this.formTitle="修改字典";let e=this.selRow.detail.split(","),t=[];e.forEach((function(e,s){let i=e.split(":");t.push({key:i[0],value:i[1]})})),this.form={name:this.selRow.name,id:this.selRow.id,details:t,detail:this.selRow.detail},this.formVisible=!0}},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){const e=this.selRow.id;this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{r["default"].remove(e).then(e=>{this.$message({message:"操作成功",type:"success"}),this.fetchData()})}).catch(()=>{})}},addDetail(){let e=this.form.details;e.push({value:"",key:""}),this.form.details=e},removeDetail(e){let t=[];this.form.details.forEach((function(s,i){e.key!==s.key&&t.push(s)})),this.form.details=t}}},l=o,c=(s("763d"),s("2877")),u=Object(c["a"])(l,i,a,!1,null,"778059ee",null);t["default"]=u.exports},"06c2":function(e,t,s){"use strict";s("92a6")},"0714":function(e,t,s){},"07dd":function(e,t,s){"use strict";s("9f8e")},"0886":function(e,t,s){"use strict";s.r(t);var i=s("dee8");t["default"]={name:"contacts",data(){return{listQuery:{page:1,limit:20,userName:void 0,mobile:void 0,startDate:void 0,endDate:void 0},rangeDate:void 0,total:0,list:null,listLoading:!0,selRow:{},pickerOptions:{shortcuts:[{text:"最近一周",onClick(e){const t=new Date,s=new Date;s.setTime(s.getTime()-6048e5),e.$emit("pick",[s,t])}},{text:"最近一个月",onClick(e){const t=new Date,s=new Date;s.setTime(s.getTime()-2592e6),e.$emit("pick",[s,t])}},{text:"最近三个月",onClick(e){const t=new Date,s=new Date;s.setTime(s.getTime()-7776e6),e.$emit("pick",[s,t])}}]}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0;let e=this.listQuery;this.rangeDate&&(e["startDate"]=this.rangeDate[0],e["endDate"]=this.rangeDate[1]),Object(i["getList"])(e).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.userName=void 0,this.listQuery.mobile=void 0,this.listQuery.startDate=void 0,this.listQuery.endDate=void 0,this.rangeDate=void 0,this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e}}}},"08ab":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[e._v("\n  参考文档：http://webflash.enilu.cn/guide/feature/cms.html\n  "),s("div",{staticClass:"block"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[e._v("\n        基于vux.li手机端cms站点"),s("br"),e._v("\n        http://flash-mobile.enilu.cn/#/index"),s("br"),s("br"),e._v(" "),s("iframe",{attrs:{src:"http://flash-mobile.enilu.cn/#/index",width:"375px",height:"600px",frameborder:"0",scrolling:"auto"}})]),e._v(" "),s("el-col",{attrs:{span:12}},[e._v("\n        基于uniapp的手机端cms站点，可以一次开发，打包多端app"),s("br"),e._v("\n        http://flash-uniapp.enilu.cn/"),s("br"),s("br"),e._v(" "),s("iframe",{attrs:{src:"http://flash-uniapp.enilu.cn/",width:"375px",height:"600px",frameborder:"0",scrolling:"auto"}})])],1)],1)])},a=[],r=(s("ab5f"),s("2877")),n={},o=Object(r["a"])(n,i,a,!1,null,"51599a6a",null);t["default"]=o.exports},"0aac":function(e,t,s){"use strict";s.r(t),s.d(t,"getList",(function(){return a})),s.d(t,"saveUser",(function(){return r})),s.d(t,"remove",(function(){return n})),s.d(t,"setRole",(function(){return o})),s.d(t,"changeStatus",(function(){return l})),s.d(t,"resetPassword",(function(){return c}));var i=s("b775");function a(e){return Object(i["default"])({url:"/provider/queryPage",method:"get",params:e})}function r(e){return Object(i["default"])({url:"/user",method:"post",params:e})}function n(e){return Object(i["default"])({url:"/user",method:"delete",params:{userId:e}})}function o(e){return Object(i["default"])({url:"/user/setRole",method:"post",params:e})}function l(e){return Object(i["default"])({url:"/user/changeStatus",method:"get",params:{userId:e}})}function c(e){return Object(i["default"])({url:"/user/resetPassword",method:"post",params:{userId:e}})}},"0baa":function(e,t,s){"use strict";s.r(t),s.d(t,"getList",(function(){return a})),s.d(t,"saveUser",(function(){return r})),s.d(t,"remove",(function(){return n})),s.d(t,"setRole",(function(){return o})),s.d(t,"changeStatus",(function(){return l})),s.d(t,"resetPassword",(function(){return c}));var i=s("b775");function a(e){return Object(i["default"])({url:"/goods/queryPage",method:"get",params:e})}function r(e){return Object(i["default"])({url:"/user",method:"post",params:e})}function n(e){return Object(i["default"])({url:"/user",method:"delete",params:{userId:e}})}function o(e){return Object(i["default"])({url:"/user/setRole",method:"post",params:e})}function l(e){return Object(i["default"])({url:"/user/changeStatus",method:"get",params:{userId:e}})}function c(e){return Object(i["default"])({url:"/user/resetPassword",method:"post",params:{userId:e}})}},"0c56":function(e,t,s){"use strict";s.r(t);var i=s("5780"),a=s("4381"),r=s("5f87");t["default"]={name:"processDefinition",directives:{permission:a["default"]},data(){return{formVisible:!1,formTitle:"添加流程定义",isAdd:!0,form:{name:"",key:"",version:"",deploymentId:"",resourceName:"",id:""},processDefinitionForm:{title:"",modelerUrl:"",visible:!1},listQuery:{page:1,limit:20,id:void 0},total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},computed:{rules(){return{}}},created(){this.init()},methods:{init(){this.fetchData(),localStorage.setItem("Authorization",Object(r["getToken"])())},fetchData(){this.listLoading=!0,i["default"].getList(this.listQuery).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.fetchData()},reset(){this.listQuery.id="",this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={name:"",key:"",version:"",deploymentId:"",resourceName:"",id:""}},add(){this.formTitle="添加流程定义",this.formVisible=!0,this.isAdd=!0,void 0!==this.$refs["form"]&&this.$refs["form"].resetFields()},onlineDrawingProcess(){this.processDefinitionForm.title="编辑流程图",this.processDefinitionForm.visible=!0,localStorage.setItem("VUE_APP_BASE_API","http://10.15.120.205:8080"),this.processDefinitionForm.modelerUrl="/bpmnjs/index.html?type=addBpmn"},onlineModificationProcess(e){this.processDefinitionForm.title="查看流程图",this.processDefinitionForm.visible=!0,localStorage.setItem("VUE_APP_BASE_API","http://10.15.120.205:8080"),this.processDefinitionForm.modelerUrl="/bpmnjs/index.html?type=lookBpmn&deploymentFileUUID="+e.deploymentId+"&deploymentName="+encodeURI(e.resourceName)},closeDrawingWindow(){console.log("关闭窗口"),this.fetchData()},save(){this.$refs["form"].validate(e=>{if(!e)return!1;{const e={id:this.form.id,name:this.form.name,key:this.form.key,version:this.form.version,deploymentId:this.form.deploymentId,resourceName:this.form.resourceName};e.id?i["default"].update(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1}):i["default"].add(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1})}})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},editItem(e){this.selRow=e,this.edit()},edit(){if(this.checkSel()){this.isAdd=!1;let e=Object.assign({},this.selRow);this.form=e,this.formTitle="编辑流程定义",this.formVisible=!0,void 0!==this.$refs["form"]&&this.$refs["form"].resetFields()}},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm(this.$t("common.deleteConfirm"),this.$t("common.tooltip"),{confirmButtonText:this.$t("button.submit"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then(()=>{i["default"].remove(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}}}}},"0d1b":function(e,t,s){"use strict";s("9f3d")},"0d4c":function(e,t,s){},"0e1e":function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return a}));s("ac6a");var i=s("2b0e");function a(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=[];return Array.from(e).forEach((function(e){void 0===e._expanded&&i["default"].set(e,"_expanded",t);let o=1;if(void 0!==r&&null!==r&&(o=r+1),i["default"].set(e,"_level",o),s&&i["default"].set(e,"parent",s),n.push(e),e.children&&e.children.length>0){const s=a(e.children,t,e,o);n=n.concat(s)}})),n}},"0e42":function(e,t,s){"use strict";s.r(t),s.d(t,"getList",(function(){return a})),s.d(t,"queryAll",(function(){return r})),s.d(t,"save",(function(){return n})),s.d(t,"remove",(function(){return o}));var i=s("b775");function a(e){return Object(i["default"])({url:"/message/sender/list",method:"get",params:e})}function r(e){return Object(i["default"])({url:"/message/sender/queryAll",method:"get"})}function n(e){return Object(i["default"])({url:"/message/sender",method:"post",params:e})}function o(e){return Object(i["default"])({url:"/message/sender",method:"delete",params:{id:e}})}},"0f0f":function(e,t,s){},1060:function(e,t,s){},"10a4":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:6}},[s("el-input",{attrs:{size:"mini",placeholder:"文件名"},model:{value:e.listQuery.originalFileName,callback:function(t){e.$set(e.listQuery,"originalFileName",t)},expression:"listQuery.originalFileName"}})],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-search"},nativeOn:{click:function(t){return e.search(t)}}},[e._v(e._s(e.$t("button.search")))]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(e._s(e.$t("button.reset")))])],1)],1),e._v(" "),s("br")],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[s("el-table-column",{attrs:{label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.id)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"文件名3"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.originalFileName)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"缩略图"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.chkFileType(t.row.originalFileName,".jpg,.png,.gif,.bmp")?s("img",{staticStyle:{width:"60px"},attrs:{src:e.imgHost+t.row.id}}):e._e()]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"上传日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.createTime)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"下载"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",icon:"el-icon-download",size:"mini"},nativeOn:{click:function(s){return e.download(t.row.id,t.row.originalFileName)}}},[e._v("下载")])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100,500],"page-size":e.listQuery.limit,total:e.total,"current-page":e.listQuery.page},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"page",t)},"update:current-page":function(t){return e.$set(e.listQuery,"page",t)},"size-change":e.changeSize,"current-change":e.fetchPage,"prev-click":e.fetchPrev,"next-click":e.fetchNext}})],1)},a=[],r=(s("28a5"),s("3be1")),n=s("fa7d"),o={name:"file",data(){return{listQuery:{page:1,limit:20,originalFileName:void 0},total:0,list:null,listLoading:!0,selRow:{},downloadUrl:"",imgHost:""}},created(){this.init()},methods:{init(){this.downloadUrl=Object(n["getApiUrl"])()+"/file/download?idFile=",this.imgHost=Object(n["getApiUrl"])()+"/file/getImgStream?idFile=",this.fetchData()},fetchData(){this.listLoading=!0,Object(r["getList"])(this.listQuery).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.originalFileName="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},download(e,t){window.location.href=this.downloadUrl+e+"&fileName="+t},chkFileType(e,t){const s=t.split(",");for(const a in s){const t=s[a];var i=e.length-t.length;const r=i>=0&&e.lastIndexOf(t)==i;if(r)return r}}}},l=o,c=(s("eaaa"),s("2877")),u=Object(c["a"])(l,i,a,!1,null,"6330cca4",null);t["default"]=u.exports},"10af":function(e,t,s){"use strict";s("62a04")},1232:function(e,t,s){"use strict";s.r(t);s("ac6a");var i=s("e0e0"),a=s("7754"),r=(s("5780"),s("4381"));t["default"]={name:"workFlowTask",directives:{permission:r["default"]},data(){return{activeName:"first",formVisible:!1,formTitle:"发起新流程",isAdd:!0,form:{title:"",processDefId:"",instanceId:"",descript:"",state:"",id:""},listQuery:{page:1,limit:20,id:void 0},processDefinitionList:[],dictStateList:[],total:0,list:null,listLoading:!0,selRow:{},taskResult:{list:[]}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},computed:{rules(){return{}}},created(){this.init()},methods:{init(){this.fetchData(),a["default"].getDicts("工作流实例状态").then(e=>{this.dictStateList=e.data})},fetchData(){this.listLoading=!0,i["default"].getTasks(this.listQuery).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.fetchData()},reset(){this.listQuery.id="",this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},formatState(e){let t="";return this.dictStateList.forEach((function(s){e+""==s.num&&(t=s.name)})),t},resetForm(){this.form={title:"",processDefId:"",instanceId:"",descript:"",state:"",id:""}},add(){this.formTitle="发起新流程",this.formVisible=!0,this.isAdd=!0,void 0!==this.$refs["form"]&&this.$refs["form"].resetFields()},pass(){this.form.state=1,console.log("form",this.form),i["default"].completeTask(this.form).then(e=>{this.fetchData(),this.formVisible=!1})},reject(){this.form.state=2,console.log("form",this.form),i["default"].completeTask(this.form).then(e=>{this.fetchData(),this.formVisible=!1})},save(){this.$refs["form"].validate(e=>{if(!e)return!1;{const e={id:this.form.id,title:this.form.title,processDefId:this.form.processDefId,instanceId:this.form.instanceId,descript:this.form.descript,state:this.form.state};e.id?i["default"].update(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1}):i["default"].add(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1})}})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},editItem(e){this.selRow=e,this.edit()},edit(){if(this.checkSel()){this.isAdd=!1;let e=Object.assign({},this.selRow);this.form=e,this.formTitle="编辑流程实例",this.formVisible=!0,void 0!==this.$refs["form"]&&this.$refs["form"].resetFields()}},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm(this.$t("common.deleteConfirm"),this.$t("common.tooltip"),{confirmButtonText:this.$t("button.submit"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then(()=>{i["default"].remove(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}}}}},"131e":function(e,t,s){},1393:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",{attrs:{gutter:24}},[s("el-col",{attrs:{span:4}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",size:"mini",placeholder:"起始日期","value-format":"yyyy-MM-dd"},model:{value:e.listQuery.beginTime,callback:function(t){e.$set(e.listQuery,"beginTime",t)},expression:"listQuery.beginTime"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",size:"mini",placeholder:"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.listQuery.endTime,callback:function(t){e.$set(e.listQuery,"endTime",t)},expression:"listQuery.endTime"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"日志名称"},model:{value:e.listQuery.logName,callback:function(t){e.$set(e.listQuery,"logName",t)},expression:"listQuery.logName"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("dict-select",{attrs:{"dict-name":"日志类型",placeholder:"请选择日志类型"},model:{value:e.listQuery.logType,callback:function(t){e.$set(e.listQuery,"logType",t)},expression:"listQuery.logType"}})],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-search"},nativeOn:{click:function(t){return e.search(t)}}},[e._v(e._s(e.$t("button.search")))]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(e._s(e.$t("button.reset")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/log/delLog"],expression:"['/log/delLog']"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(t){return e.clear(t)}}},[e._v(e._s(e.$t("button.clear")))])],1)],1),e._v(" "),s("br")],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[s("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-form",{staticClass:"flash-table-expand",attrs:{"label-position":"left",inline:"","label-width":"120px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"日志类型"}},[s("span",[e._v(e._s(t.row.logtype))])])],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"日志名称"}},[s("span",[e._v(e._s(t.row.logname))])])],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"用户"}},[s("span",[e._v(e._s(t.row.userName))])])],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"类名"}},[s("span",[e._v(e._s(t.row.classname))])])],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"方法名"}},[s("span",[e._v(e._s(t.row.method))])])],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"时间"}},[s("span",[e._v(e._s(t.row.createtime))])])],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"内容"}},[s("span",[e._v(e._s(t.row.regularMessage))])])],1)],1)],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"用户",prop:"userName"}}),e._v(" "),s("el-table-column",{attrs:{label:"日志类型",prop:"logtype"}}),e._v(" "),s("el-table-column",{attrs:{label:"日志名称",prop:"logname"}}),e._v(" "),s("el-table-column",{attrs:{label:"时间",prop:"createtime"}})],1),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100,500],"page-size":e.listQuery.limit,total:e.total,"current-page":e.listQuery.page},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"page",t)},"update:current-page":function(t){return e.$set(e.listQuery,"page",t)},"size-change":e.changeSize,"current-change":e.fetchPage,"prev-click":e.fetchPrev,"next-click":e.fetchNext}})],1)},a=[],r=s("a457"),n=s("4381"),o={name:"log",directives:{permission:n["default"]},data(){return{options:[{value:"1",label:"业务日志"},{value:"2",label:"异常日志"}],listQuery:{page:1,limit:20,beginTime:void 0,endTime:void 0,logName:void 0,logType:void 0},total:0,list:null,listLoading:!0,selRow:{}}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(r["getList"])(this.listQuery).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.beginTime="",this.listQuery.endTime="",this.listQuery.logName="",this.listQuery.logType="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},clear(){this.$confirm("确定清空数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(r["clear"])().then(e=>{this.$message({message:"清空成功",type:"sucess"}),this.fetchData()})}).catch(()=>{})}}},l=o,c=(s("bf0d"),s("2877")),u=Object(c["a"])(l,i,a,!1,null,"5a6268e4",null);t["default"]=u.exports},1552:function(e,t,s){"use strict";s("5e2d")},"16ed":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.userName,callback:function(t){e.$set(e.listQuery,"userName",t)},expression:"listQuery.userName"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入昵称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.nickName,callback:function(t){e.$set(e.listQuery,"nickName",t)},expression:"listQuery.nickName"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入手机号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.phone,callback:function(t){e.$set(e.listQuery,"phone",t)},expression:"listQuery.phone"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入邮箱"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.email,callback:function(t){e.$set(e.listQuery,"email",t)},expression:"listQuery.email"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-search"},nativeOn:{click:function(t){return e.search(t)}}},[e._v(e._s(e.$t("button.search")))]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(e._s(e.$t("button.reset")))])],1)],1),e._v(" "),s("br"),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return e.add(t)}}},[e._v("\r\n        "+e._s(e.$t("button.add"))+"\r\n        ")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(t){return e.edit(t)}}},[e._v("\r\n        "+e._s(e.$t("button.edit"))+"\r\n        ")]),e._v(" "),s("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(t){return e.remove(t)}}},[e._v("\r\n        "+e._s(e.$t("button.delete"))+"\r\n        ")]),e._v(" "),s("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-refresh-right"},nativeOn:{click:function(t){return e.resetPwd(t)}}},[e._v("\r\n        "+e._s(e.$t("button.resetPwd"))+"\r\n        ")]),e._v(" "),s("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-s-operation"},nativeOn:{click:function(t){return e.openRole(t)}}},[e._v("\r\n        "+e._s(e.$t("button.roleAllocate")))])],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,size:"mini","element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[s("el-table-column",{attrs:{label:"商品名"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("\r\n            "+e._s(t.row.name)+"\r\n            ")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"价格",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v("\r\n                "+e._s(t.row.price)+"\r\n            ")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"简介"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("el-tag",{attrs:{size:"mini"}},[e._v(" "+e._s(t.row.comment)+" ")])],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"品牌"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n            "+e._s(t.row.brand)+"\r\n        ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"供应商编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n            "+e._s(t.row.providerId||"未绑定供应商")+"\r\n        ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"库存"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n            "+e._s(t.row.stock)+"\r\n        ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"描述图片"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-image",{attrs:{src:t.row.coverPic,"preview-src-list":[t.row.coverPic]}},[e._v(">")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(s){return e.editItem(t.row)}}},[e._v("\r\n            "+e._s(e.$t("button.edit"))+"\r\n            ")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(s){return e.removeItem(t.row)}}},[e._v("\r\n            "+e._s(e.$t("button.delete"))+"\r\n            ")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-s-operation"},nativeOn:{click:function(s){return e.openRoleItem(t.row)}}},[e._v("角色分配")])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[5,10,20,50,100,500],"page-size":e.listQuery.limit,total:e.total,"current-page":e.listQuery.page},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"page",t)},"update:current-page":function(t){return e.$set(e.listQuery,"page",t)},"size-change":e.changeSize,"current-change":e.fetchPage,"prev-click":e.fetchPrev,"next-click":e.fetchNext}})],1)],1),e._v(" "),s("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,width:"70%"},on:{"update:visible":function(t){e.formVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px","label-position":"right"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"手机",prop:"phone"}},[s("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"签名",prop:"signature"}},[s("el-input",{model:{value:e.form.signature,callback:function(t){e.$set(e.form,"signature",t)},expression:"form.signature"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[s("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.avatarloading,expression:"avatarloading"}],staticClass:"avatar-uploader",attrs:{action:"https://api.maiquer.tech/api/upload/image",name:"imgFile",headers:e.token,"on-success":e.handleAvatarSuccess,"show-file-list":!1,"before-upload":function(t){return e.beforeImgUpload(t,"avatar")}}},[e.form.avatar?s("img",{staticClass:"avatar",attrs:{src:e.form.avatar}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"背景图",prop:"backImg"}},[s("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.backImgloading,expression:"backImgloading"}],staticClass:"avatar-uploader",attrs:{action:"https://api.maiquer.tech/api/upload/image",name:"imgFile",headers:e.token,"on-success":e.handleBackImgSuccess,"show-file-list":!1,"before-upload":function(t){return e.beforeImgUpload(t,"backImg")}}},[e.form.backImg?s("img",{staticClass:"avatar",attrs:{src:e.form.backImg}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"角色分配"}},[s("el-checkbox-group",{model:{value:e.roleSet,callback:function(t){e.roleSet=t},expression:"roleSet"}},e._l(e.roleArray,(function(e){return s("el-checkbox",{key:e,attrs:{label:e}})})),1)],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"是否启用"}},[s("el-switch",{model:{value:e.form.enable,callback:function(t){e.$set(e.form,"enable",t)},expression:"form.enable"}})],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.saveUser}},[e._v(e._s(e.$t("button.submit")))]),e._v(" "),s("el-button",{nativeOn:{click:function(t){e.formVisible=!1}}},[e._v(e._s(e.$t("button.cancel")))])],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"角色分配",visible:e.roleDialog.visible,width:"25%"},on:{"update:visible":function(t){return e.$set(e.roleDialog,"visible",t)}}},[s("el-form",[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-tree",{ref:"roleTree",attrs:{data:e.roleDialog.roles,"show-checkbox":"","node-key":"roleId","default-checked-keys":e.roleDialog.checkedRoleKeys,props:e.roleDialog.defaultProps}})],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.setRole}},[e._v(e._s(e.$t("button.submit")))])],1)],1)],1)],1)},a=[],r=s("0baa"),n=s("5f87");const o=["SUPER_ADMIN","SYSTEM_ADMIN","VIP","USER"];var l={name:"mgr",data(){return{roleArray:o,roleDialog:{visible:!1,roles:[{roleId:1,roleName:"SUPER_ADMIN"},{roleId:2,roleName:"SYSTEM_ADMIN"},{roleId:3,roleName:"VIP"},{roleId:4,roleName:"USER"}],checkedRoleKeys:[],defaultProps:{id:"roleId",label:"roleName"}},statusList:[{label:"启用",value:"1"},{label:"冻结",value:"2"}],formVisible:!1,formTitle:"添加用户",roleSet:[],form:{username:"",password:"",nickname:"",phone:"",email:"",avatar:"",backImg:"",signature:"从前从前,有个人爱你很久...",enable:!0},rules:{username:[{required:!0,message:"请输入登录账号",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],password:[{required:!1,message:"请输入登录密码",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],nickname:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],phone:[{required:!1,message:"请输入email",trigger:"blur"}],email:[{required:!1,message:"请输入email",trigger:"blur"}]},listQuery:{page:1,limit:5,userNmae:void 0,nickName:void 0,phone:void 0,email:void 0},avatarloading:!1,backImgloading:!1,total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(r["getList"])(this.listQuery).then(e=>{this.list=e.data.dataCurrentPage,this.listLoading=!1,this.total=e.data.totalCount})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.userNmae="",this.listQuery.nickName="",this.listQuery.page=1,this.listQuery.phone="",this.listQuery.email="",this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={username:"",password:"",nickname:"",phone:"",email:"",avatar:"",backImg:"",signature:"",enable:!0}},add(){this.resetForm(),this.formTitle="添加用户",this.formVisible=!0},changeUserStatus(e,t){var s={userId:e,enable:t};Object(r["changeStatus"])(s).then(()=>{this.$notify({title:"成功",message:"修改成功",type:"success"}),this.fetchData()}).catch(()=>{this.fetchData()})},saveUser(){var e=this;this.$refs["form"].validate(t=>{if(!t)return!1;var s=e.form,i=[];for(const e of this.roleSet)"SUPER_ADMIN"==e?i.push({roleId:1}):"SYSTEM_ADMIN"==e?i.push({roleId:2}):"VIP"==e?i.push({roleId:3}):i.push({roleId:4});s.roleSet=i,console.log(s),Object(r["saveUser"])(s).then(e=>{this.$message({message:"提交成功",type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},editItem(e){this.selRow=Object.assign({},e),this.edit()},edit(){if(this.checkSel()){let e=Object.assign({},this.selRow);e.password="";let t={id:e.id,username:e.username,password:"",nickname:e.nickname,phone:e.phone,email:e.email,signature:e.signature,avatar:e.avatar,backImg:e.backImg,roleSet:e.roleSet,enable:e.enable};this.form=t,this.formTitle="修改用户",this.formVisible=!0}},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(r["remove"])(e).then(e=>{this.$message({message:"删除成功",type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}},beforeImgUpload(e,t){"avatar"==t?this.avatarloading=!0:this.backImgloading=!0;const s="image/jpeg"===e.type||"image/gif"===e.type||"image/png"===e.type,i=e.size/1024/1024/1024/1024<4;return s||this.$message.error("上传头像图片只能是 JPG 格式!"),i||this.$message.error("上传头像图片大小不能超过 4MB!"),s&&i},handleAvatarSuccess(e){0==e.code?(this.form.avatar=e.data,this.$notify({title:"成功",message:"头像上传成功",type:"success"}),this.avatarloading=!1):(this.$message({message:e.message,type:"error"}),this.avatarloading=!1)},handleBackImgSuccess(e){0==e.code?(this.form.backImg=e.data,this.$notify({title:"成功",message:"头像上传成功",type:"success"}),this.backImgloading=!1):(this.$message({message:e.message,type:"error"}),this.backImgloading=!1)},resetPwd(){if(this.checkSel()){var e=this.selRow.id;this.$confirm("将密码重置为maiqu?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(r["resetPassword"])(e).then(e=>{this.$message({message:"重置密码成功",type:"success"})}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}},openRoleItem(e){this.selRow=e,this.openRole()},openRole(){this.checkSel()&&(this.roleDialog.visible=!0)},setRole(){var e=this.$refs.roleTree.getCheckedKeys(),t="";for(var s in e)t+=e[s]+",";var i={userId:this.selRow.id,roleIds:t.slice(0,-1)};Object(r["setRole"])(i).then(e=>{this.roleDialog.visible=!1,this.fetchData(),this.$message({message:"提交成功",type:"success"})})}},computed:{token(){return{Authorization:Object(n["getToken"])()}}}},c=l,u=(s("07dd"),s("2877")),d=Object(u["a"])(c,i,a,!1,null,null,null);t["default"]=d.exports},1903:function(e,t,s){"use strict";s.r(t);var i=s("94ab"),a=s("4381");t["default"]={name:"task",directives:{permission:a["default"]},data(){return{formVisible:!1,formTitle:"添加任务",deptList:[],isAdd:!0,form:{id:"",name:"",jobClass:"",cron:"",note:"",disabled:!0,data:""},rules:{name:[{required:!0,message:"请输入任务名",trigger:"blur"},{min:2,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],jobClass:[{required:!0,message:"请输入执行类",trigger:"blur"}],cron:[{required:!0,message:"请输入定时规则",trigger:"blur"}]},listQuery:{name:void 0},total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(i["getList"])(this.listQuery).then(e=>{this.list=e.data,this.listLoading=!1})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.name="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={}},add(){this.resetForm(),this.formTitle="添加任务",this.formVisible=!0,this.isAdd=!0},save(){var e=this;this.$refs["form"].validate(t=>{if(!t)return!1;Object(i["save"])({id:e.form.id,name:e.form.name,jobClass:e.form.jobClass,cron:e.form.cron,data:e.form.data,note:e.form.note}).then(e=>{console.log(e),this.$message({message:"提交成功",type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},enable(e){this.$confirm("确定启用该定时任务?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(i["enable"])(e).then(e=>{this.$message({message:"操作成功",type:"success"}),this.fetchData()})}).catch(()=>{})},disable(e){this.$confirm("确定禁用该定时任务?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(i["disable"])(e).then(e=>{this.$message({message:"操作成功",type:"success"}),this.fetchData()})}).catch(()=>{})},viewLog(e){this.$router.push({path:"/taskLog",query:{taskId:e}})},editItem(e){this.selRow=Object.assign({},e),this.edit()},edit(){this.checkSel()&&(this.isAdd=!1,this.form=this.selRow,this.formTitle="修改任务",this.formVisible=!0)},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(i["remove"])(e).then(e=>{this.$message({message:"操作成功",type:"success"}),this.fetchData()})}).catch(()=>{})}}}}},"1b4e":function(e,t,s){"use strict";s.r(t);var i=s("d967"),a=s("5f87");const r=["SUPER_ADMIN","SYSTEM_ADMIN","VIP","USER"];t["default"]={name:"mgr",data(){return{roleArray:r,roleDialog:{visible:!1,roles:[{roleId:1,roleName:"SUPER_ADMIN"},{roleId:2,roleName:"SYSTEM_ADMIN"},{roleId:3,roleName:"VIP"},{roleId:4,roleName:"USER"}],checkedRoleKeys:[],defaultProps:{id:"roleId",label:"roleName"}},statusList:[{label:"启用",value:"1"},{label:"冻结",value:"2"}],formVisible:!1,formTitle:"添加用户",roleSet:[],form:{username:"",password:"",nickname:"",phone:"",email:"",avatar:"",backImg:"",signature:"从前从前,有个人爱你很久...",enable:!0},rules:{username:[{required:!0,message:"请输入登录账号",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],password:[{required:!1,message:"请输入登录密码",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],nickname:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],phone:[{required:!1,message:"请输入email",trigger:"blur"}],email:[{required:!1,message:"请输入email",trigger:"blur"}]},listQuery:{page:1,limit:5,userNmae:void 0,nickName:void 0,phone:void 0,email:void 0},avatarloading:!1,backImgloading:!1,total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(i["getList"])(this.listQuery).then(e=>{this.list=e.data.dataCurrentPage,this.listLoading=!1,this.total=e.data.totalCount})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.userNmae="",this.listQuery.nickName="",this.listQuery.page=1,this.listQuery.phone="",this.listQuery.email="",this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={username:"",password:"",nickname:"",phone:"",email:"",avatar:"",backImg:"",signature:"",enable:!0}},add(){this.resetForm(),this.formTitle="添加用户",this.formVisible=!0},changeUserStatus(e,t){var s={userId:e,enable:t};Object(i["changeStatus"])(s).then(()=>{this.$notify({title:"成功",message:"修改成功",type:"success"}),this.fetchData()}).catch(()=>{this.fetchData()})},saveUser(){var e=this;this.$refs["form"].validate(t=>{if(!t)return!1;var s=e.form,a=[];for(const e of this.roleSet)"SUPER_ADMIN"==e?a.push({roleId:1}):"SYSTEM_ADMIN"==e?a.push({roleId:2}):"VIP"==e?a.push({roleId:3}):a.push({roleId:4});s.roleSet=a,console.log(s),Object(i["saveUser"])(s).then(e=>{this.$message({message:"提交成功",type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},editItem(e){this.selRow=Object.assign({},e),this.edit()},edit(){if(this.checkSel()){let e=Object.assign({},this.selRow);e.password="";let t={id:e.id,username:e.username,password:"",nickname:e.nickname,phone:e.phone,email:e.email,signature:e.signature,avatar:e.avatar,backImg:e.backImg,roleSet:e.roleSet,enable:e.enable};this.form=t,this.formTitle="修改用户",this.formVisible=!0}},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(i["remove"])(e).then(e=>{this.$message({message:"删除成功",type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}},beforeImgUpload(e,t){"avatar"==t?this.avatarloading=!0:this.backImgloading=!0;const s="image/jpeg"===e.type||"image/gif"===e.type||"image/png"===e.type,i=e.size/1024/1024/1024/1024<4;return s||this.$message.error("上传头像图片只能是 JPG 格式!"),i||this.$message.error("上传头像图片大小不能超过 4MB!"),s&&i},handleAvatarSuccess(e){0==e.code?(this.form.avatar=e.data,this.$notify({title:"成功",message:"头像上传成功",type:"success"}),this.avatarloading=!1):(this.$message({message:e.message,type:"error"}),this.avatarloading=!1)},handleBackImgSuccess(e){0==e.code?(this.form.backImg=e.data,this.$notify({title:"成功",message:"头像上传成功",type:"success"}),this.backImgloading=!1):(this.$message({message:e.message,type:"error"}),this.backImgloading=!1)},resetPwd(){if(this.checkSel()){var e=this.selRow.id;this.$confirm("将密码重置为maiqu?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(i["resetPassword"])(e).then(e=>{this.$message({message:"重置密码成功",type:"success"})}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}},openRoleItem(e){this.selRow=e,this.openRole()},openRole(){this.checkSel()&&(this.roleDialog.visible=!0)},setRole(){var e=this.$refs.roleTree.getCheckedKeys(),t="";for(var s in e)t+=e[s]+",";var a={userId:this.selRow.id,roleIds:t.slice(0,-1)};Object(i["setRole"])(a).then(e=>{this.roleDialog.visible=!1,this.fetchData(),this.$message({message:"提交成功",type:"success"})})}},computed:{token(){return{Authorization:Object(a["getToken"])()}}}}},"1be0":function(e,t,s){},"1d3d":function(e,t,s){"use strict";s("3809")},"1e97":function(e,t,s){"use strict";s("9538")},"1f34":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.userName,callback:function(t){e.$set(e.listQuery,"userName",t)},expression:"listQuery.userName"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入昵称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.nickName,callback:function(t){e.$set(e.listQuery,"nickName",t)},expression:"listQuery.nickName"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入手机号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.phone,callback:function(t){e.$set(e.listQuery,"phone",t)},expression:"listQuery.phone"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入邮箱"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.email,callback:function(t){e.$set(e.listQuery,"email",t)},expression:"listQuery.email"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-search"},nativeOn:{click:function(t){return e.search(t)}}},[e._v(e._s(e.$t("button.search")))]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(e._s(e.$t("button.reset")))])],1)],1),e._v(" "),s("br"),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return e.add(t)}}},[e._v("\n          "+e._s(e.$t("button.add"))+"\n        ")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(t){return e.edit(t)}}},[e._v("\n          "+e._s(e.$t("button.edit"))+"\n        ")]),e._v(" "),s("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(t){return e.remove(t)}}},[e._v("\n          "+e._s(e.$t("button.delete"))+"\n        ")]),e._v(" "),s("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-refresh-right"},nativeOn:{click:function(t){return e.resetPwd(t)}}},[e._v("\n          "+e._s(e.$t("button.resetPwd"))+"\n        ")]),e._v(" "),s("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-s-operation"},nativeOn:{click:function(t){return e.openRole(t)}}},[e._v("\n          "+e._s(e.$t("button.roleAllocate")))])],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,size:"mini","element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[s("el-table-column",{attrs:{label:"系统用户名"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("\n              "+e._s(t.row.username)+"\n            ")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"角色",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.roleSet,(function(t){return s("div",{key:t.roleId},[s("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v("\n                "+e._s(t.description)+"\n              ")])],1)}))}}])}),e._v(" "),s("el-table-column",{attrs:{label:"昵称"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",[e._v("\n                微信ID:\n                "+e._s(t.row.openid||"未绑定微信")+"\n              ")]),e._v(" "),s("p",[e._v("\n                密码:\n                "+e._s(t.row.password||"未设置密码")+"\n              ")]),e._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("el-tag",{attrs:{size:"mini"}},[e._v(" "+e._s(t.row.nickname)+" ")])],1)])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"手机"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.phone||"未绑定手机")+"\n          ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"邮箱"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.email||"未绑定邮箱")+"\n          ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"头像"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-image",{attrs:{src:t.row.avatar,"preview-src-list":[t.row.avatar]}},[e._v(">")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(s){return e.editItem(t.row)}}},[e._v("\n              "+e._s(e.$t("button.edit"))+"\n            ")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(s){return e.removeItem(t.row)}}},[e._v("\n              "+e._s(e.$t("button.delete"))+"\n            ")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-s-operation"},nativeOn:{click:function(s){return e.openRoleItem(t.row)}}},[e._v("角色分配")])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[5,10,20,50,100,500],"page-size":e.listQuery.limit,total:e.total,"current-page":e.listQuery.page},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"page",t)},"update:current-page":function(t){return e.$set(e.listQuery,"page",t)},"size-change":e.changeSize,"current-change":e.fetchPage,"prev-click":e.fetchPrev,"next-click":e.fetchNext}})],1)],1),e._v(" "),s("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,width:"70%"},on:{"update:visible":function(t){e.formVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px","label-position":"right"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"手机",prop:"phone"}},[s("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[s("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.avatarloading,expression:"avatarloading"}],staticClass:"avatar-uploader",attrs:{action:"http://10.15.120.205:8080/api/upload/image",name:"imgFile",headers:e.token,"on-success":e.handleAvatarSuccess,"show-file-list":!1,"before-upload":function(t){return e.beforeImgUpload(t,"avatar")}}},[e.form.avatar?s("img",{staticClass:"avatar",attrs:{src:e.form.avatar}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"角色分配"}},[s("el-checkbox-group",{model:{value:e.roleSet,callback:function(t){e.roleSet=t},expression:"roleSet"}},e._l(e.roleArray,(function(e){return s("el-checkbox",{key:e,attrs:{label:e}})})),1)],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.saveUser}},[e._v(e._s(e.$t("button.submit")))]),e._v(" "),s("el-button",{nativeOn:{click:function(t){e.formVisible=!1}}},[e._v(e._s(e.$t("button.cancel")))])],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:e.editDialog.title,visible:e.editDialog.visible,width:"70%"},on:{"update:visible":function(t){return e.$set(e.editDialog,"visible",t)}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px","label-position":"right"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"手机",prop:"phone"}},[s("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[s("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.avatarloading,expression:"avatarloading"}],staticClass:"avatar-uploader",attrs:{action:"http://localhost:8080/api/upload/image",name:"imgFile",headers:e.token,"on-success":e.handleAvatarSuccess,"show-file-list":!1,"before-upload":function(t){return e.beforeImgUpload(t,"avatar")}}},[e.form.avatar?s("img",{staticClass:"avatar",attrs:{src:e.form.avatar}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"角色分配"}},[s("el-checkbox-group",{model:{value:e.roleSet,callback:function(t){e.roleSet=t},expression:"roleSet"}},e._l(e.roleArray,(function(e){return s("el-checkbox",{key:e,attrs:{label:e}})})),1)],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.editUser}},[e._v(e._s(e.$t("button.submit")))]),e._v(" "),s("el-button",{nativeOn:{click:function(t){e.editDialog.visible=!1}}},[e._v(e._s(e.$t("button.cancel")))])],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"角色分配",visible:e.roleDialog.visible,width:"25%"},on:{"update:visible":function(t){return e.$set(e.roleDialog,"visible",t)}}},[s("el-form",[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-tree",{ref:"roleTree",attrs:{data:e.roleDialog.roles,"show-checkbox":"","node-key":"roleId","default-checked-keys":e.roleDialog.checkedRoleKeys,props:e.roleDialog.defaultProps}})],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.setRole}},[e._v(e._s(e.$t("button.submit")))])],1)],1)],1)],1)},a=[],r=s("c0c7"),n=s("5f87");const o=["admin","user"];var l={name:"mgr",data(){return{roleArray:o,roleDialog:{visible:!1,roles:[{roleId:1,roleName:"admin"},{roleId:2,roleName:"user"}],checkedRoleKeys:[],defaultProps:{id:"roleId",label:"roleName"}},editDialog:{visible:!1,title:"修改用户"},formVisible:!1,formTitle:"添加用户",roleSet:[],form:{username:"",password:"",nickname:"",phone:"",email:"",avatar:""},rules:{username:[{required:!0,message:"请输入登录账号",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],password:[{required:!1,message:"请输入登录密码",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],nickname:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],phone:[{required:!1,message:"请输入phone",trigger:"blur"}],email:[{required:!1,message:"请输入email",trigger:"blur"}]},listQuery:{page:1,limit:5,userNmae:void 0,nickName:void 0,phone:void 0,email:void 0},avatarloading:!1,backImgloading:!1,total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(r["getList"])(this.listQuery).then(e=>{this.list=e.data.dataCurrentPage,this.listLoading=!1,this.total=e.data.totalCount})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.userNmae="",this.listQuery.nickName="",this.listQuery.page=1,this.listQuery.phone="",this.listQuery.email="",this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={username:"",password:"",nickname:"",phone:"",email:"",avatar:"",backImg:"",signature:"",enable:!0}},add(){this.resetForm(),this.formTitle="添加用户",this.formVisible=!0},changeUserStatus(e,t){var s={userId:e,enable:t};Object(r["changeStatus"])(s).then(()=>{this.$notify({title:"成功",message:"修改成功",type:"success"}),this.fetchData()}).catch(()=>{this.fetchData()})},saveUser(){var e=this;this.$refs["form"].validate(t=>{if(!t)return!1;var s=e.form,i=[];for(const e of this.roleSet)"admin"==e?i.push({roleId:1}):"user"==e&&i.push({roleId:2});s.roleSet=i,console.log(s),Object(r["saveUser"])(s).then(e=>{this.$message({message:"提交成功",type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},editItem(e){this.selRow=Object.assign({},e),this.edit()},edit(){if(this.checkSel()){let e=Object.assign({},this.selRow);e.password="";let t={id:e.id,username:e.username,password:"",nickname:e.nickname,phone:e.phone,email:e.email,avatar:e.avatar,roleSet:e.roleSet};this.form=t,this.formTitle="修改用户",this.editDialog.visible=!0}},editUser(){var e=this;this.$refs["form"].validate(t=>{if(!t)return!1;var s=e.form,i=[];for(const e of this.roleSet)"admin"==e?i.push({roleId:1}):"user"==e&&i.push({roleId:2});s.roleSet=i,console.log(s),Object(r["editUser"])(s).then(e=>{this.$message({message:"提交成功",type:"success"}),this.fetchData(),this.formVisible=!1})})},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;console.log(this.selRow),this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(r["remove"])(e).then(e=>{this.$message({message:"删除成功",type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}},beforeImgUpload(e,t){"avatar"==t?this.avatarloading=!0:this.backImgloading=!0;const s="image/jpeg"===e.type||"image/gif"===e.type||"image/png"===e.type||"image/jpg"===e.type,i=e.size/1024/1024/1024/1024<4;return s||(console.log("上传头像图片格式不支持"),this.$message.error("上传头像图片格式不支持")),i||(console.log("上传头像图片大小不能超过 4MB!"),this.$message.error("上传头像图片大小不能超过 4MB!")),console.log(s&&i),s&&i},handleAvatarSuccess(e){200==e.code?(this.form.avatar=e.data,this.$notify({title:"成功",message:"头像上传成功",type:"success"}),this.avatarloading=!1):(this.$message({message:e.message,type:"error"}),this.avatarloading=!1)},handleBackImgSuccess(e){0==e.code?(this.form.backImg=e.data,this.$notify({title:"成功",message:"头像上传成功",type:"success"}),this.backImgloading=!1):(this.$message({message:e.message,type:"error"}),this.backImgloading=!1)},resetPwd(){if(this.checkSel()){var e=this.selRow.id;this.$confirm("将密码重置为maiqu?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(r["resetPassword"])(e).then(e=>{this.$message({message:"重置密码成功",type:"success"})}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}},openRoleItem(e){this.selRow=e,this.openRole()},openRole(){this.checkSel()&&(this.roleDialog.visible=!0)},setRole(){var e=this.$refs.roleTree.getCheckedKeys(),t="";for(var s in e)t+=e[s]+",";var i={userId:this.selRow.id,roleIds:t.slice(0,-1)};Object(r["setRole"])(i).then(e=>{this.roleDialog.visible=!1,this.fetchData(),this.$message({message:"提交成功",type:"success"})})}},computed:{token(){return{Authorization:Object(n["getToken"])()}}}},c=l,u=(s("cd8f"),s("2877")),d=Object(u["a"])(c,i,a,!1,null,null,null);t["default"]=d.exports},2:function(e,t){},2153:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("iframe",{attrs:{src:"http://flash-api.enilu.cn/swagger-ui/index.html",width:"100%",height:"768px",frameborder:"0",scrolling:"auto"}})])])}],r=(s("a53c"),s("2877")),n={},o=Object(r["a"])(n,i,a,!1,null,"434c8de2",null);t["default"]=o.exports},"24ab":function(e,t,s){e.exports={theme:"#1890ff"}},"260b":function(e,t){throw new Error("Module parse failed: Unexpected token (3:13)\nYou may need an appropriate loader to handle this file type.\n| plugins:\r\n| \r\n> - removeAttrs:\r\n|     attrs:\r\n|       - 'fill'\r")},"26fc":function(e,t,s){e.exports=s.p+"static/img/404_cloud.0f4bc32b.png"},"293a":function(e,t,s){},"2a2a":function(e,t,s){"use strict";s("936d")},3:function(e,t){},"30b0":function(e,t,s){"use strict";s.r(t);var i=s("3528");t["default"]={name:"role",data(){return{powerDialog:{visible:!1,powers:[],checkedPowerKeys:[1],defaultProps:{id:"powerId",label:"powerLabel"}},statusList:[{label:"启用",value:"1"},{label:"冻结",value:"2"}],formVisible:!1,formTitle:"添加角色",form:{roleName:"",description:"",enable:!0},rules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],description:[{required:!0,message:"请输入角色描述",trigger:"blur"}]},listQuery:{page:1,limit:5,roleName:void 0,description:void 0},total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(i["getList"])(this.listQuery).then(e=>{this.list=e.data.dataCurrentPage,this.listLoading=!1,this.total=e.data.totalCount})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.roleNmae="",this.listQuery.description="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={roleName:"",description:"",enable:!0}},add(){this.resetForm(),this.formTitle="添加角色",this.formVisible=!0},changeRoleStatus(e,t){var s={roleId:e,enable:t};Object(i["changeStatus"])(s).then(()=>{this.$notify({title:"成功",message:"修改成功",type:"success"}),this.fetchData()}).catch(()=>{this.fetchData()})},saveRole(){var e=this;this.$refs["form"].validate(t=>{if(!t)return!1;var s=e.form;Object(i["saveRole"])(s).then(e=>{this.$message({message:"提交成功",type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.roleId)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},editItem(e){this.selRow=Object.assign({},e),this.edit()},edit(){if(this.checkSel()){let e=Object.assign({},this.selRow),t={roleId:e.roleId,roleName:e.roleName,description:e.description,enable:e.enable};this.form=t,console.log(this.form),this.formTitle="修改角色",this.formVisible=!0}},openPowerItem(e){this.selRow=e,this.openPower()},openPower(){if(this.checkSel()){this.powerDialog.checkedPowerKeys=[],getPowerList().then(e=>{const t=e.data.data;for(const s of t)s.powerLabel=`${s.powerName} ${s.powerUrl}`;this.powerDialog.powers=t}),this.powerDialog.visible=!0;let e=Object.assign({},this.selRow);getPowerListByRole(e.roleId).then(e=>{const t=e.data.data;this.powerDialog.checkedPowerKeys=t})}},setPower(){var e=this.$refs.powerTree.getCheckedKeys(),t="";for(var s in e)t+=e[s]+",";var i={roleId:this.selRow.roleId,powerIds:t.slice(0,-1)};setPower(i).then(e=>{this.powerDialog.visible=!1,this.fetchData(),this.$message({message:"提交成功",type:"success"})})},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.roleId;this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(i["remove"])(e).then(e=>{this.$message({message:"删除成功",type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}}}}},3160:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"drawer-container"},[s("div",[s("h3",{staticClass:"drawer-title"},[e._v("Page style setting")]),e._v(" "),s("div",{staticClass:"drawer-item"},[s("span",[e._v("Theme Color")]),e._v(" "),s("theme-picker",{staticStyle:{float:"right",height:"26px",margin:"-3px 8px 0 0"},on:{change:e.themeChange}})],1),e._v(" "),s("div",{staticClass:"drawer-item"},[s("span",[e._v("Open Tags-View")]),e._v(" "),s("el-switch",{staticClass:"drawer-switch",model:{value:e.tagsView,callback:function(t){e.tagsView=t},expression:"tagsView"}})],1),e._v(" "),s("div",{staticClass:"drawer-item"},[s("span",[e._v("Fixed Header")]),e._v(" "),s("el-switch",{staticClass:"drawer-switch",model:{value:e.fixedHeader,callback:function(t){e.fixedHeader=t},expression:"fixedHeader"}})],1),e._v(" "),s("div",{staticClass:"drawer-item"},[s("span",[e._v("Sidebar Logo")]),e._v(" "),s("el-switch",{staticClass:"drawer-switch",model:{value:e.sidebarLogo,callback:function(t){e.sidebarLogo=t},expression:"sidebarLogo"}})],1)])])},a=[],r=s("b18f"),n={components:{ThemePicker:r["default"]},data(){return{}},computed:{fixedHeader:{get(){return this.$store.state.settings.fixedHeader},set(e){this.$store.dispatch("settings/changeSetting",{key:"fixedHeader",value:e})}},tagsView:{get(){return this.$store.state.settings.tagsView},set(e){this.$store.dispatch("settings/changeSetting",{key:"tagsView",value:e})}},sidebarLogo:{get(){return this.$store.state.settings.sidebarLogo},set(e){this.$store.dispatch("settings/changeSetting",{key:"sidebarLogo",value:e})}}},methods:{themeChange(e){this.$store.dispatch("settings/changeSetting",{key:"theme",value:e})}}},o=n,l=(s("f271"),s("2877")),c=Object(l["a"])(o,i,a,!1,null,"5d274279",null);t["default"]=c.exports},"318b":function(e,t,s){"use strict";s("e9fe")},3395:function(e,t,s){},3432:function(e,t,s){"use strict";s.r(t),s.d(t,"getApiUrl",(function(){return r})),s.d(t,"getList",(function(){return n})),s.d(t,"save",(function(){return o})),s.d(t,"remove",(function(){return l}));var i=s("b775");const a=Object({NODE_ENV:"production",VUE_APP_BASE_API:"http://10.15.120.205:8080",BASE_URL:"app://./",IS_ELECTRON:!0}).BASE_API;function r(){return a}function n(e){return Object(i["default"])({url:"/banner/list",method:"get",params:e})}function o(e){return Object(i["default"])({url:"/banner",method:"post",params:e})}function l(e){return Object(i["default"])({url:"/banner",method:"delete",params:{id:e}})}},3528:function(e,t,s){"use strict";s.r(t),s.d(t,"getList",(function(){return a})),s.d(t,"save",(function(){return r})),s.d(t,"remove",(function(){return n})),s.d(t,"roleTreeListByIdUser",(function(){return o})),s.d(t,"savePermissons",(function(){return l}));var i=s("b775");function a(e){return Object(i["default"])({url:"/role/queryPage",method:"get",params:e})}function r(e){return Object(i["default"])({url:"/role",method:"post",params:e})}function n(e){return Object(i["default"])({url:"/role",method:"delete",params:{roleId:e}})}function o(e){return Object(i["default"])({url:"/role/roleTreeListByIdUser",method:"get",params:{idUser:e}})}function l(e){return Object(i["default"])({url:"/role/savePermisson",method:"post",params:e})}},3809:function(e,t,s){},3914:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",[s("el-col",{attrs:{span:24}},[s("el-button",{attrs:{icon:"el-icon-back",size:"mini"},nativeOn:{click:function(t){return e.back(t)}}},[e._v(e._s(e.$t("button.back")))])],1)],1)],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[s("el-table-column",{attrs:{label:"任务名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.name)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"执行时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.execAt)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"执行结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(1===t.row.execSuccess?"成功":"失败")+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"异常信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.jobException)+"\n      ")]}}])})],1),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100,500],"page-size":e.listQuery.limit,total:e.total,"current-page":e.listQuery.page},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"page",t)},"update:current-page":function(t){return e.$set(e.listQuery,"page",t)},"size-change":e.changeSize,"current-change":e.fetchPage,"prev-click":e.fetchPrev,"next-click":e.fetchNext}})],1)},a=[],r=s("94ab"),n={data(){return{taskId:"",listQuery:{page:1,limit:20,taskId:void 0},total:0,list:null,listLoading:!0,selRow:{}}},created(){this.init()},methods:{init(){this.listQuery.taskId=this.$route.query.taskId,this.fetchData()},fetchData(){this.listLoading=!0,Object(r["logList"])(this.listQuery).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},back(){this.$router.go(-1)}}},o=n,l=(s("1d3d"),s("2877")),c=Object(l["a"])(o,i,a,!1,null,"04c3a85b",null);t["default"]=c.exports},"3ba2":function(e,t,s){"use strict";s.r(t);s("ac6a");var i=s("e0e0"),a=s("7754"),r=s("5780"),n=s("4381");t["default"]={name:"workFlowRequest",directives:{permission:n["default"]},data(){return{activeName:"first",formVisible:!1,formTitle:"发起新流程",isAdd:!0,form:{title:"",processDefId:"",instanceId:"",descript:"",state:"",id:""},listQuery:{page:1,limit:20,id:void 0},processDefinitionList:[],dictStateList:[],total:0,list:null,listLoading:!0,selRow:{},taskResult:{list:[]}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},computed:{rules(){return{}}},created(){this.init()},methods:{init(){this.fetchData(),r["default"].getAll().then(e=>{this.processDefinitionList=e.data}),a["default"].getDicts("工作流实例状态").then(e=>{this.dictStateList=e.data})},fetchData(){this.listLoading=!0,i["default"].getList(this.listQuery).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.fetchData()},reset(){this.listQuery.id="",this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},formatState(e){let t="";return this.dictStateList.forEach((function(s){e+""==s.num&&(t=s.name)})),t},resetForm(){this.form={title:"",processDefId:"",instanceId:"",descript:"",state:"",id:""}},add(){this.formTitle="发起新流程",this.formVisible=!0,this.isAdd=!0,void 0!==this.$refs["form"]&&this.$refs["form"].resetFields()},save(){this.$refs["form"].validate(e=>{if(!e)return!1;{const e={id:this.form.id,title:this.form.title,processDefId:this.form.processDefId,instanceId:this.form.instanceId,descript:this.form.descript,state:this.form.state};e.id?i["default"].update(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1,this.resetForm()}):i["default"].add(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1,this.resetForm()})}})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},editItem(e){this.selRow=e,this.edit()},todo(e){this.$message({message:this.$t("common.todo"),type:"info"})},edit(){if(this.checkSel()){this.isAdd=!1;let e=Object.assign({},this.selRow);this.form=e,this.formTitle="查看流程实例",this.formVisible=!0,void 0!==this.$refs["form"]&&this.$refs["form"].resetFields()}},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm(this.$t("common.deleteConfirm"),this.$t("common.tooltip"),{confirmButtonText:this.$t("button.submit"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then(()=>{i["default"].remove(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}}}}},"3be1":function(e,t,s){"use strict";s.r(t),s.d(t,"getList",(function(){return a}));var i=s("b775");function a(e){return Object(i["default"])({url:"/fileMgr/list",method:"get",params:e})}},"3bfc":function(e,t,s){"use strict";s.r(t);var i=s("5646"),a=s("4381");t["default"]={name:"msg",directives:{permission:a["default"]},data(){return{formVisible:!1,formTitle:"添加历史消息",isAdd:!0,form:{tplCode:"",content:"",receiver:"",type:"",id:""},listQuery:{page:1,limit:20,id:void 0,tplCode:void 0},rangeDate:void 0,total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.$route.query.type;this.fetchData()},fetchData(){this.listLoading=!0;let e=this.listQuery;this.rangeDate&&(e["startDate"]=this.rangeDate[0],e["endDate"]=this.rangeDate[1]),Object(i["getList"])(e).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.startDate=void 0,this.listQuery.endDate=void 0,this.rangeDate="",this.tplCode="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},clear(){this.$confirm("确认清楚所有历史消息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(i["clear"])().then(e=>{this.fetchData(),this.$message({type:"success",message:"清楚成功!"})})})}}}},"3ca5":function(e,t,s){"use strict";s.r(t);const i=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"];t["default"]=i},4008:function(e,t,s){"use strict";s.r(t);var i=s("94ab");t["default"]={data(){return{taskId:"",listQuery:{page:1,limit:20,taskId:void 0},total:0,list:null,listLoading:!0,selRow:{}}},created(){this.init()},methods:{init(){this.listQuery.taskId=this.$route.query.taskId,this.fetchData()},fetchData(){this.listLoading=!0,Object(i["logList"])(this.listQuery).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},back(){this.$router.go(-1)}}}},"402f":function(e,t,s){},"41bb":function(e,t,s){"use strict";s.r(t);s("28a5"),s("ac6a");var i=s("8256"),a=s("5c96"),r=s("f09f"),n=s("3ca5"),o=s("5248"),l=s("4761"),c=s("fa7d"),u=s("5f87");t["default"]={name:"editArticle",components:{editorImage:i["default"]},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:Number,required:!1,default:360}},data(){return{uploadUrl:"",uploadFileId:"",uploadHeaders:{Authorization:""},loadingInstance:{},form:{title:"",author:"",idChannel:"1",content:"",img:""},articleImg:"",ifUpload:!0,options:[],hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"}}},computed:{language(){return this.languageTypeList[this.$store.getters.language]}},watch:{value(e){!this.hasChange&&this.hasInit&&this.$nextTick(()=>window.tinymce.get(this.tinymceId).setContent(e||""))},language(){this.destroyTinymce(),this.$nextTick(()=>this.initTinymce())}},mounted(){this.init(),this.initTinymce()},activated(){this.initTinymce()},deactivated(){this.destroyTinymce()},destroyed(){this.destroyTinymce()},methods:{init(){this.uploadUrl=Object(c["getApiUrl"])()+"/file",this.uploadHeaders["Authorization"]=Object(u["getToken"])();const e=this.$route.query.id;e&&Object(o["get"])(e).then(e=>{this.form=e.data,this.setContent(e.data.content),this.articleImg=this.uploadUrl+"/getImgStream?idFile="+e.data.img,this.ifUpload=!1}),Object(l["getList"])().then(e=>{this.options=e.data})},initTinymce(){const e=this;window.tinymce.init({value:"aaaaaa",language:this.language,selector:"#"+this.tinymceId,height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:n["default"],menubar:this.menubar,plugins:r["default"],end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:t=>{e.value&&t.setContent(e.value),e.hasInit=!0,t.on("NodeChange Change KeyUp SetContent",()=>{this.hasChange=!0;const e=t.getContent();this.form.content=e})},setup(t){t.on("FullscreenStateChanged",t=>{e.fullscreen=t.state})}})},destroyTinymce(){const e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand("mceFullScreen"),e&&e.destroy()},setContent(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK(e){const t=this;e.forEach(e=>{window.tinymce.get(t.tinymceId).insertContent(`<img class="wscnph" src="${e.url}" >`)})},save(){this.$refs["form"].validate(e=>{if(!e)return!1;{const e=this.form.content.split("%").join("%25");Object(o["save"])({id:this.form.id,title:this.form.title,author:this.form.author,idChannel:this.form.idChannel,content:e,img:this.form.img}).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.back()})}})},back(){this.$router.go(-1)},handleBeforeUpload(){if(""!==this.uploadFileId)return this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1;this.loadingInstance=a["Loading"].service({lock:!0,text:this.$t("common.uploading"),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})},handleUploadSuccess(e,t){this.loadingInstance.close(),2e4===e.code?this.form.img=e.data.id:this.$message({message:this.$t("common.uploadError"),type:"error"})},uploadImg(){this.ifUpload=!this.ifUpload}}}},"41c4":function(e,t,s){"use strict";s("b89f")},4259:function(e,t,s){},4381:function(e,t,s){"use strict";s.r(t);var i=s("e799");const a=function(e){e.directive("permission",i["default"])};window.Vue&&(window["permission"]=i["default"],Vue.use(a)),i["default"].install=a,t["default"]=i["default"]},44368:function(e,t,s){"use strict";s.r(t),s.d(t,"getList",(function(){return a})),s.d(t,"clear",(function(){return r}));var i=s("b775");function a(e){return Object(i["default"])({url:"/loginLog/list",method:"get",params:e})}function r(){return Object(i["default"])({url:"/loginLog",method:"delete"})}},"463c":function(e,t,s){"use strict";s("f3cc")},4761:function(e,t,s){"use strict";s.r(t),s.d(t,"getList",(function(){return a})),s.d(t,"save",(function(){return r})),s.d(t,"remove",(function(){return n}));var i=s("b775");function a(e){return Object(i["default"])({url:"/channel/list",method:"get",params:e})}function r(e){return Object(i["default"])({url:"/channel",method:"post",params:e})}function n(e){return Object(i["default"])({url:"/channel",method:"delete",params:{id:e}})}},4782:function(e,t,s){"use strict";s.r(t);var i=s("a457"),a=s("4381");t["default"]={name:"log",directives:{permission:a["default"]},data(){return{options:[{value:"1",label:"业务日志"},{value:"2",label:"异常日志"}],listQuery:{page:1,limit:20,beginTime:void 0,endTime:void 0,logName:void 0,logType:void 0},total:0,list:null,listLoading:!0,selRow:{}}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(i["getList"])(this.listQuery).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.beginTime="",this.listQuery.endTime="",this.listQuery.logName="",this.listQuery.logType="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},clear(){this.$confirm("确定清空数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(i["clear"])().then(e=>{this.$message({message:"清空成功",type:"sucess"}),this.fetchData()})}).catch(()=>{})}}}},"4b90":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("iframe",{attrs:{src:"http://flash-api.enilu.cn/druid/index.html",width:"100%",height:"768px",frameborder:"0",scrolling:"auto"}})])])}],r={name:"druid",created:function(){this.init()},methods:{init(){this.$notify({title:"提示",message:"查看application.yml配置文件获取账号密码",duration:3e3})}}},n=r,o=(s("cd4c"),s("2877")),l=Object(o["a"])(n,i,a,!1,null,"7e24535f",null);t["default"]=l.exports},"4bb1":function(e,t,s){"use strict";s("c926")},"4c1f":function(e,t,s){"use strict";s.r(t);s("ac6a"),s("28a5");var i=s("7754"),a=s("4381");t["default"]={name:"dict",directives:{permission:a["default"]},data(){return{formVisible:!1,formTitle:"添加字典",deptList:[],roleList:[],isAdd:!0,permissons:[],permissonVisible:!1,form:{name:"",id:"",detail:"",details:[]},rules:{name:[{required:!0,message:"请输入字典名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}]},listQuery:{name:void 0},list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,i["default"].getList(this.listQuery).then(e=>{this.list=e.data,this.listLoading=!1}).catch(()=>{})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.name="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={name:"",id:"",details:[],detail:[]}},add(){this.resetForm(),this.formTitle="添加字典",this.formVisible=!0,this.isAdd=!0},save(){const e=this;this.$refs["form"].validate(t=>{if(!t)return!1;{const t=e.form.name;let s="";for(const i in e.form.details){const t=e.form.details[i];s+=t["key"]+":"+t["value"]+";"}""!==this.form.id?i["default"].update({id:e.form.id,dictName:t,dictValues:s}).then(t=>{this.$message({message:"提交成功",type:"success"}),e.fetchData(),e.formVisible=!1}):i["default"].save({dictName:t,dictValues:s}).then(t=>{this.$message({message:"提交成功",type:"success"}),e.fetchData(),e.formVisible=!1})}})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},editItem(e){this.selRow=e,this.edit()},edit(){if(this.checkSel()){this.isAdd=!1,this.formTitle="修改字典";let e=this.selRow.detail.split(","),t=[];e.forEach((function(e,s){let i=e.split(":");t.push({key:i[0],value:i[1]})})),this.form={name:this.selRow.name,id:this.selRow.id,details:t,detail:this.selRow.detail},this.formVisible=!0}},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){const e=this.selRow.id;this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{i["default"].remove(e).then(e=>{this.$message({message:"操作成功",type:"success"}),this.fetchData()})}).catch(()=>{})}},addDetail(){let e=this.form.details;e.push({value:"",key:""}),this.form.details=e},removeDetail(e){let t=[];this.form.details.forEach((function(s,i){e.key!==s.key&&t.push(s)})),this.form.details=t}}}},"4c4f":function(e,t,s){},"4cf4":function(e,t,s){},"4df8":function(e,t,s){},"4eb5":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",{attrs:{gutter:24}},[s("el-col",{attrs:{span:4}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",size:"mini",placeholder:"起始日期","value-format":"yyyy-MM-dd"},model:{value:e.listQuery.beginTime,callback:function(t){e.$set(e.listQuery,"beginTime",t)},expression:"listQuery.beginTime"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",size:"mini",placeholder:"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.listQuery.endTime,callback:function(t){e.$set(e.listQuery,"endTime",t)},expression:"listQuery.endTime"}})],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-search"},nativeOn:{click:function(t){return e.search(t)}}},[e._v(e._s(e.$t("button.search")))]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(e._s(e.$t("button.reset")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/loginLog/delLoginLog"],expression:"['/loginLog/delLoginLog']"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(t){return e.clear(t)}}},[e._v(e._s(e.$t("button.clear")))])],1)],1),e._v(" "),s("br")],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[s("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-form",{staticClass:"flash-table-expand",attrs:{"label-position":"left",inline:"","label-width":"120px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"用户id"}},[s("span",[e._v(e._s(t.row.userid))])])],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"日志名称"}},[s("span",[e._v(e._s(t.row.logname))])])],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"用户"}},[s("span",[e._v(e._s(t.row.userName))])])],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"IP"}},[s("span",[e._v(e._s(t.row.ip))])])],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"结果"}},[s("span",[e._v(e._s(t.row.succeed))])])],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"时间"}},[s("span",[e._v(e._s(t.row.createtime))])])],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"内容"}},[s("span",[e._v(e._s(t.row.regularMessage))])])],1)],1)],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"用户",prop:"userName"}}),e._v(" "),s("el-table-column",{attrs:{label:"IP",prop:"ip"}}),e._v(" "),s("el-table-column",{attrs:{label:"日志名称",prop:"logname"}}),e._v(" "),s("el-table-column",{attrs:{label:"时间",prop:"createtime"}})],1),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100,500],"page-size":e.listQuery.limit,total:e.total,"current-page":e.listQuery.page},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"page",t)},"update:current-page":function(t){return e.$set(e.listQuery,"page",t)},"size-change":e.changeSize,"current-change":e.fetchPage,"prev-click":e.fetchPrev,"next-click":e.fetchNext}})],1)},a=[],r=s("44368"),n=s("4381"),o={name:"loginLog",directives:{permission:n["default"]},data(){return{listQuery:{page:1,limit:20,beginTime:void 0,endTime:void 0},total:0,list:null,listLoading:!0,selRow:{}}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(r["getList"])(this.listQuery).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.beginTime="",this.listQuery.endTime="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},clear(){this.$confirm("确定清空数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(r["clear"])().then(e=>{this.$message({message:"清空成功",type:"sucess"}),this.fetchData()})}).catch(()=>{})}}},l=o,c=(s("c57f"),s("2877")),u=Object(c["a"])(l,i,a,!1,null,"0cea2a20",null);t["default"]=u.exports},"4ffd":function(e,t,s){e.exports=s.p+"static/img/logo.01819d56.png"},5248:function(e,t,s){"use strict";s.r(t),s.d(t,"getList",(function(){return a})),s.d(t,"save",(function(){return r})),s.d(t,"remove",(function(){return n})),s.d(t,"get",(function(){return o}));var i=s("b775");function a(e){return Object(i["default"])({url:"/article/list",method:"get",params:e})}function r(e){return Object(i["default"])({url:"/article",method:"post",data:e})}function n(e){return Object(i["default"])({url:"/article",method:"delete",params:{id:e}})}function o(e){return Object(i["default"])({url:"/article",method:"get",params:{id:e}})}},"559a":function(e,t,s){},5646:function(e,t,s){"use strict";s.r(t),s.d(t,"getList",(function(){return a})),s.d(t,"save",(function(){return r})),s.d(t,"clear",(function(){return n}));var i=s("b775");function a(e){return Object(i["default"])({url:"/message/list",method:"get",params:e})}function r(e){return Object(i["default"])({url:"/message",method:"post",params:e})}function n(){return Object(i["default"])({url:"/message",method:"delete"})}},"56f7":function(e,t,s){"use strict";s.r(t);var i=s("8ad4"),a=s("fcb7"),r=s("4381");t["default"]={directives:{permission:r["default"]},name:"dept",components:{treeTable:i["default"]},data(){return{expandAll:!0,data:[],formVisible:!1,formTitle:"",isAdd:!1,deptTree:{data:[]},form:{id:"",simplename:"",fullname:"",pid:void 0,num:""},rules:{simplename:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],fullname:[{required:!0,message:"请输入编码",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],num:[{required:!0,message:"请输入排序",trigger:"blur"}]}}},created(){this.fetchData()},methods:{fetchData(){this.listLoading=!0,Object(a["list"])().then(e=>{this.data=e.data,this.deptTree.data=e.data,this.listLoading=!1})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},add(){this.form={},this.formTitle="添加菜单",this.formVisible=!0,this.isAdd=!0},save(){var e=this;this.$refs["form"].validate(t=>{if(!t)return!1;{console.log("form",e.form);const t={id:e.form.id,simplename:e.form.simplename,fullname:e.form.fullname,num:e.form.num,pid:e.form.pid,parent:null};Object(a["save"])(t).then(t=>{console.log(t),this.$message({message:"提交成功",type:"success"}),e.fetchData(),e.formVisible=!1})}})},editItem(e){this.selRow=Object.assign({},e),"0"==this.selRow.pid&&(this.selRow.pid=void 0),this.edit()},edit(){this.checkSel()&&(this.isAdd=!1,this.form=Object.assign({},this.selRow),this.form.statusBool="启用"===this.form.statusName,this.form.password="",this.formTitle="修改用户",this.formVisible=!0)},removeItem(e){this.selRow=e,this.remove()},remove(){this.checkSel()&&this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=this.selRow;Object(a["del"])(e.id).then(e=>{this.$message({message:"删除成功",type:"success"}),this.fetchData()})})}}}},5737:function(e,t,s){"use strict";s("402f")},5740:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.userName,callback:function(t){e.$set(e.listQuery,"userName",t)},expression:"listQuery.userName"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入昵称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.nickName,callback:function(t){e.$set(e.listQuery,"nickName",t)},expression:"listQuery.nickName"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入手机号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.phone,callback:function(t){e.$set(e.listQuery,"phone",t)},expression:"listQuery.phone"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入邮箱"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.email,callback:function(t){e.$set(e.listQuery,"email",t)},expression:"listQuery.email"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-search"},nativeOn:{click:function(t){return e.search(t)}}},[e._v(e._s(e.$t("button.search")))]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(e._s(e.$t("button.reset")))])],1)],1),e._v(" "),s("br"),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return e.add(t)}}},[e._v("\r\n        "+e._s(e.$t("button.add"))+"\r\n        ")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(t){return e.edit(t)}}},[e._v("\r\n        "+e._s(e.$t("button.edit"))+"\r\n        ")]),e._v(" "),s("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(t){return e.remove(t)}}},[e._v("\r\n        "+e._s(e.$t("button.delete"))+"\r\n        ")]),e._v(" "),s("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-refresh-right"},nativeOn:{click:function(t){return e.resetPwd(t)}}},[e._v("\r\n        "+e._s(e.$t("button.resetPwd"))+"\r\n        ")]),e._v(" "),s("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-s-operation"},nativeOn:{click:function(t){return e.openRole(t)}}},[e._v("\r\n        "+e._s(e.$t("button.roleAllocate")))])],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,size:"mini","element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[s("el-table-column",{attrs:{label:"优惠价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("\r\n            "+e._s(t.row.price)+"\r\n            ")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"描述",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v("\r\n                "+e._s(t.row.comment)+"\r\n            ")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"持有用户"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("el-tag",{attrs:{size:"mini"}},[e._v(" "+e._s(t.row.userId)+" ")])],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(s){return e.editItem(t.row)}}},[e._v("\r\n            "+e._s(e.$t("button.edit"))+"\r\n            ")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(s){return e.removeItem(t.row)}}},[e._v("\r\n            "+e._s(e.$t("button.delete"))+"\r\n            ")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-s-operation"},nativeOn:{click:function(s){return e.openRoleItem(t.row)}}},[e._v("角色分配")])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[5,10,20,50,100,500],"page-size":e.listQuery.limit,total:e.total,"current-page":e.listQuery.page},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"page",t)},"update:current-page":function(t){return e.$set(e.listQuery,"page",t)},"size-change":e.changeSize,"current-change":e.fetchPage,"prev-click":e.fetchPrev,"next-click":e.fetchNext}})],1)],1),e._v(" "),s("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,width:"70%"},on:{"update:visible":function(t){e.formVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px","label-position":"right"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"手机",prop:"phone"}},[s("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"签名",prop:"signature"}},[s("el-input",{model:{value:e.form.signature,callback:function(t){e.$set(e.form,"signature",t)},expression:"form.signature"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[s("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.avatarloading,expression:"avatarloading"}],staticClass:"avatar-uploader",attrs:{action:"https://api.maiquer.tech/api/upload/image",name:"imgFile",headers:e.token,"on-success":e.handleAvatarSuccess,"show-file-list":!1,"before-upload":function(t){return e.beforeImgUpload(t,"avatar")}}},[e.form.avatar?s("img",{staticClass:"avatar",attrs:{src:e.form.avatar}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"背景图",prop:"backImg"}},[s("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.backImgloading,expression:"backImgloading"}],staticClass:"avatar-uploader",attrs:{action:"https://api.maiquer.tech/api/upload/image",name:"imgFile",headers:e.token,"on-success":e.handleBackImgSuccess,"show-file-list":!1,"before-upload":function(t){return e.beforeImgUpload(t,"backImg")}}},[e.form.backImg?s("img",{staticClass:"avatar",attrs:{src:e.form.backImg}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"角色分配"}},[s("el-checkbox-group",{model:{value:e.roleSet,callback:function(t){e.roleSet=t},expression:"roleSet"}},e._l(e.roleArray,(function(e){return s("el-checkbox",{key:e,attrs:{label:e}})})),1)],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"是否启用"}},[s("el-switch",{model:{value:e.form.enable,callback:function(t){e.$set(e.form,"enable",t)},expression:"form.enable"}})],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.saveUser}},[e._v(e._s(e.$t("button.submit")))]),e._v(" "),s("el-button",{nativeOn:{click:function(t){e.formVisible=!1}}},[e._v(e._s(e.$t("button.cancel")))])],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"角色分配",visible:e.roleDialog.visible,width:"25%"},on:{"update:visible":function(t){return e.$set(e.roleDialog,"visible",t)}}},[s("el-form",[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-tree",{ref:"roleTree",attrs:{data:e.roleDialog.roles,"show-checkbox":"","node-key":"roleId","default-checked-keys":e.roleDialog.checkedRoleKeys,props:e.roleDialog.defaultProps}})],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.setRole}},[e._v(e._s(e.$t("button.submit")))])],1)],1)],1)],1)},a=[],r=s("5f22"),n=s("5f87");const o=["SUPER_ADMIN","SYSTEM_ADMIN","VIP","USER"];var l={name:"mgr",data(){return{roleArray:o,roleDialog:{visible:!1,roles:[{roleId:1,roleName:"SUPER_ADMIN"},{roleId:2,roleName:"SYSTEM_ADMIN"},{roleId:3,roleName:"VIP"},{roleId:4,roleName:"USER"}],checkedRoleKeys:[],defaultProps:{id:"roleId",label:"roleName"}},statusList:[{label:"启用",value:"1"},{label:"冻结",value:"2"}],formVisible:!1,formTitle:"添加用户",roleSet:[],form:{username:"",password:"",nickname:"",phone:"",email:"",avatar:"",backImg:"",signature:"从前从前,有个人爱你很久...",enable:!0},rules:{username:[{required:!0,message:"请输入登录账号",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],password:[{required:!1,message:"请输入登录密码",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],nickname:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],phone:[{required:!1,message:"请输入email",trigger:"blur"}],email:[{required:!1,message:"请输入email",trigger:"blur"}]},listQuery:{page:1,limit:5,userNmae:void 0,nickName:void 0,phone:void 0,email:void 0},avatarloading:!1,backImgloading:!1,total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(r["getList"])(this.listQuery).then(e=>{this.list=e.data.dataCurrentPage,this.listLoading=!1,this.total=e.data.totalCount})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.userNmae="",this.listQuery.nickName="",this.listQuery.page=1,this.listQuery.phone="",this.listQuery.email="",this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={username:"",password:"",nickname:"",phone:"",email:"",avatar:"",backImg:"",signature:"",enable:!0}},add(){this.resetForm(),this.formTitle="添加用户",this.formVisible=!0},changeUserStatus(e,t){var s={userId:e,enable:t};Object(r["changeStatus"])(s).then(()=>{this.$notify({title:"成功",message:"修改成功",type:"success"}),this.fetchData()}).catch(()=>{this.fetchData()})},saveUser(){var e=this;this.$refs["form"].validate(t=>{if(!t)return!1;var s=e.form,i=[];for(const e of this.roleSet)"SUPER_ADMIN"==e?i.push({roleId:1}):"SYSTEM_ADMIN"==e?i.push({roleId:2}):"VIP"==e?i.push({roleId:3}):i.push({roleId:4});s.roleSet=i,console.log(s),Object(r["saveUser"])(s).then(e=>{this.$message({message:"提交成功",type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},editItem(e){this.selRow=Object.assign({},e),this.edit()},edit(){if(this.checkSel()){let e=Object.assign({},this.selRow);e.password="";let t={id:e.id,username:e.username,password:"",nickname:e.nickname,phone:e.phone,email:e.email,signature:e.signature,avatar:e.avatar,backImg:e.backImg,roleSet:e.roleSet,enable:e.enable};this.form=t,this.formTitle="修改用户",this.formVisible=!0}},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(r["remove"])(e).then(e=>{this.$message({message:"删除成功",type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}},beforeImgUpload(e,t){"avatar"==t?this.avatarloading=!0:this.backImgloading=!0;const s="image/jpeg"===e.type||"image/gif"===e.type||"image/png"===e.type,i=e.size/1024/1024/1024/1024<4;return s||this.$message.error("上传头像图片只能是 JPG 格式!"),i||this.$message.error("上传头像图片大小不能超过 4MB!"),s&&i},handleAvatarSuccess(e){0==e.code?(this.form.avatar=e.data,this.$notify({title:"成功",message:"头像上传成功",type:"success"}),this.avatarloading=!1):(this.$message({message:e.message,type:"error"}),this.avatarloading=!1)},handleBackImgSuccess(e){0==e.code?(this.form.backImg=e.data,this.$notify({title:"成功",message:"头像上传成功",type:"success"}),this.backImgloading=!1):(this.$message({message:e.message,type:"error"}),this.backImgloading=!1)},resetPwd(){if(this.checkSel()){var e=this.selRow.id;this.$confirm("将密码重置为maiqu?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(r["resetPassword"])(e).then(e=>{this.$message({message:"重置密码成功",type:"success"})}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}},openRoleItem(e){this.selRow=e,this.openRole()},openRole(){this.checkSel()&&(this.roleDialog.visible=!0)},setRole(){var e=this.$refs.roleTree.getCheckedKeys(),t="";for(var s in e)t+=e[s]+",";var i={userId:this.selRow.id,roleIds:t.slice(0,-1)};Object(r["setRole"])(i).then(e=>{this.roleDialog.visible=!1,this.fetchData(),this.$message({message:"提交成功",type:"success"})})}},computed:{token(){return{Authorization:Object(n["getToken"])()}}}},c=l,u=(s("9a69"),s("2877")),d=Object(u["a"])(c,i,a,!1,null,null,null);t["default"]=d.exports},"574f":function(e,t,s){},5780:function(e,t,s){"use strict";s.r(t);var i=s("b775");t["default"]={getList:function(e){return Object(i["default"])({url:"/workflow/process/definition/list",method:"get",params:e})},getAll:function(){return Object(i["default"])({url:"/workflow/process/definition/queryAll",method:"get"})},add:function(e){return Object(i["default"])({url:"/workflow/process/definition",method:"post",params:e})},update:function(e){return Object(i["default"])({url:"/workflow/process/definition",method:"PUT",params:e})},remove:function(e){return Object(i["default"])({url:"/workflow/process/definition",method:"delete",params:{id:e}})}}},"5a12":function(e,t,s){"use strict";s.r(t);var i=s("4761"),a=s("4381");t["default"]={name:"channel",directives:{permission:a["default"]},data(){return{formVisible:!1,formTitle:"添加栏目",deptList:[],isAdd:!0,form:{id:"",name:"",code:""},total:0,list:null,listLoading:!0,selRow:{}}},computed:{rules(){return{cfgName:[{required:!0,message:"名称不能为空",trigger:"blur"}],cfgValue:[{required:!0,message:"编码不能为空",trigger:"blur"}]}}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(i["getList"])().then(e=>{this.list=e.data,this.listLoading=!1})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.page=1,this.fetchData()},handleFilter(){this.getList()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={id:"",name:"",code:""}},add(){this.resetForm(),this.formTitle="添加栏目",this.formVisible=!0,this.isAdd=!0},save(){this.$refs["form"].validate(e=>{if(!e)return!1;Object(i["save"])({id:this.form.id,name:this.form.name,code:this.form.code}).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},editItem(e){this.selRow=e,this.edit()},edit(){this.checkSel()&&(this.isAdd=!1,this.form=this.selRow,this.formTitle="编辑栏目",this.formVisible=!0)},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm(this.$t("common.deleteConfirm"),this.$t("common.tooltip"),{confirmButtonText:this.$t("button.submit"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then(()=>{Object(i["remove"])(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData()})}).catch(()=>{})}}}}},"5acc":function(e,t,s){},"5aee":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"icon-body"},[s("el-input",{staticStyle:{position:"relative"},attrs:{clearable:"",placeholder:"请输入图标名称"},on:{clear:e.filterIcons},nativeOn:{input:function(t){return e.filterIcons(t)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[s("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]),e._v(" "),s("div",{staticClass:"icon-list"},e._l(e.iconList,(function(t,i){return s("div",{key:i,on:{click:function(s){return e.selectedIcon(t)}}},[s("svg-icon",{staticStyle:{height:"30px",width:"16px"},attrs:{"icon-class":t}}),e._v(" "),s("span",[e._v(e._s(t))])],1)})),0)],1)},a=[],r=s("fd5f"),n={name:"IconSelect",data(){return{name:"",iconList:r["default"]}},methods:{filterIcons(){this.name?this.iconList=this.iconList.filter(e=>e.includes(this.name)):this.iconList=r["default"]},selectedIcon(e){this.$emit("selected",e),document.body.click()},reset(){this.name="",this.iconList=r["default"]}}},o=n,l=(s("aa5a"),s("2877")),c=Object(l["a"])(o,i,a,!1,null,"29eae0d6",null);t["default"]=c.exports},"5b9a":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[s("el-table-column",{attrs:{label:"申请人"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.userName)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"申请时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.createTime)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.title)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.descript)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.formatState(t.row.state))+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/workflow/request/task"],expression:"['/workflow/request/task']"}],attrs:{type:"text",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(s){return e.editItem(t.row)}}},[e._v(e._s(e.$t("button.audit")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/workflow/request/delete"],expression:"['/workflow/request/delete']"}],attrs:{type:"text",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(s){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("button.delete")))])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100,500],"page-size":e.listQuery.limit,total:e.total},on:{"size-change":e.changeSize,"current-change":e.fetchPage,"prev-click":e.fetchPrev,"next-click":e.fetchNext}}),e._v(" "),s("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,width:"70%"},on:{"update:visible":function(t){e.formVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"标题"}},[s("div",[e._v(e._s(e.form.title))])])],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"申请时间"}},[s("div",[e._v(e._s(e.form.createTime))])])],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"申请人"}},[s("div",[e._v(e._s(e.form.userName))])])],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"申请备注"}},[s("div",[e._v(e._s(e.form.descript))])])],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.pass}},[e._v(e._s(e.$t("button.pass")))]),e._v(" "),s("el-button",{nativeOn:{click:function(t){return e.reject(t)}}},[e._v(e._s(e.$t("button.reject")))])],1)],1)],1)],1)},a=[],r=(s("ac6a"),s("e0e0")),n=s("7754"),o=(s("5780"),s("4381")),l={name:"workFlowTask",directives:{permission:o["default"]},data(){return{activeName:"first",formVisible:!1,formTitle:"发起新流程",isAdd:!0,form:{title:"",processDefId:"",instanceId:"",descript:"",state:"",id:""},listQuery:{page:1,limit:20,id:void 0},processDefinitionList:[],dictStateList:[],total:0,list:null,listLoading:!0,selRow:{},taskResult:{list:[]}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},computed:{rules(){return{}}},created(){this.init()},methods:{init(){this.fetchData(),n["default"].getDicts("工作流实例状态").then(e=>{this.dictStateList=e.data})},fetchData(){this.listLoading=!0,r["default"].getTasks(this.listQuery).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.fetchData()},reset(){this.listQuery.id="",this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},formatState(e){let t="";return this.dictStateList.forEach((function(s){e+""==s.num&&(t=s.name)})),t},resetForm(){this.form={title:"",processDefId:"",instanceId:"",descript:"",state:"",id:""}},add(){this.formTitle="发起新流程",this.formVisible=!0,this.isAdd=!0,void 0!==this.$refs["form"]&&this.$refs["form"].resetFields()},pass(){this.form.state=1,console.log("form",this.form),r["default"].completeTask(this.form).then(e=>{this.fetchData(),this.formVisible=!1})},reject(){this.form.state=2,console.log("form",this.form),r["default"].completeTask(this.form).then(e=>{this.fetchData(),this.formVisible=!1})},save(){this.$refs["form"].validate(e=>{if(!e)return!1;{const e={id:this.form.id,title:this.form.title,processDefId:this.form.processDefId,instanceId:this.form.instanceId,descript:this.form.descript,state:this.form.state};e.id?r["default"].update(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1}):r["default"].add(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1})}})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},editItem(e){this.selRow=e,this.edit()},edit(){if(this.checkSel()){this.isAdd=!1;let e=Object.assign({},this.selRow);this.form=e,this.formTitle="编辑流程实例",this.formVisible=!0,void 0!==this.$refs["form"]&&this.$refs["form"].resetFields()}},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm(this.$t("common.deleteConfirm"),this.$t("common.tooltip"),{confirmButtonText:this.$t("button.submit"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then(()=>{r["default"].remove(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}}}},c=l,u=(s("c311"),s("2877")),d=Object(u["a"])(c,i,a,!1,null,"1545ee37",null);t["default"]=d.exports},"5cfa":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/dept/add"],expression:"['/dept/add']"}],attrs:{type:"success",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return e.add(t)}}},[e._v(e._s(e.$t("button.add")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/dept/delete"],expression:"['/dept/delete']"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(t){return e.remove(t)}}},[e._v(e._s(e.$t("button.edit")))])],1),e._v(" "),s("tree-table",{attrs:{data:e.data,expandAll:e.expandAll,"highlight-current-row":"",border:""}},[s("el-table-column",{attrs:{label:"简称"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text"},on:{click:function(s){return e.editItem(t.row)}}},[e._v(e._s(t.row.simplename))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"全称"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.fullname))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"顺序"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.num))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/dept/update"],expression:"['/dept/update']"}],attrs:{type:"text",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(s){return e.editItem(t.row)}}},[e._v(e._s(e.$t("button.edit")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/dept/delete"],expression:"['/dept/delete']"}],attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(s){return e.removeItem(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),s("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,width:"70%"},on:{"update:visible":function(t){e.formVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"名称",prop:"simplename"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.simplename,callback:function(t){e.$set(e.form,"simplename",t)},expression:"form.simplename"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"全称",prop:"fullname"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.fullname,callback:function(t){e.$set(e.form,"fullname",t)},expression:"form.fullname"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"排序",prop:"num"}},[s("el-input",{attrs:{type:"number"},model:{value:e.form.num,callback:function(t){e.$set(e.form,"num",t)},expression:"form.num"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"父部门"}},[s("treeselect",{attrs:{options:e.deptTree.data,placeholder:"请选择所属部门"},model:{value:e.form.pid,callback:function(t){e.$set(e.form,"pid",t)},expression:"form.pid"}})],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("button.submit")))]),e._v(" "),s("el-button",{nativeOn:{click:function(t){e.formVisible=!1}}},[e._v(e._s(e.$t("button.cancel")))])],1)],1)],1)],1)},a=[],r=s("8ad4"),n=s("fcb7"),o=s("4381"),l={directives:{permission:o["default"]},name:"dept",components:{treeTable:r["default"]},data(){return{expandAll:!0,data:[],formVisible:!1,formTitle:"",isAdd:!1,deptTree:{data:[]},form:{id:"",simplename:"",fullname:"",pid:void 0,num:""},rules:{simplename:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],fullname:[{required:!0,message:"请输入编码",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],num:[{required:!0,message:"请输入排序",trigger:"blur"}]}}},created(){this.fetchData()},methods:{fetchData(){this.listLoading=!0,Object(n["list"])().then(e=>{this.data=e.data,this.deptTree.data=e.data,this.listLoading=!1})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},add(){this.form={},this.formTitle="添加菜单",this.formVisible=!0,this.isAdd=!0},save(){var e=this;this.$refs["form"].validate(t=>{if(!t)return!1;{console.log("form",e.form);const t={id:e.form.id,simplename:e.form.simplename,fullname:e.form.fullname,num:e.form.num,pid:e.form.pid,parent:null};Object(n["save"])(t).then(t=>{console.log(t),this.$message({message:"提交成功",type:"success"}),e.fetchData(),e.formVisible=!1})}})},editItem(e){this.selRow=Object.assign({},e),"0"==this.selRow.pid&&(this.selRow.pid=void 0),this.edit()},edit(){this.checkSel()&&(this.isAdd=!1,this.form=Object.assign({},this.selRow),this.form.statusBool="启用"===this.form.statusName,this.form.password="",this.formTitle="修改用户",this.formVisible=!0)},removeItem(e){this.selRow=e,this.remove()},remove(){this.checkSel()&&this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=this.selRow;Object(n["del"])(e.id).then(e=>{this.$message({message:"删除成功",type:"success"}),this.fetchData()})})}}},c=l,u=(s("1552"),s("2877")),d=Object(u["a"])(c,i,a,!1,null,"733db6a2",null);t["default"]=d.exports},"5e2d":function(e,t,s){},"5eba":function(e,t,s){"use strict";s.r(t);var i=s("5248"),a=s("fa7d"),r=s("4381");t["default"]={name:"article",directives:{permission:r["default"]},data(){return{formVisible:!1,formTitle:"添加文章",deptList:[],isAdd:!0,form:{id:"",title:"",author:"",img:""},listQuery:{page:1,limit:20,title:void 0,author:void 0,startDate:void 0,endDate:void 0},rangeDate:void 0,total:0,list:null,listLoading:!0,selRow:{},pickerOptions:{shortcuts:[{text:"最近一周",onClick(e){const t=new Date,s=new Date;s.setTime(s.getTime()-6048e5),e.$emit("pick",[s,t])}},{text:"最近一个月",onClick(e){const t=new Date,s=new Date;s.setTime(s.getTime()-2592e6),e.$emit("pick",[s,t])}},{text:"最近三个月",onClick(e){const t=new Date,s=new Date;s.setTime(s.getTime()-7776e6),e.$emit("pick",[s,t])}}]}}},computed:{rules(){return{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],author:[{required:!0,message:"作者不能为空",trigger:"blur"}]}}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0;let e=this.listQuery;this.rangeDate&&(e["startDate"]=this.rangeDate[0],e["endDate"]=this.rangeDate[1]),Object(i["getList"])(e).then(e=>{for(var t in this.list=e.data.records,this.list){const e=this.list[t];e.img=Object(a["getApiUrl"])()+"/file/getImgStream?idFile="+e.img}this.listLoading=!1,this.total=e.data.total})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.title=void 0,this.listQuery.author=void 0,this.listQuery.startDate=void 0,this.listQuery.endDate=void 0,this.rangeDate="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},add(){this.$router.push({path:"/cms/articleEdit"})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},editItem(e){this.selRow=e,this.edit()},edit(){this.checkSel()&&this.$router.push({path:"/cms/articleEdit",query:{id:this.selRow.id}})},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm(this.$t("common.deleteConfirm"),this.$t("common.tooltip"),{confirmButtonText:this.$t("button.submit"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then(()=>{Object(i["remove"])(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData()})}).catch(()=>{})}}}}},"5ebb":function(e,t,s){},"5f22":function(e,t,s){"use strict";s.r(t),s.d(t,"getList",(function(){return a})),s.d(t,"saveUser",(function(){return r})),s.d(t,"remove",(function(){return n})),s.d(t,"setRole",(function(){return o})),s.d(t,"changeStatus",(function(){return l})),s.d(t,"resetPassword",(function(){return c}));var i=s("b775");function a(e){return Object(i["default"])({url:"/coupon/queryPage",method:"get",params:e})}function r(e){return Object(i["default"])({url:"/user",method:"post",params:e})}function n(e){return Object(i["default"])({url:"/user",method:"delete",params:{userId:e}})}function o(e){return Object(i["default"])({url:"/user/setRole",method:"post",params:e})}function l(e){return Object(i["default"])({url:"/user/changeStatus",method:"get",params:{userId:e}})}function c(e){return Object(i["default"])({url:"/user/resetPassword",method:"post",params:{userId:e}})}},"5f70":function(e,t,s){"use strict";s("3395")},"5fb0":function(e,t,s){},6133:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入任务名"},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}})],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-search"},nativeOn:{click:function(t){return e.search(t)}}},[e._v(e._s(e.$t("button.search")))]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(e._s(e.$t("button.reset")))])],1)],1),e._v(" "),s("br"),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/task/add"],expression:"['/task/add']"}],attrs:{type:"success",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return e.add(t)}}},[e._v(e._s(e.$t("button.add")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/task/update"],expression:"['/task/update']"}],attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(t){return e.edit(t)}}},[e._v(e._s(e.$t("button.edit")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/task/delete"],expression:"['/task/delete']"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(t){return e.remove(t)}}},[e._v(e._s(e.$t("button.delete")))])],1)],1)],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[s("el-table-column",{attrs:{label:"任务名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.name)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"执行类",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.jobClass)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"定时规则"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.cron)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"说明"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.note)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"最近执行时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.execAt)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"最近执行结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.execResult)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"280",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/task/update"],expression:"['/task/update']"}],attrs:{type:"text",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(s){return e.editItem(t.row)}}},[e._v(e._s(e.$t("button.edit")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/task/delete"],expression:"['/task/delete']"}],attrs:{type:"text",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(s){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("button.delete")))]),e._v(" "),s("el-button",{attrs:{type:"text",icon:"el-icon-tickets",size:"mini"},nativeOn:{click:function(s){return e.viewLog(t.row.id)}}},[e._v("查看日志")]),e._v(" "),!0===t.row.disabled?s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/task/update"],expression:"['/task/update']"}],staticStyle:{color:"gray"},attrs:{type:"text",icon:"el-icon-turn-off",size:"mini"},nativeOn:{click:function(s){return e.enable(t.row.id)}}},[e._v("启用")]):e._e(),e._v(" "),!1===t.row.disabled?s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/task/update"],expression:"['/task/update']"}],staticStyle:{color:"green"},attrs:{type:"text",icon:"el-icon-open",size:"mini"},nativeOn:{click:function(s){return e.disable(t.row.id)}}},[e._v("禁用")]):e._e()]}}])})],1),e._v(" "),s("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,width:"70%"},on:{"update:visible":function(t){e.formVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"任务名",prop:"name"}},[s("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"定时规则",prop:"cron"}},[s("el-input",{model:{value:e.form.cron,callback:function(t){e.$set(e.form,"cron",t)},expression:"form.cron"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"执行类",prop:"jobClass"}},[s("el-input",{attrs:{type:"textarea"},model:{value:e.form.jobClass,callback:function(t){e.$set(e.form,"jobClass",t)},expression:"form.jobClass"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"任务说明",prop:"cfgDesc"}},[s("el-input",{attrs:{type:"textarea"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"执行参数"}},[s("el-input",{attrs:{type:"textarea"},model:{value:e.form.data,callback:function(t){e.$set(e.form,"data",t)},expression:"form.data"}})],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("button.submit")))]),e._v(" "),s("el-button",{nativeOn:{click:function(t){e.formVisible=!1}}},[e._v(e._s(e.$t("button.cancel")))])],1)],1)],1)],1)},a=[],r=s("94ab"),n=s("4381"),o={name:"task",directives:{permission:n["default"]},data(){return{formVisible:!1,formTitle:"添加任务",deptList:[],isAdd:!0,form:{id:"",name:"",jobClass:"",cron:"",note:"",disabled:!0,data:""},rules:{name:[{required:!0,message:"请输入任务名",trigger:"blur"},{min:2,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],jobClass:[{required:!0,message:"请输入执行类",trigger:"blur"}],cron:[{required:!0,message:"请输入定时规则",trigger:"blur"}]},listQuery:{name:void 0},total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(r["getList"])(this.listQuery).then(e=>{this.list=e.data,this.listLoading=!1})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.name="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={}},add(){this.resetForm(),this.formTitle="添加任务",this.formVisible=!0,this.isAdd=!0},save(){var e=this;this.$refs["form"].validate(t=>{if(!t)return!1;Object(r["save"])({id:e.form.id,name:e.form.name,jobClass:e.form.jobClass,cron:e.form.cron,data:e.form.data,note:e.form.note}).then(e=>{console.log(e),this.$message({message:"提交成功",type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},enable(e){this.$confirm("确定启用该定时任务?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(r["enable"])(e).then(e=>{this.$message({message:"操作成功",type:"success"}),this.fetchData()})}).catch(()=>{})},disable(e){this.$confirm("确定禁用该定时任务?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(r["disable"])(e).then(e=>{this.$message({message:"操作成功",type:"success"}),this.fetchData()})}).catch(()=>{})},viewLog(e){this.$router.push({path:"/taskLog",query:{taskId:e}})},editItem(e){this.selRow=Object.assign({},e),this.edit()},edit(){this.checkSel()&&(this.isAdd=!1,this.form=this.selRow,this.formTitle="修改任务",this.formVisible=!0)},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(r["remove"])(e).then(e=>{this.$message({message:"操作成功",type:"success"}),this.fetchData()})}).catch(()=>{})}}}},l=o,c=(s("318b"),s("2877")),u=Object(c["a"])(l,i,a,!1,null,"37cef7db",null);t["default"]=u.exports},"62a04":function(e,t,s){},"665b":function(e,t,s){},6954:function(e,t,s){},"6a94":function(e,t,s){"use strict";s("5ebb")},"70eb":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入角色名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.roleName,callback:function(t){e.$set(e.listQuery,"roleName",t)},expression:"listQuery.roleName"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-search"},nativeOn:{click:function(t){return e.search(t)}}},[e._v(e._s(e.$t("button.search")))]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(e._s(e.$t("button.reset")))])],1)],1),e._v(" "),s("br"),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return e.add(t)}}},[e._v("\n          "+e._s(e.$t("button.add"))+"\n        ")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(t){return e.edit(t)}}},[e._v("\n          "+e._s(e.$t("button.edit"))+"\n        ")]),e._v(" "),s("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(t){return e.remove(t)}}},[e._v("\n          "+e._s(e.$t("button.delete"))+"\n        ")]),e._v(" "),s("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-s-operation"},nativeOn:{click:function(t){return e.openPower(t)}}},[e._v("\n          "+e._s(e.$t("button.powerAllocate"))+"\n        ")])],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,size:"mini","element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[s("el-table-column",{attrs:{label:"角色名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("\n              "+e._s(t.row.roleName)+"\n            ")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"角色描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v("\n              "+e._s(t.row.description)+"\n            ")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作","min-width":"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(s){return e.editItem(t.row)}}},[e._v("\n              "+e._s(e.$t("button.edit"))+"\n            ")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(s){return e.removeItem(t.row)}}},[e._v("\n              "+e._s(e.$t("button.delete"))+"\n            ")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-s-operation"},nativeOn:{click:function(s){return e.openPowerItem(t.row)}}},[e._v(e._s(e.$t("button.powerAllocate")))])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[5,10,20,50,100,500],"page-size":e.listQuery.limit,total:e.total,"current-page":e.listQuery.page},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"page",t)},"update:current-page":function(t){return e.$set(e.listQuery,"page",t)},"size-change":e.changeSize,"current-change":e.fetchPage,"prev-click":e.fetchPrev,"next-click":e.fetchNext}})],1)],1),e._v(" "),s("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,width:"70%"},on:{"update:visible":function(t){e.formVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px","label-position":"right"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.saveRole}},[e._v(e._s(e.$t("button.submit")))]),e._v(" "),s("el-button",{nativeOn:{click:function(t){e.formVisible=!1}}},[e._v(e._s(e.$t("button.cancel")))])],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"权限分配",visible:e.powerDialog.visible,width:"45%"},on:{"update:visible":function(t){return e.$set(e.powerDialog,"visible",t)}}},[s("el-form",[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-tree",{ref:"powerTree",attrs:{data:e.powerDialog.powers,"show-checkbox":"","node-key":"powerId","default-checked-keys":e.powerDialog.checkedPowerKeys,props:e.powerDialog.defaultProps}})],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.setPower}},[e._v(e._s(e.$t("button.submit")))])],1)],1)],1)],1)},a=[],r=s("3528"),n={name:"role",data(){return{powerDialog:{visible:!1,powers:[],checkedPowerKeys:[1],defaultProps:{id:"powerId",label:"powerLabel"}},statusList:[{label:"启用",value:"1"},{label:"冻结",value:"2"}],formVisible:!1,formTitle:"添加角色",form:{roleName:"",description:"",enable:!0},rules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],description:[{required:!0,message:"请输入角色描述",trigger:"blur"}]},listQuery:{page:1,limit:5,roleName:void 0,description:void 0},total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(r["getList"])(this.listQuery).then(e=>{this.list=e.data.dataCurrentPage,this.listLoading=!1,this.total=e.data.totalCount})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.roleNmae="",this.listQuery.description="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={roleName:"",description:"",enable:!0}},add(){this.resetForm(),this.formTitle="添加角色",this.formVisible=!0},changeRoleStatus(e,t){var s={roleId:e,enable:t};Object(r["changeStatus"])(s).then(()=>{this.$notify({title:"成功",message:"修改成功",type:"success"}),this.fetchData()}).catch(()=>{this.fetchData()})},saveRole(){var e=this;this.$refs["form"].validate(t=>{if(!t)return!1;var s=e.form;Object(r["saveRole"])(s).then(e=>{this.$message({message:"提交成功",type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.roleId)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},editItem(e){this.selRow=Object.assign({},e),this.edit()},edit(){if(this.checkSel()){let e=Object.assign({},this.selRow),t={roleId:e.roleId,roleName:e.roleName,description:e.description,enable:e.enable};this.form=t,console.log(this.form),this.formTitle="修改角色",this.formVisible=!0}},openPowerItem(e){this.selRow=e,this.openPower()},openPower(){if(this.checkSel()){this.powerDialog.checkedPowerKeys=[],getPowerList().then(e=>{const t=e.data.data;for(const s of t)s.powerLabel=`${s.powerName} ${s.powerUrl}`;this.powerDialog.powers=t}),this.powerDialog.visible=!0;let e=Object.assign({},this.selRow);getPowerListByRole(e.roleId).then(e=>{const t=e.data.data;this.powerDialog.checkedPowerKeys=t})}},setPower(){var e=this.$refs.powerTree.getCheckedKeys(),t="";for(var s in e)t+=e[s]+",";var i={roleId:this.selRow.roleId,powerIds:t.slice(0,-1)};setPower(i).then(e=>{this.powerDialog.visible=!1,this.fetchData(),this.$message({message:"提交成功",type:"success"})})},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.roleId;this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(r["remove"])(e).then(e=>{this.$message({message:"删除成功",type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}}}},o=n,l=s("2877"),c=Object(l["a"])(o,i,a,!1,null,null,null);t["default"]=c.exports},"719d":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入模板编号"},model:{value:e.listQuery.tplCode,callback:function(t){e.$set(e.listQuery,"tplCode",t)},expression:"listQuery.tplCode"}})],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-date-picker",{attrs:{size:"mini",type:"datetimerange","range-separator":"至","start-placeholder":"发送起始日期","end-placeholder":"发送截至日期","value-format":"yyyyMMddHHmmss",align:"right"},model:{value:e.rangeDate,callback:function(t){e.rangeDate=t},expression:"rangeDate"}})],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-search"},nativeOn:{click:function(t){return e.search(t)}}},[e._v(e._s(e.$t("button.search")))]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(e._s(e.$t("button.reset")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/message/clear"],expression:"['/message/clear']"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(t){return e.clear(t)}}},[e._v(e._s(e.$t("button.clear")))])],1)],1)],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[s("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-form",{staticClass:"flash-table-expand",attrs:{"label-position":"left",inline:""}},[s("el-form-item",{attrs:{label:"模板编码"}},[s("span",[e._v(e._s(t.row.tplCode))])]),e._v(" "),s("el-form-item",{attrs:{label:"消息内容"}},[s("span",[e._v(e._s(t.row.content))])]),e._v(" "),s("el-form-item",{attrs:{label:"接收者"}},[s("span",[e._v(e._s(t.row.receiver))])]),e._v(" "),s("el-form-item",{attrs:{label:"发送日期"}},[s("span",[e._v(e._s(t.row.createTime))])]),e._v(" "),s("el-form-item",{attrs:{label:"消息类型"}},[s("span",[e._v(e._s(0==t.row.type?"短信":"邮件"))])]),e._v(" "),s("el-form-item",{attrs:{label:"发送结果"}},[s("span",[e._v(e._s(1==t.row.state?"成功":"失败"))])])],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"模板编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.tplCode)+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"接收者"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.receiver)+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"发送日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.createTime)+"\n        ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"消息类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(0==t.row.type?"短信":"邮件")+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(1==t.row.state?"成功":"失败")+"\n          ")]}}])})],1),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100,500],"page-size":e.listQuery.limit,total:e.total,"current-page":e.listQuery.page},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"page",t)},"update:current-page":function(t){return e.$set(e.listQuery,"page",t)},"size-change":e.changeSize,"current-change":e.fetchPage,"prev-click":e.fetchPrev,"next-click":e.fetchNext}})],1)},a=[],r=s("5646"),n=s("4381"),o={name:"msg",directives:{permission:n["default"]},data(){return{formVisible:!1,formTitle:"添加历史消息",isAdd:!0,form:{tplCode:"",content:"",receiver:"",type:"",id:""},listQuery:{page:1,limit:20,id:void 0,tplCode:void 0},rangeDate:void 0,total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.$route.query.type;this.fetchData()},fetchData(){this.listLoading=!0;let e=this.listQuery;this.rangeDate&&(e["startDate"]=this.rangeDate[0],e["endDate"]=this.rangeDate[1]),Object(r["getList"])(e).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.startDate=void 0,this.listQuery.endDate=void 0,this.rangeDate="",this.tplCode="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},clear(){this.$confirm("确认清楚所有历史消息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(r["clear"])().then(e=>{this.fetchData(),this.$message({type:"success",message:"清楚成功!"})})})}}},l=o,c=(s("8650"),s("2877")),u=Object(c["a"])(l,i,a,!1,null,"044979fe",null);t["default"]=u.exports},"72c3":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"user"},[s("strong",[e._v(e._s(e.user.name))]),s("br"),e._v(" "),s("small",[e._v(e._s(e.user.dept)+"    "+e._s(e.user.roles))])]),e._v(" "),s("el-row",{staticClass:"user-content"},[s("el-col",{staticClass:"profile",attrs:{span:6}},[s("img",{staticClass:"user-avatar",attrs:{src:e.user.avatar}}),s("br"),e._v(" "),s("p",[s("span",{staticClass:"title"},[s("i",{staticClass:"el-icon-phone"}),e._v("  "+e._s(e.user.phone))])]),e._v(" "),s("p",[s("span",{staticClass:"title"},[s("i",{staticClass:"el-icon-message"}),e._v("  "+e._s(e.user.email))])]),e._v(" "),s("p",[s("span",{staticClass:"title"},[s("i",{staticClass:"el-icon-open"}),e._v("  "+e._s("1"==e.user.status?"启用":"禁用"))])]),e._v(" "),s("p",[s("span",{staticClass:"title"},[s("i",{staticClass:"el-icon-location-outline"}),e._v("  上海市浦东大道290弄")])])]),e._v(" "),s("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:18}},[s("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"个人资料",name:"profile"}},[s("el-form",{attrs:{"label-width":"80px"}},[s("h4",[e._v("基本信息")]),e._v(" "),s("el-form-item",{attrs:{label:"名称"}},[s("span",[e._v(e._s(e.user.name))])]),e._v(" "),s("el-form-item",{attrs:{label:"性别"}},[s("span",[e._v(" "+e._s(e.user.sex="男"))])]),e._v(" "),s("el-form-item",{attrs:{label:"生日"}},[s("span",[e._v(" "+e._s(e.user.birthday))])]),e._v(" "),s("h4",[e._v("联系信息")]),e._v(" "),s("el-form-item",{attrs:{label:"手机"}},[s("span",[e._v(e._s(e.user.phone))])]),e._v(" "),s("el-form-item",{attrs:{label:"邮箱"}},[s("span",[e._v(" "+e._s(e.user.email))])]),e._v(" "),s("el-form-item",{attrs:{label:"地址"}},[s("span",[e._v(" 浦东大道290弄")])])],1)],1),e._v(" "),s("el-tab-pane",{attrs:{label:"最近活动",name:"timeline"}},[s("el-timeline",{staticStyle:{"margin-top":"15px","padding-left":"2px"},attrs:{reverse:e.reverse}},e._l(e.activities,(function(t,i){return s("el-timeline-item",{key:i,attrs:{timestamp:t.createTime}},[e._v("\n              "+e._s(t.logname)+"\n            ")])})),1)],1),e._v(" "),s("el-tab-pane",{attrs:{label:"修改密码",name:"updatePwd"}},[s("el-form",{ref:"form",attrs:{model:e.form,"label-position":"left","label-width":"80px"}},[s("el-row",[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"原密码"}},[s("el-input",{attrs:{type:"password"},model:{value:e.form.oldPassword,callback:function(t){e.$set(e.form,"oldPassword",t)},expression:"form.oldPassword"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"新密码",prop:"password"}},[s("el-input",{attrs:{type:"password",minlength:"5"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"重复密码"}},[s("el-input",{attrs:{type:"password"},model:{value:e.form.rePassword,callback:function(t){e.$set(e.form,"rePassword",t)},expression:"form.rePassword"}})],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.updatePwd}},[e._v(e._s(e.$t("button.submit")))])],1)],1)],1)],1)],1)],1)],1)},a=[],r=(s("a457"),s("c24f")),n={data(){return{activeName:"profile",user:{},reverse:!1,activities:[],form:{oldPassword:"",password:"",rePassword:""}}},mounted(){this.init()},methods:{init(){this.user=this.$store.state.user.profile},handleClick(e,t){},queryByUser(){},updatePwd(){this.$refs["form"].validate(e=>{if(!e)return!1;Object(r["updatePwd"])({oldPassword:this.form.oldPassword,password:this.form.password,rePassword:this.form.rePassword}).then(e=>{this.$message({message:"密码修改成功",type:"success"}),this.$store.dispatch("user/logout");const t=this;setTimeout((function(){t.$router.push("/login")}),1e3)}).catch(e=>{})})}}},o=n,l=(s("a0c2"),s("2877")),c=Object(l["a"])(o,i,a,!1,null,"e62c6708",null);t["default"]=c.exports},7403:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"rightPanel",staticClass:"rightPanel-container",class:{show:e.show}},[s("div",{staticClass:"rightPanel-background"}),e._v(" "),s("div",{staticClass:"rightPanel"},[s("div",{staticClass:"handle-button",style:{top:e.buttonTop+"px","background-color":e.theme},on:{click:function(t){e.show=!e.show}}},[s("i",{class:e.show?"el-icon-close":"el-icon-setting"})]),e._v(" "),s("div",{staticClass:"rightPanel-items"},[e._t("default")],2)])])},a=[],r=s("ed08"),n={name:"RightPanel",props:{clickNotClose:{default:!1,type:Boolean},buttonTop:{default:250,type:Number}},data(){return{show:!1}},computed:{theme(){return this.$store.state.settings.theme}},watch:{show(e){e&&!this.clickNotClose&&this.addEventClick(),e?Object(r["addClass"])(document.body,"showRightPanel"):Object(r["removeClass"])(document.body,"showRightPanel")}},mounted(){this.insertToBody()},beforeDestroy(){const e=this.$refs.rightPanel;e.remove()},methods:{addEventClick(){window.addEventListener("click",this.closeSidebar)},closeSidebar(e){const t=e.target.closest(".rightPanel");t||(this.show=!1,window.removeEventListener("click",this.closeSidebar))},insertToBody(){const e=this.$refs.rightPanel,t=document.querySelector("body");t.insertBefore(e,t.firstChild)}}},o=n,l=(s("fab5"),s("6a94"),s("2877")),c=Object(l["a"])(o,i,a,!1,null,"0c28de8c",null);t["default"]=c.exports},"74cd":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入名称"},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入发送类"},model:{value:e.listQuery.className,callback:function(t){e.$set(e.listQuery,"className",t)},expression:"listQuery.className"}})],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-search"},nativeOn:{click:function(t){return e.search(t)}}},[e._v(e._s(e.$t("button.search")))]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(e._s(e.$t("button.reset")))])],1)],1),e._v(" "),s("br"),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/sender/edit"],expression:"['/sender/edit']"}],attrs:{type:"success",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return e.add(t)}}},[e._v(e._s(e.$t("button.add")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/sender/edit"],expression:"['/sender/edit']"}],attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(t){return e.edit(t)}}},[e._v(e._s(e.$t("button.edit")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/sender/remove"],expression:"['/sender/remove']"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(t){return e.remove(t)}}},[e._v(e._s(e.$t("button.delete")))])],1)],1)],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[s("el-table-column",{attrs:{label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.name)+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"发送类"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.className)+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/sender/edit"],expression:"['/sender/edit']"}],attrs:{type:"text",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(s){return e.editItem(t.row)}}},[e._v(e._s(e.$t("button.edit")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/sender/remove"],expression:"['/sender/remove']"}],attrs:{type:"text",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(s){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("button.delete")))])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100,500],"page-size":e.listQuery.limit,total:e.total,"current-page":e.listQuery.page},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"page",t)},"update:current-page":function(t){return e.$set(e.listQuery,"page",t)},"size-change":e.changeSize,"current-change":e.fetchPage,"prev-click":e.fetchPrev,"next-click":e.fetchNext}}),e._v(" "),s("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,width:"70%"},on:{"update:visible":function(t){e.formVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"名称"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"发送类"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.className,callback:function(t){e.$set(e.form,"className",t)},expression:"form.className"}})],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("button.submit")))]),e._v(" "),s("el-button",{nativeOn:{click:function(t){e.formVisible=!1}}},[e._v(e._s(e.$t("button.cancel")))])],1)],1)],1)],1)},a=[],r=s("0e42"),n=s("4381"),o={name:"msgSender",directives:{permission:n["default"]},data(){return{formVisible:!1,formTitle:"添加消息发送者",isAdd:!0,form:{name:"",className:"",id:""},listQuery:{page:1,limit:20,name:void 0,className:void 0},total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(r["getList"])(this.listQuery).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.id="",this.listQuery.page=1,this.listQuery.name="",this.listQuery.className="",this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={name:"",className:"",id:""}},add(){this.resetForm(),this.formTitle="添加消息发送者",this.formVisible=!0,this.isAdd=!0},save(){this.$refs["form"].validate(e=>{if(!e)return!1;Object(r["save"])({name:this.form.name,className:this.form.className,id:this.form.id}).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},editItem(e){this.selRow=Object.assign({},e),this.edit()},edit(){this.checkSel()&&(this.isAdd=!1,this.form=this.selRow,this.formTitle="编辑消息发送者",this.formVisible=!0)},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm(this.$t("common.deleteConfirm"),this.$t("common.tooltip"),{confirmButtonText:this.$t("button.submit"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then(()=>{Object(r["remove"])(e).then(e=>{console.log(e),this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})})}}}},l=o,c=(s("4bb1"),s("2877")),u=Object(c["a"])(l,i,a,!1,null,"5d3a5999",null);t["default"]=u.exports},"763d":function(e,t,s){"use strict";s("0d4c")},"7b3ee":function(e,t,s){"use strict";s.r(t);var i=s("b775");t["default"]={getList:function(e){return Object(i["default"])({url:"/cfg/list",method:"get",params:e})},exportXls:function(e){return Object(i["default"])({url:"/cfg/export",method:"get",params:e})},add:function(e){return Object(i["default"])({url:"/cfg",method:"post",params:e})},update:function(e){return Object(i["default"])({url:"/cfg",method:"put",params:e})},remove:function(e){return Object(i["default"])({url:"/cfg",method:"delete",params:{id:e}})}}},"80b1":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:4}},[s("el-select",{attrs:{size:"mini",filterable:"",placeholder:"请选择发送器"},model:{value:e.listQuery.idMessageSender,callback:function(t){e.$set(e.listQuery,"idMessageSender",t)},expression:"listQuery.idMessageSender"}},e._l(e.sendList,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入标题"},model:{value:e.listQuery.title,callback:function(t){e.$set(e.listQuery,"title",t)},expression:"listQuery.title"}})],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-search"},nativeOn:{click:function(t){return e.search(t)}}},[e._v(e._s(e.$t("button.search")))]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(e._s(e.$t("button.reset")))])],1)],1),e._v(" "),s("br"),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/template/edit"],expression:"['/template/edit']"}],attrs:{type:"success",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return e.add(t)}}},[e._v(e._s(e.$t("button.add")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/template/edit"],expression:"['/template/edit']"}],attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(t){return e.edit(t)}}},[e._v(e._s(e.$t("button.edit")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/template/remove"],expression:"['/template/remove']"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(t){return e.remove(t)}}},[e._v(e._s(e.$t("button.delete")))])],1)],1)],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[s("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-form",{staticClass:"flash-table-expand",attrs:{"label-position":"left",inline:""}},[s("el-form-item",{attrs:{label:"编号"}},[s("span",[e._v(e._s(t.row.code))])]),e._v(" "),s("el-form-item",{attrs:{label:"标题"}},[s("span",[e._v(e._s(t.row.title))])]),e._v(" "),s("el-form-item",{attrs:{label:"发送器"}},[s("span",[e._v(e._s(t.row.messageSender.name))])]),e._v(" "),s("el-form-item",{attrs:{label:"内容"}},[s("span",[e._v(e._s(t.row.content))])]),e._v(" "),s("el-form-item",{attrs:{label:"消息类型"}},[s("span",[e._v(e._s(0==t.row.type?"短信":"邮件"))])]),e._v(" "),s("el-form-item",{attrs:{label:"远程模板编号"}},[s("span",[e._v(e._s(t.row.remoteTplCode))])])],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.code)+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.title)+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"消息类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(0==t.row.type?"短信":"邮件")+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"发送器"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.messageSender.name)+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/template/edit"],expression:"['/template/edit']"}],attrs:{type:"text",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(s){return e.editItem(t.row)}}},[e._v(e._s(e.$t("button.edit")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/template/remove"],expression:"['/template/remove']"}],attrs:{type:"text",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(s){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("button.delete")))])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100,500],"page-size":e.listQuery.limit,total:e.total,"current-page":e.listQuery.page},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"page",t)},"update:current-page":function(t){return e.$set(e.listQuery,"page",t)},"size-change":e.changeSize,"current-change":e.fetchPage,"prev-click":e.fetchPrev,"next-click":e.fetchNext}}),e._v(" "),s("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,width:"70%"},on:{"update:visible":function(t){e.formVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"编号"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"标题"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"消息类型"}},[s("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[s("el-radio",{attrs:{label:0}},[e._v("短信")]),e._v(" "),s("el-radio",{attrs:{label:1}},[e._v("邮件")])],1)],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"发送器"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.idMessageSender,callback:function(t){e.$set(e.form,"idMessageSender",t)},expression:"form.idMessageSender"}},e._l(e.sendList,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(" "),0==e.form.type?s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"远程模板编号"}},[s("el-input",{attrs:{placeholder:"请输入配置在短信服务商的短信模板编号"},model:{value:e.form.remoteTplCode,callback:function(t){e.$set(e.form,"remoteTplCode",t)},expression:"form.remoteTplCode"}})],1)],1):e._e(),e._v(" "),s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"内容"}},[s("el-input",{attrs:{type:"textarea",rows:4,minlength:"1"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("button.submit")))]),e._v(" "),s("el-button",{nativeOn:{click:function(t){e.formVisible=!1}}},[e._v(e._s(e.$t("button.cancel")))])],1)],1)],1)],1)},a=[],r=s("ded0"),n=s("0e42"),o=s("4381"),l={name:"msgTpl",directives:{permission:o["default"]},data(){return{formVisible:!1,formTitle:"添加消息模板",isAdd:!0,form:{code:"",title:"",content:"",type:"",idMessageSender:"",remoteTplCode:"",id:""},sendList:[],listQuery:{page:1,limit:20,id:"",idMessageSender:"",title:""},total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData(),Object(n["queryAll"])().then(e=>{this.sendList=e.data})},fetchData(){this.listLoading=!0,Object(r["getList"])(this.listQuery).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.id="",this.listQuery.idMessageSender="",this.listQuery.title="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={code:"",title:"",content:"",type:0,idMessageSender:"",remoteTplCode:"",id:""}},add(){this.resetForm(),this.formTitle="添加消息模板",this.formVisible=!0,this.isAdd=!0},save(){this.$refs["form"].validate(e=>{if(!e)return!1;Object(r["save"])({code:this.form.code,title:this.form.title,content:this.form.content,type:this.form.type,remoteTplCode:this.form.remoteTplCode,idMessageSender:this.form.idMessageSender,id:this.form.id}).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},editItem(e){this.selRow=Object.assign({},e),this.edit()},edit(){this.checkSel()&&(this.isAdd=!1,this.form=this.selRow,this.formTitle="编辑消息模板",this.formVisible=!0)},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm(this.$t("common.deleteConfirm"),this.$t("common.tooltip"),{confirmButtonText:this.$t("button.submit"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then(()=>{Object(r["remove"])(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData()})}).catch(()=>{})}}}},c=l,u=(s("9b6f"),s("2877")),d=Object(u["a"])(c,i,a,!1,null,"37fae2fa",null);t["default"]=d.exports},8256:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"upload-container"},[s("el-button",{style:{background:e.color,borderColor:e.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("上传图片\n  ")]),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":e.fileList,"show-file-list":!0,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-upload":e.beforeUpload,headers:e.uploadHeaders,action:e.fileUrl,"list-type":"picture-card"}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1),e._v(" "),s("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")])],1)],1)},a=[],r=(s("ac6a"),s("fa7d")),n=s("5f87"),o={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data(){return{dialogVisible:!1,listObj:{},fileList:[],fileUrl:"",uploadHeaders:{Authorization:""}}},created(){this.fileUrl=Object(r["getApiUrl"])()+"/file",this.uploadHeaders["Authorization"]=Object(n["getToken"])()},methods:{checkAllSuccess(){return Object.keys(this.listObj).every(e=>this.listObj[e].hasSuccess)},handleSubmit(){const e=Object.keys(this.listObj).map(e=>this.listObj[e]);this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！")},handleSuccess(e,t){const s=t.uid,i=Object.keys(this.listObj);for(let a=0,r=i.length;a<r;a++)if(this.listObj[i[a]].uid===s)return this.listObj[i[a]].url=this.fileUrl+"/download?idFile="+e.data.id,void(this.listObj[i[a]].hasSuccess=!0)},handleRemove(e){const t=e.uid,s=Object.keys(this.listObj);for(let i=0,a=s.length;i<a;i++)if(this.listObj[s[i]].uid===t)return void delete this.listObj[s[i]]},beforeUpload(e){const t=this,s=window.URL||window.webkitURL,i=e.uid;return this.listObj[i]={},new Promise((a,r)=>{const n=new Image;n.src=s.createObjectURL(e),n.onload=function(){t.listObj[i]={hasSuccess:!1,uid:e.uid,width:this.width,height:this.height}},a(!0)})}}},l=o,c=(s("10af"),s("2877")),u=Object(c["a"])(l,i,a,!1,null,"1836b0cb",null);t["default"]=u.exports},"85ad":function(e,t,s){"use strict";s.r(t);s("6b54");var i=s("61f7"),a=s("fa7d"),r=s("c24f"),n=s("1131");t["default"]={name:"login",components:{LangSelect:n["default"]},data(){const e=(e,t,s)=>{Object(i["isvalidUsername"])(t)?s():s(new Error(this.$t("login.errorAccount")))},t=(e,t,s)=>{t.length<3?s(new Error(this.$t("login.errorPassword"))):s()};return{qrcode:{activeName:"first",showAppdownload:!1,imgUrl:"",uuid:"",resultStatus:"",msg:"请使用smbms-uniapp 扫码登录"},loginForm:{username:"",password:""},loginRules:{username:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:t}]},loading:!1,pwdType:"password",redirect:"/"}},mounted(){this.init(),this.getQrcode()},methods:{init(){const e=this.$route.query.redirect;e&&(this.redirect=e)},changeLoginType(e){"second"===this.qrcode.activeName&&(this.getQrcode(),this.getQrcodeResult())},uuid(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},showAppdownload(){this.qrcode.showAppdownload=!0},hideAppdownload(){this.qrcode.showAppdownload=!1},getQrcode(){this.qrcode.uuid=this.uuid();const e=Object(a["getApiUrl"])()+"/account/qrcode/generate?uuid="+this.qrcode.uuid;console.log("getQrcode",e),this.qrcode.imgUrl=e},refreshQrcode(){this.getQrcode(),this.qrcode.resultStatus="",this.getQrcodeResult()},getQrcodeResult(){if("second"===this.qrcode.activeName){const e=this;this.sleep(1e3).then(()=>{Object(r["getQrcodeStatus"])({uuid:e.qrcode.uuid}).then(t=>{console.log("扫描结果",t),this.qrcode.resultStatus=t.data.status,"invalid"===t.data.status&&(this.qrcode.showAppdownload=!1,e.qrcode.msg="二维码已过期"),"success"===t.data.status&&(this.qrcode.showAppdownload=!1,this.qrcode.msg="扫描成功，自动登录中",this.loading=!0,this.$store.dispatch("user/autoLogin",{token:t.data.token}).then(()=>{this.loading=!1,this.$router.push({path:this.redirect})}).catch(e=>{this.qrcode.msg="登录失败",this.loading=!1})),"second"===e.qrcode.activeName&&"undo"===t.data.status&&e.getQrcodeResult()}).catch(e=>{console.log("err",e)})})}},sleep(e){return new Promise(t=>setTimeout(t,e))},showPwd(){"password"===this.pwdType?this.pwdType="":this.pwdType="password"},handleLogin(){this.$refs.loginForm.validate(e=>{if(!e)return!1;this.loading=!0,this.$store.dispatch("user/login",this.loginForm).then(()=>{this.loading=!1,this.$router.push({path:this.redirect})}).catch(e=>{this.loading=!1})})}}}},8650:function(e,t,s){"use strict";s("e28a")},"86a6":function(e,t,s){"use strict";s("e171")},8710:function(e,t,s){"use strict";s.r(t);var i=s("0e42"),a=s("4381");t["default"]={name:"msgSender",directives:{permission:a["default"]},data(){return{formVisible:!1,formTitle:"添加消息发送者",isAdd:!0,form:{name:"",className:"",id:""},listQuery:{page:1,limit:20,name:void 0,className:void 0},total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(i["getList"])(this.listQuery).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.id="",this.listQuery.page=1,this.listQuery.name="",this.listQuery.className="",this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={name:"",className:"",id:""}},add(){this.resetForm(),this.formTitle="添加消息发送者",this.formVisible=!0,this.isAdd=!0},save(){this.$refs["form"].validate(e=>{if(!e)return!1;Object(i["save"])({name:this.form.name,className:this.form.className,id:this.form.id}).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},editItem(e){this.selRow=Object.assign({},e),this.edit()},edit(){this.checkSel()&&(this.isAdd=!1,this.form=this.selRow,this.formTitle="编辑消息发送者",this.formVisible=!0)},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm(this.$t("common.deleteConfirm"),this.$t("common.tooltip"),{confirmButtonText:this.$t("button.submit"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then(()=>{Object(i["remove"])(e).then(e=>{console.log(e),this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})})}}}}},"8a9b":function(e,t,s){},"8ad4":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-table",e._b({attrs:{data:e.formatData,"row-style":e.showRow}},"el-table",e.$attrs,!1),[0===e.columns.length?s("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row._level,(function(e){return s("span",{key:e,staticClass:"ms-tree-space"})})),e._v(" "),e.iconShow(0,t.row)?s("span",{staticClass:"tree-ctrl",on:{click:function(s){return e.toggleExpanded(t.$index)}}},[t.row._expanded?s("i",{staticClass:"el-icon-arrow-down"}):s("i",{staticClass:"el-icon-arrow-right"})]):e._e()]}}],null,!1,3948369855)}):e._l(e.columns,(function(t,i){return s("el-table-column",{key:t.value,attrs:{label:t.text,width:t.width},scopedSlots:e._u([{key:"default",fn:function(a){return[e._l(a.row._level,(function(t){return 0===i?s("span",{key:t,staticClass:"ms-tree-space"}):e._e()})),e._v(" "),e.iconShow(i,a.row)?s("span",{staticClass:"tree-ctrl",on:{click:function(t){return e.toggleExpanded(a.$index)}}},[a.row._expanded?s("i",{staticClass:"el-icon-arrow-down"}):s("i",{staticClass:"el-icon-arrow-right"})]):e._e(),e._v("\n      "+e._s(a.row[t.value])+"\n    ")]}}],null,!0)})})),e._v(" "),e._t("default")],2)},a=[],r=s("0e1e"),n={name:"treeTable",props:{data:{type:[Array,Object],required:!0},columns:{type:Array,default:()=>[]},evalFunc:Function,evalArgs:Array,expandAll:{type:Boolean,default:!1}},computed:{formatData:function(){let e;e=Array.isArray(this.data)?this.data:[this.data];const t=this.evalFunc||r["default"],s=this.evalArgs?Array.concat([e,this.expandAll],this.evalArgs):[e,this.expandAll];return t.apply(null,s)}},methods:{showRow:function(e){const t=!e.row.parent||e.row.parent._expanded&&e.row.parent._show;return e.row._show=t,t?"animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;":"display:none;"},toggleExpanded:function(e){const t=this.formatData[e];t._expanded=!t._expanded},iconShow(e,t){return 0===e&&t.children&&t.children.length>0}}},o=n,l=(s("e9b3"),s("cecb"),s("2877")),c=Object(l["a"])(o,i,a,!1,null,"be2351c2",null);t["default"]=c.exports},"8b29":function(e,t,s){"use strict";s.r(t),s.d(t,"getList",(function(){return a}));var i=s("b775");function a(e){return Object(i["default"])({url:"/notice/list",method:"get",params:e})}},"8ba8":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",[s("el-col",{attrs:{span:24}},[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/workflow/request/add"],expression:"['/workflow/request/add']"}],attrs:{type:"success",size:"mini",icon:"el-icon-caret-right"},nativeOn:{click:function(t){return e.add(t)}}},[e._v(e._s(e.$t("workflow.startProcessInstance")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/workflow/request/update"],expression:"['/workflow/request/update']"}],attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(t){return e.edit(t)}}},[e._v(e._s(e.$t("button.edit")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/workflow/request/delete"],expression:"['/workflow/request/delete']"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(t){return e.remove(t)}}},[e._v(e._s(e.$t("button.delete")))])],1)],1)],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[s("el-table-column",{attrs:{label:"标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.title)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"工作流类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.processDefName)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"流程实例id"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.instanceId)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.descript)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.formatState(t.row.state))+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/workflow/request"],expression:"['/workflow/request']"}],attrs:{type:"text",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(s){return e.todo(t.row)}}},[e._v(e._s(e.$t("button.edit")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/workflow/request"],expression:"['/workflow/request']"}],attrs:{type:"text",size:"mini",icon:"el-icon-view"},nativeOn:{click:function(s){return e.todo(t.row)}}},[e._v("任务进度")]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/workflow/request"],expression:"['/workflow/request']"}],attrs:{type:"text",size:"mini",icon:"el-icon-view"},nativeOn:{click:function(s){return e.todo(t.row)}}},[e._v(e._s(e.$t("button.view")))])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100,500],"page-size":e.listQuery.limit,total:e.total},on:{"size-change":e.changeSize,"current-change":e.fetchPage,"prev-click":e.fetchPrev,"next-click":e.fetchNext}}),e._v(" "),s("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,width:"70%"},on:{"update:visible":function(t){e.formVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"标题"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"工作流类型"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.processDefId,callback:function(t){e.$set(e.form,"processDefId",t)},expression:"form.processDefId"}},e._l(e.processDefinitionList,(function(e){return s("el-option",{key:e.deploymentId,attrs:{label:e.name,value:e.deploymentId}})})),1)],1)],1),e._v(" "),s("el-col",{directives:[{name:"show",rawName:"v-show",value:e.form.instanceId,expression:"form.instanceId"}],attrs:{span:12}},[s("el-form-item",{attrs:{label:"流程实例id"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.instanceId,callback:function(t){e.$set(e.form,"instanceId",t)},expression:"form.instanceId"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"备注"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.descript,callback:function(t){e.$set(e.form,"descript",t)},expression:"form.descript"}})],1)],1),e._v(" "),s("el-col",{directives:[{name:"show",rawName:"v-show",value:e.form.state,expression:"form.state"}],attrs:{span:12}},[s("el-form-item",{attrs:{label:"状态"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}})],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("button.submit")))]),e._v(" "),s("el-button",{nativeOn:{click:function(t){e.formVisible=!1}}},[e._v(e._s(e.$t("button.cancel")))])],1)],1)],1)],1)},a=[],r=(s("ac6a"),s("e0e0")),n=s("7754"),o=s("5780"),l=s("4381"),c={name:"workFlowRequest",directives:{permission:l["default"]},data(){return{activeName:"first",formVisible:!1,formTitle:"发起新流程",isAdd:!0,form:{title:"",processDefId:"",instanceId:"",descript:"",state:"",id:""},listQuery:{page:1,limit:20,id:void 0},processDefinitionList:[],dictStateList:[],total:0,list:null,listLoading:!0,selRow:{},taskResult:{list:[]}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},computed:{rules(){return{}}},created(){this.init()},methods:{init(){this.fetchData(),o["default"].getAll().then(e=>{this.processDefinitionList=e.data}),n["default"].getDicts("工作流实例状态").then(e=>{this.dictStateList=e.data})},fetchData(){this.listLoading=!0,r["default"].getList(this.listQuery).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.fetchData()},reset(){this.listQuery.id="",this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},formatState(e){let t="";return this.dictStateList.forEach((function(s){e+""==s.num&&(t=s.name)})),t},resetForm(){this.form={title:"",processDefId:"",instanceId:"",descript:"",state:"",id:""}},add(){this.formTitle="发起新流程",this.formVisible=!0,this.isAdd=!0,void 0!==this.$refs["form"]&&this.$refs["form"].resetFields()},save(){this.$refs["form"].validate(e=>{if(!e)return!1;{const e={id:this.form.id,title:this.form.title,processDefId:this.form.processDefId,instanceId:this.form.instanceId,descript:this.form.descript,state:this.form.state};e.id?r["default"].update(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1,this.resetForm()}):r["default"].add(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1,this.resetForm()})}})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},editItem(e){this.selRow=e,this.edit()},todo(e){this.$message({message:this.$t("common.todo"),type:"info"})},edit(){if(this.checkSel()){this.isAdd=!1;let e=Object.assign({},this.selRow);this.form=e,this.formTitle="查看流程实例",this.formVisible=!0,void 0!==this.$refs["form"]&&this.$refs["form"].resetFields()}},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm(this.$t("common.deleteConfirm"),this.$t("common.tooltip"),{confirmButtonText:this.$t("button.submit"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then(()=>{r["default"].remove(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}}}},u=c,d=(s("dde6"),s("2877")),m=Object(d["a"])(u,i,a,!1,null,"6d11faac",null);t["default"]=m.exports},"8cdb":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wscn-http404-container"},[s("div",{staticClass:"wscn-http404"},[e._m(0),e._v(" "),s("div",{staticClass:"bullshit"},[s("div",{staticClass:"bullshit__oops"},[e._v("OOPS!")]),e._v(" "),e._m(1),e._v(" "),s("div",{staticClass:"bullshit__headline"},[e._v(e._s(e.message))]),e._v(" "),s("div",{staticClass:"bullshit__info"},[e._v("Please check that the URL you entered is correct, or click the button below to return to the homepage.")]),e._v(" "),s("a",{staticClass:"bullshit__return-home",attrs:{href:""}},[e._v("Back to home")])])])])},a=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pic-404"},[i("img",{staticClass:"pic-404__parent",attrs:{src:s("a36b"),alt:"404"}}),e._v(" "),i("img",{staticClass:"pic-404__child left",attrs:{src:s("26fc"),alt:"404"}}),e._v(" "),i("img",{staticClass:"pic-404__child mid",attrs:{src:s("26fc"),alt:"404"}}),e._v(" "),i("img",{staticClass:"pic-404__child right",attrs:{src:s("26fc"),alt:"404"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bullshit__info"},[e._v("All rights reserved\n        "),s("a",{staticStyle:{color:"#20a0ff"},attrs:{href:"https://wallstreetcn.com",target:"_blank"}},[e._v("wallstreetcn")])])}],r={name:"Page404",computed:{message(){return"The webmaster said that you can not enter this page..."}}},n=r,o=(s("97ef"),s("2877")),l=Object(o["a"])(n,i,a,!1,null,"c095f994",null);t["default"]=l.exports},"8efb":function(e,t,s){e.exports=s.p+"static/img/avatar.ecba1844.gif"},"92a6":function(e,t,s){},"936d":function(e,t,s){},9406:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dashboard-container",attrs:{id:"dashboard"}},[s("div",{staticClass:"dashboard-text"},[e._v("欢迎光临:"+e._s(e.name)+" ")]),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:6}},[s("el-card",{staticClass:"box-card"},[s("el-col",{attrs:{span:12}},[s("svg-icon",{attrs:{"icon-class":"documentation"}})],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"card-panel-text"},[e._v(e._s(e.$t("dashboard.document")))]),e._v(" "),s("div",{staticClass:"card-panel-num"},[s("a",{attrs:{href:"http://webflash.enilu.cn",target:"_blank"}},[e._v("Document")])])])],1)],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("el-card",{staticClass:"box-card"},[s("el-col",{attrs:{span:12}},[s("svg-icon",{attrs:{"icon-class":"user"}})],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"card-panel-text"},[e._v(e._s(e.$t("dashboard.newUser")))]),e._v(" "),s("div",{staticClass:"card-panel-num"},[e._v("102,400")])])],1)],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("el-card",{staticClass:"box-card"},[s("el-col",{attrs:{span:12}},[s("svg-icon",{attrs:{"icon-class":"message"}})],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"card-panel-text"},[e._v(e._s(e.$t("dashboard.message")))]),e._v(" "),s("div",{staticClass:"card-panel-num"},[e._v("5")])])],1)],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("el-card",{staticClass:"box-card"},[s("el-col",{attrs:{span:12}},[s("svg-icon",{attrs:{"icon-class":"money"}})],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"card-panel-text"},[e._v(e._s(e.$t("dashboard.income")))]),e._v(" "),s("div",{staticClass:"card-panel-num"},[e._v("10000")])])],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("div",{staticClass:"chart section"},[s("v-chart",{ref:"lineChart",attrs:{options:e.lineData}})],1)])],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-collapse",{staticClass:"section"},[s("el-collapse-item",{attrs:{title:"2019双11All in cloud低至一折",name:"1"}},[s("div",[s("a",{attrs:{href:"https://www.aliyun.com/1111/2019/home?userCode=alts44ap",target:"_blank"}},[e._v("点击查看详情")])])]),e._v(" "),s("el-collapse-item",{attrs:{title:"主机爆款限时优惠",name:"2"}},[s("div",[s("a",{attrs:{href:"https://www.aliyun.com/acts/hotsale?userCode=alts44ap",target:"_blank"}},[e._v("点击查看详情")])])]),e._v(" "),s("el-collapse-item",{attrs:{title:"企业级云服务器五折优惠",name:"3"}},[s("div",[s("a",{attrs:{href:"https://promotion.aliyun.com/ntms/act/enterprise-discount.html?userCode=alts44ap",target:"_blank"}},[e._v("点击查看详情")])])]),e._v(" "),s("el-collapse-item",{attrs:{title:"全民云计算云主机低至4折",name:"4"}},[s("div",[s("a",{attrs:{href:"https://promotion.aliyun.com/ntms/act/qwbk.html?userCode=alts44ap",target:"_blank"}},[e._v("点击查看详情")])])]),e._v(" "),s("el-collapse-item",{attrs:{title:"商标注册服务低至8折",name:"5"}},[s("div",[s("a",{attrs:{href:"https://tm.aliyun.com/?userCode=alts44ap",target:"_blank"}},[e._v("点击查看详情")])])]),e._v(" "),s("el-collapse-item",{attrs:{title:"云短信产品低至8折",name:"6"}},[s("div",[s("a",{attrs:{href:"https://www.aliyun.com/acts/alicomcloud/new-discount?userCode=alts44ap",target:"_blank"}},[e._v("点击查看详情")])])])],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("v-chart",{ref:"barChart",staticClass:"chart section",attrs:{options:e.barData}})],1)],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("v-chart",{ref:"pieChart",staticClass:"chart section",attrs:{options:e.pieData}})],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-table",{staticClass:"section",attrs:{data:e.tableData}},[s("el-table-column",{attrs:{prop:"date",label:e.$t("dashboard.date"),width:"180"}}),e._v(" "),s("el-table-column",{attrs:{prop:"name",label:e.$t("dashboard.name"),width:"180"}}),e._v(" "),s("el-table-column",{attrs:{prop:"address",label:e.$t("dashboard.addr")}})],1)],1)],1)],1)},a=[],r=s("5530"),n=(s("8b29"),s("2f62")),o=s("9ca8"),l=(s("94b1"),s("ef97"),s("c037"),s("675c"),s("8deb"),s("15af"),s("1111"),s("007d"),s("2f73"),s("d070"),s("d28f"),s("627c"),s("5450"),s("0352"),s("c54d"),s("8ee0"),s("eec4")),c=s.n(l),u={name:"dashboard",components:{chart:o["a"]},data(){const e=[];for(let t=0;t<=360;t++){const s=t/180*Math.PI,i=Math.sin(2*s)*Math.cos(2*s);e.push([i,t])}return{notice:[],lineData:{title:{text:""},tooltip:{trigger:"axis"},legend:{data:[this.$t("dashboard.email"),this.$t("dashboard.ad"),this.$t("dashboard.vedio"),this.$t("dashboard.direct"),this.$t("dashboard.searchEngine")]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:[this.$t("common.week.mon"),this.$t("common.week.tue"),this.$t("common.week.wed"),this.$t("common.week.thu"),this.$t("common.week.fri"),this.$t("common.week.sat"),this.$t("common.week.sun")]},yAxis:{type:"value"},series:[{name:this.$t("dashboard.email"),type:"line",stack:"总量",data:[120,132,101,134,90,230,210]},{name:this.$t("dashboard.ad"),type:"line",stack:"总量",data:[220,182,191,234,290,330,310]},{name:this.$t("dashboard.vedio"),type:"line",stack:"总量",data:[150,232,201,154,190,330,410]},{name:this.$t("dashboard.direct"),type:"line",stack:"总量",data:[320,332,301,334,390,330,320]},{name:this.$t("dashboard.searchEngine"),type:"line",stack:"总量",data:[820,932,901,934,1290,1330,1320]}]},barData:{xAxis:{type:"category",data:[this.$t("common.week.mon"),this.$t("common.week.tue"),this.$t("common.week.wed"),this.$t("common.week.thu"),this.$t("common.week.fri"),this.$t("common.week.sat"),this.$t("common.week.sun")]},yAxis:{type:"value"},series:[{data:[120,200,150,80,70,110,130],type:"bar"}]},pieData:{title:{text:this.$t("dashboard.userFrom"),subtext:"纯属虚构",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:[this.$t("dashboard.email"),this.$t("dashboard.ad"),this.$t("dashboard.vedio"),this.$t("dashboard.direct"),this.$t("dashboard.searchEngine")]},series:[{name:"from",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:335,name:this.$t("dashboard.direct")},{value:310,name:this.$t("dashboard.email")},{value:234,name:this.$t("dashboard.ad")},{value:135,name:this.$t("dashboard.vedio")},{value:1548,name:this.$t("dashboard.searchEngine")}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},tableData:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}]}},computed:Object(r["a"])({},Object(n["b"])(["name"])),created(){this.fetchData()},mounted(){let e=this,t=c()();t.listenTo(document.getElementById("dashboard"),t=>{e.$nextTick(()=>{e.$refs.lineChart.resize(),e.$refs.barChart.resize(),e.$refs.pieChart.resize()})})},methods:{fetchData(){}}},d=u,m=(s("5f70"),s("2877")),h=Object(m["a"])(d,i,a,!1,null,"55402f95",null);t["default"]=h.exports},"94ab":function(e,t,s){"use strict";s.r(t),s.d(t,"getList",(function(){return a})),s.d(t,"save",(function(){return r})),s.d(t,"remove",(function(){return n})),s.d(t,"logList",(function(){return o})),s.d(t,"enable",(function(){return l})),s.d(t,"disable",(function(){return c}));var i=s("b775");function a(e){return Object(i["default"])({url:"/task/list",method:"get",params:e})}function r(e){return Object(i["default"])({url:"/task",method:"post",params:e})}function n(e){return Object(i["default"])({url:"/task",method:"delete",params:{id:e}})}function o(e){return Object(i["default"])({url:"/task/logList",method:"get",params:e})}function l(e){return Object(i["default"])({url:"/task/enable/",method:"POST",params:{taskId:e}})}function c(e){return Object(i["default"])({url:"/task/disable/",method:"POST",params:{taskId:e}})}},9538:function(e,t,s){},"97e7":function(e,t,s){e.exports={menuText:"#bfcbd9",menuActiveText:"#409eff",subMenuActiveText:"#f4f4f5",menuBg:"#304156",menuHover:"#263445",subMenuBg:"#1f2d3d",subMenuHover:"#001528",sideBarWidth:"210px"}},"97ef":function(e,t,s){"use strict";s("d3f45")},"9850a":function(e,t,s){},9894:function(e,t,s){"use strict";s.r(t);var i=s("3432"),a=s("5f87"),r=s("5c96"),n=s("fa7d"),o=s("4381");t["default"]={name:"banner",directives:{permission:o["default"]},data(){return{uploadUrl:"",uploadFileId:"",uploadHeaders:{Authorization:""},loadingInstance:{},formVisible:!1,formTitle:"添加banner",deptList:[],isAdd:!0,options:[{label:"首页",value:"index"},{label:"新闻",value:"news"},{label:"产品",value:"product"},{label:"解决方案",value:"solution"},{label:"案例",value:"case"}],form:{id:"",title:"",url:"",img:"",idFile:"",type:"index"},listQuery:{title:void 0},list:null,listLoading:!0,selRow:{}}},computed:{rules(){return{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],url:[{required:!0,message:"URL不能为空",trigger:"blur"}]}}},created(){this.init()},methods:{init(){this.uploadUrl=Object(n["getApiUrl"])()+"/file",this.uploadHeaders["Authorization"]=Object(a["getToken"])(),this.fetchData()},fetchData(){this.listLoading=!0,Object(i["getList"])(this.listQuery).then(e=>{for(var t in this.list=e.data,this.list){let e=this.list[t];e.img=Object(n["getApiUrl"])()+"/file/getImgStream?idFile="+e.idFile,console.log(e)}this.listLoading=!1})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.title="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.getList()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={id:"",title:"",url:"",idFile:this.uploadFileId,type:""}},add(){this.resetForm(),this.formTitle="添加banner",this.formVisible=!0,this.isAdd=!0},save(){this.$refs["form"].validate(e=>{if(!e)return!1;Object(i["save"])({id:this.form.id,title:this.form.title,url:this.form.url,idFile:this.uploadFileId,type:this.form.type}).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm(this.$t("common.deleteConfirm"),this.$t("common.tooltip"),{confirmButtonText:this.$t("button.submit"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then(()=>{Object(i["remove"])(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData()})}).catch(()=>{})}},handleBeforeUpload(){if(""!==this.uploadFileId)return this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1;this.loadingInstance=r["Loading"].service({lock:!0,text:this.$t("common.uploading"),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})},handleUploadSuccess(e,t){this.loadingInstance.close(),2e4===e.code?(console.log(e.data),this.uploadFileId=e.data.id,this.form.fileName=e.data.originalFileName):this.$message({message:this.$t("common.uploadError"),type:"error"})}}}},"9a69":function(e,t,s){"use strict";s("5acc")},"9b6f":function(e,t,s){"use strict";s("0714")},"9d1f":function(e,t,s){},"9d25":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:6}},[s("el-input",{attrs:{size:"mini",placeholder:"标题"},model:{value:e.listQuery.title,callback:function(t){e.$set(e.listQuery,"title",t)},expression:"listQuery.title"}})],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("el-input",{attrs:{size:"mini",placeholder:"作者"},model:{value:e.listQuery.author,callback:function(t){e.$set(e.listQuery,"author",t)},expression:"listQuery.author"}})],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-date-picker",{attrs:{size:"mini",type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"发布起始日期","end-placeholder":"发布截至日期","value-format":"yyyyMMddHHmmss",align:"right"},model:{value:e.rangeDate,callback:function(t){e.rangeDate=t},expression:"rangeDate"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-search"},nativeOn:{click:function(t){return e.search(t)}}},[e._v(e._s(e.$t("button.search")))]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(e._s(e.$t("button.reset")))])],1)],1),e._v(" "),s("br"),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/cms/articleEdit"],expression:"['/cms/articleEdit']"}],attrs:{type:"success",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return e.add(t)}}},[e._v(e._s(e.$t("button.add")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/cms/articleEdit"],expression:"['/cms/articleEdit']"}],attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(t){return e.edit(t)}}},[e._v(e._s(e.$t("button.edit")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/article/remove"],expression:"['/article/remove']"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(t){return e.remove(t)}}},[e._v(e._s(e.$t("button.delete")))])],1)],1)],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[s("el-table-column",{attrs:{label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.id)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.title)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"发布日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.createTime)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"作者"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.author)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"文章配图"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("img",{staticStyle:{width:"80px"},attrs:{src:e.row.img}})]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/cms/articleEdit"],expression:"['/cms/articleEdit']"}],attrs:{type:"text",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(s){return e.editItem(t.row)}}},[e._v(e._s(e.$t("button.edit")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/article/remove"],expression:"['/article/remove']"}],attrs:{type:"text",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(s){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("button.delete")))])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100,500],"page-size":e.listQuery.limit,total:e.total,"current-page":e.listQuery.page},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"page",t)},"update:current-page":function(t){return e.$set(e.listQuery,"page",t)},"size-change":e.changeSize,"current-change":e.fetchPage,"prev-click":e.fetchPrev,"next-click":e.fetchNext}})],1)},a=[],r=s("5248"),n=s("fa7d"),o=s("4381"),l={name:"article",directives:{permission:o["default"]},data(){return{formVisible:!1,formTitle:"添加文章",deptList:[],isAdd:!0,form:{id:"",title:"",author:"",img:""},listQuery:{page:1,limit:20,title:void 0,author:void 0,startDate:void 0,endDate:void 0},rangeDate:void 0,total:0,list:null,listLoading:!0,selRow:{},pickerOptions:{shortcuts:[{text:"最近一周",onClick(e){const t=new Date,s=new Date;s.setTime(s.getTime()-6048e5),e.$emit("pick",[s,t])}},{text:"最近一个月",onClick(e){const t=new Date,s=new Date;s.setTime(s.getTime()-2592e6),e.$emit("pick",[s,t])}},{text:"最近三个月",onClick(e){const t=new Date,s=new Date;s.setTime(s.getTime()-7776e6),e.$emit("pick",[s,t])}}]}}},computed:{rules(){return{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],author:[{required:!0,message:"作者不能为空",trigger:"blur"}]}}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0;let e=this.listQuery;this.rangeDate&&(e["startDate"]=this.rangeDate[0],e["endDate"]=this.rangeDate[1]),Object(r["getList"])(e).then(e=>{for(var t in this.list=e.data.records,this.list){const e=this.list[t];e.img=Object(n["getApiUrl"])()+"/file/getImgStream?idFile="+e.img}this.listLoading=!1,this.total=e.data.total})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.title=void 0,this.listQuery.author=void 0,this.listQuery.startDate=void 0,this.listQuery.endDate=void 0,this.rangeDate="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},add(){this.$router.push({path:"/cms/articleEdit"})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},editItem(e){this.selRow=e,this.edit()},edit(){this.checkSel()&&this.$router.push({path:"/cms/articleEdit",query:{id:this.selRow.id}})},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm(this.$t("common.deleteConfirm"),this.$t("common.tooltip"),{confirmButtonText:this.$t("button.submit"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then(()=>{Object(r["remove"])(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData()})}).catch(()=>{})}}}},c=l,u=(s("cb32"),s("2877")),d=Object(u["a"])(c,i,a,!1,null,"9932d12e",null);t["default"]=d.exports},"9ed6":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-container",staticStyle:{"background-image":"url(./img/bg.jpg)"}},[s("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[s("div",{staticClass:"title-container"},[s("h3",{staticClass:"title"},[e._v(e._s(e.$t("login.title")))]),e._v(" "),s("lang-select",{staticClass:"set-language"})],1),e._v(" "),s("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.changeLoginType},model:{value:e.qrcode.activeName,callback:function(t){e.$set(e.qrcode,"activeName",t)},expression:"qrcode.activeName"}},[s("el-tab-pane",{attrs:{label:"账号密码登录",name:"first"}},[s("el-form-item",{attrs:{prop:"username"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"user"}})],1),e._v(" "),s("el-input",{attrs:{placeholder:e.$t("login.username"),name:"username",type:"text","auto-complete":"on"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"password"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),s("el-input",{attrs:{type:e.pwdType,placeholder:e.$t("login.password"),name:"password","auto-complete":"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),e._v(" "),s("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[s("svg-icon",{attrs:{"icon-class":"eye"}})],1)],1),e._v(" "),s("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v(" "+e._s(e.$t("login.logIn"))+" ")]),e._v(" "),s("div",{staticStyle:{position:"relative"}},[s("div",{staticClass:"tips"},[s("span",[e._v(e._s(e.$t("login.username"))+" : admin")]),e._v(" "),s("span",[e._v(e._s(e.$t("login.password"))+" : admin")])]),e._v(" "),s("div",{staticClass:"tips"},[s("span",{staticStyle:{"margin-right":"18px"}},[e._v(e._s(e.$t("login.username"))+" : developer")]),e._v(" "),s("span",[e._v(e._s(e.$t("login.password"))+" : developer")])])])],1)],1)],1)],1)},a=[],r=(s("6b54"),s("61f7")),n=s("fa7d"),o=s("c24f"),l=s("1131"),c={name:"login",components:{LangSelect:l["default"]},data(){const e=(e,t,s)=>{Object(r["isvalidUsername"])(t)?s():s(new Error(this.$t("login.errorAccount")))},t=(e,t,s)=>{t.length<3?s(new Error(this.$t("login.errorPassword"))):s()};return{qrcode:{activeName:"first",showAppdownload:!1,imgUrl:"",uuid:"",resultStatus:"",msg:"请使用smbms-uniapp 扫码登录"},loginForm:{username:"",password:""},loginRules:{username:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:t}]},loading:!1,pwdType:"password",redirect:"/"}},mounted(){this.init(),this.getQrcode()},methods:{init(){const e=this.$route.query.redirect;e&&(this.redirect=e)},changeLoginType(e){"second"===this.qrcode.activeName&&(this.getQrcode(),this.getQrcodeResult())},uuid(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},showAppdownload(){this.qrcode.showAppdownload=!0},hideAppdownload(){this.qrcode.showAppdownload=!1},getQrcode(){this.qrcode.uuid=this.uuid();const e=Object(n["getApiUrl"])()+"/account/qrcode/generate?uuid="+this.qrcode.uuid;console.log("getQrcode",e),this.qrcode.imgUrl=e},refreshQrcode(){this.getQrcode(),this.qrcode.resultStatus="",this.getQrcodeResult()},getQrcodeResult(){if("second"===this.qrcode.activeName){const e=this;this.sleep(1e3).then(()=>{Object(o["getQrcodeStatus"])({uuid:e.qrcode.uuid}).then(t=>{console.log("扫描结果",t),this.qrcode.resultStatus=t.data.status,"invalid"===t.data.status&&(this.qrcode.showAppdownload=!1,e.qrcode.msg="二维码已过期"),"success"===t.data.status&&(this.qrcode.showAppdownload=!1,this.qrcode.msg="扫描成功，自动登录中",this.loading=!0,this.$store.dispatch("user/autoLogin",{token:t.data.token}).then(()=>{this.loading=!1,this.$router.push({path:this.redirect})}).catch(e=>{this.qrcode.msg="登录失败",this.loading=!1})),"second"===e.qrcode.activeName&&"undo"===t.data.status&&e.getQrcodeResult()}).catch(e=>{console.log("err",e)})})}},sleep(e){return new Promise(t=>setTimeout(t,e))},showPwd(){"password"===this.pwdType?this.pwdType="":this.pwdType="password"},handleLogin(){this.$refs.loginForm.validate(e=>{if(!e)return!1;this.loading=!0,this.$store.dispatch("user/login",this.loginForm).then(()=>{this.loading=!1,this.$router.push({path:this.redirect})}).catch(e=>{this.loading=!1})})}}},u=c,d=(s("86a6"),s("2877")),m=Object(d["a"])(u,i,a,!1,null,null,null);t["default"]=m.exports},"9f14":function(e,t,s){"use strict";s.r(t);var i=s("0baa"),a=s("5f87");const r=["SUPER_ADMIN","SYSTEM_ADMIN","VIP","USER"];t["default"]={name:"mgr",data(){return{roleArray:r,roleDialog:{visible:!1,roles:[{roleId:1,roleName:"SUPER_ADMIN"},{roleId:2,roleName:"SYSTEM_ADMIN"},{roleId:3,roleName:"VIP"},{roleId:4,roleName:"USER"}],checkedRoleKeys:[],defaultProps:{id:"roleId",label:"roleName"}},statusList:[{label:"启用",value:"1"},{label:"冻结",value:"2"}],formVisible:!1,formTitle:"添加用户",roleSet:[],form:{username:"",password:"",nickname:"",phone:"",email:"",avatar:"",backImg:"",signature:"从前从前,有个人爱你很久...",enable:!0},rules:{username:[{required:!0,message:"请输入登录账号",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],password:[{required:!1,message:"请输入登录密码",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],nickname:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],phone:[{required:!1,message:"请输入email",trigger:"blur"}],email:[{required:!1,message:"请输入email",trigger:"blur"}]},listQuery:{page:1,limit:5,userNmae:void 0,nickName:void 0,phone:void 0,email:void 0},avatarloading:!1,backImgloading:!1,total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(i["getList"])(this.listQuery).then(e=>{this.list=e.data.dataCurrentPage,this.listLoading=!1,this.total=e.data.totalCount})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.userNmae="",this.listQuery.nickName="",this.listQuery.page=1,this.listQuery.phone="",this.listQuery.email="",this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={username:"",password:"",nickname:"",phone:"",email:"",avatar:"",backImg:"",signature:"",enable:!0}},add(){this.resetForm(),this.formTitle="添加用户",this.formVisible=!0},changeUserStatus(e,t){var s={userId:e,enable:t};Object(i["changeStatus"])(s).then(()=>{this.$notify({title:"成功",message:"修改成功",type:"success"}),this.fetchData()}).catch(()=>{this.fetchData()})},saveUser(){var e=this;this.$refs["form"].validate(t=>{if(!t)return!1;var s=e.form,a=[];for(const e of this.roleSet)"SUPER_ADMIN"==e?a.push({roleId:1}):"SYSTEM_ADMIN"==e?a.push({roleId:2}):"VIP"==e?a.push({roleId:3}):a.push({roleId:4});s.roleSet=a,console.log(s),Object(i["saveUser"])(s).then(e=>{this.$message({message:"提交成功",type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},editItem(e){this.selRow=Object.assign({},e),this.edit()},edit(){if(this.checkSel()){let e=Object.assign({},this.selRow);e.password="";let t={id:e.id,username:e.username,password:"",nickname:e.nickname,phone:e.phone,email:e.email,signature:e.signature,avatar:e.avatar,backImg:e.backImg,roleSet:e.roleSet,enable:e.enable};this.form=t,this.formTitle="修改用户",this.formVisible=!0}},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(i["remove"])(e).then(e=>{this.$message({message:"删除成功",type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}},beforeImgUpload(e,t){"avatar"==t?this.avatarloading=!0:this.backImgloading=!0;const s="image/jpeg"===e.type||"image/gif"===e.type||"image/png"===e.type,i=e.size/1024/1024/1024/1024<4;return s||this.$message.error("上传头像图片只能是 JPG 格式!"),i||this.$message.error("上传头像图片大小不能超过 4MB!"),s&&i},handleAvatarSuccess(e){0==e.code?(this.form.avatar=e.data,this.$notify({title:"成功",message:"头像上传成功",type:"success"}),this.avatarloading=!1):(this.$message({message:e.message,type:"error"}),this.avatarloading=!1)},handleBackImgSuccess(e){0==e.code?(this.form.backImg=e.data,this.$notify({title:"成功",message:"头像上传成功",type:"success"}),this.backImgloading=!1):(this.$message({message:e.message,type:"error"}),this.backImgloading=!1)},resetPwd(){if(this.checkSel()){var e=this.selRow.id;this.$confirm("将密码重置为maiqu?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(i["resetPassword"])(e).then(e=>{this.$message({message:"重置密码成功",type:"success"})}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}},openRoleItem(e){this.selRow=e,this.openRole()},openRole(){this.checkSel()&&(this.roleDialog.visible=!0)},setRole(){var e=this.$refs.roleTree.getCheckedKeys(),t="";for(var s in e)t+=e[s]+",";var a={userId:this.selRow.id,roleIds:t.slice(0,-1)};Object(i["setRole"])(a).then(e=>{this.roleDialog.visible=!1,this.fetchData(),this.$message({message:"提交成功",type:"success"})})}},computed:{token(){return{Authorization:Object(a["getToken"])()}}}}},"9f3d":function(e,t,s){},"9f8e":function(e,t,s){},a0c2:function(e,t,s){"use strict";s("c4b4")},a36b:function(e,t,s){e.exports=s.p+"static/img/404.a57b6f31.png"},a457:function(e,t,s){"use strict";s.r(t),s.d(t,"getList",(function(){return a})),s.d(t,"queryByUser",(function(){return r})),s.d(t,"clear",(function(){return n}));var i=s("b775");function a(e){return Object(i["default"])({url:"/log/list",method:"get",params:e})}function r(){return Object(i["default"])({url:"/log/queryByUser",method:"get"})}function n(){return Object(i["default"])({url:"/log",method:"delete"})}},a53c:function(e,t,s){"use strict";s("fb69")},a62c:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",[s("el-col",{attrs:{span:24}},[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/channel/edit"],expression:"['/channel/edit']"}],attrs:{type:"success",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return e.add(t)}}},[e._v(e._s(e.$t("button.add")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/channel/edit"],expression:"['/channel/edit']"}],attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(t){return e.edit(t)}}},[e._v(e._s(e.$t("button.edit")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/channel/remove"],expression:"['/channel/remove']"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(t){return e.remove(t)}}},[e._v(e._s(e.$t("button.delete")))])],1)],1)],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[s("el-table-column",{attrs:{label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.id)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.name)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.code)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/channel/edit"],expression:"['/channel/edit']"}],attrs:{type:"text",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(s){return e.editItem(t.row)}}},[e._v(e._s(e.$t("button.edit")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/channel/remove"],expression:"['/channel/remove']"}],attrs:{type:"text",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(s){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("button.delete")))])]}}])})],1),e._v(" "),s("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,width:"70%"},on:{"update:visible":function(t){e.formVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"名称",prop:"name"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"编码",prop:"code"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("button.submit")))]),e._v(" "),s("el-button",{nativeOn:{click:function(t){e.formVisible=!1}}},[e._v(e._s(e.$t("button.cancel")))])],1)],1)],1)],1)},a=[],r=s("4761"),n=s("4381"),o={name:"channel",directives:{permission:n["default"]},data(){return{formVisible:!1,formTitle:"添加栏目",deptList:[],isAdd:!0,form:{id:"",name:"",code:""},total:0,list:null,listLoading:!0,selRow:{}}},computed:{rules(){return{cfgName:[{required:!0,message:"名称不能为空",trigger:"blur"}],cfgValue:[{required:!0,message:"编码不能为空",trigger:"blur"}]}}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(r["getList"])().then(e=>{this.list=e.data,this.listLoading=!1})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.page=1,this.fetchData()},handleFilter(){this.getList()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={id:"",name:"",code:""}},add(){this.resetForm(),this.formTitle="添加栏目",this.formVisible=!0,this.isAdd=!0},save(){this.$refs["form"].validate(e=>{if(!e)return!1;Object(r["save"])({id:this.form.id,name:this.form.name,code:this.form.code}).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},editItem(e){this.selRow=e,this.edit()},edit(){this.checkSel()&&(this.isAdd=!1,this.form=this.selRow,this.formTitle="编辑栏目",this.formVisible=!0)},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm(this.$t("common.deleteConfirm"),this.$t("common.tooltip"),{confirmButtonText:this.$t("button.submit"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then(()=>{Object(r["remove"])(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData()})}).catch(()=>{})}}}},l=o,c=(s("2a2a"),s("2877")),u=Object(c["a"])(l,i,a,!1,null,"9239f7f6",null);t["default"]=u.exports},a66b:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.userName,callback:function(t){e.$set(e.listQuery,"userName",t)},expression:"listQuery.userName"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入昵称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.nickName,callback:function(t){e.$set(e.listQuery,"nickName",t)},expression:"listQuery.nickName"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入手机号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.phone,callback:function(t){e.$set(e.listQuery,"phone",t)},expression:"listQuery.phone"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入邮箱"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.email,callback:function(t){e.$set(e.listQuery,"email",t)},expression:"listQuery.email"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-search"},nativeOn:{click:function(t){return e.search(t)}}},[e._v(e._s(e.$t("button.search")))]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(e._s(e.$t("button.reset")))])],1)],1),e._v(" "),s("br"),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return e.add(t)}}},[e._v("\r\n        "+e._s(e.$t("button.add"))+"\r\n        ")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(t){return e.edit(t)}}},[e._v("\r\n        "+e._s(e.$t("button.edit"))+"\r\n        ")]),e._v(" "),s("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(t){return e.remove(t)}}},[e._v("\r\n        "+e._s(e.$t("button.delete"))+"\r\n        ")]),e._v(" "),s("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-refresh-right"},nativeOn:{click:function(t){return e.resetPwd(t)}}},[e._v("\r\n        "+e._s(e.$t("button.resetPwd"))+"\r\n        ")]),e._v(" "),s("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-s-operation"},nativeOn:{click:function(t){return e.openRole(t)}}},[e._v("\r\n        "+e._s(e.$t("button.roleAllocate")))])],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,size:"mini","element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[s("el-table-column",{attrs:{label:"用户编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("\r\n            "+e._s(t.row.userId)+"\r\n            ")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"商品编号",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v("\r\n                "+e._s(t.row.goodsId)+"\r\n            ")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"订购时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("el-tag",{attrs:{size:"mini"}},[e._v(" "+e._s(t.row.orderDate)+" ")])],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"订购数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n            "+e._s(t.row.number)+"\r\n        ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"需要日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("el-tag",{attrs:{size:"mini"}},[e._v(" "+e._s(t.row.dateNeeded)+" ")])],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"支付方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("el-tag",{attrs:{size:"mini"}},[e._v(" "+e._s(t.row.payMethod)+" ")])],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"投递方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("el-tag",{attrs:{size:"mini"}},[e._v(" "+e._s(t.row.deliverMethod)+" ")])],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(s){return e.editItem(t.row)}}},[e._v("\r\n            "+e._s(e.$t("button.edit"))+"\r\n            ")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(s){return e.removeItem(t.row)}}},[e._v("\r\n            "+e._s(e.$t("button.delete"))+"\r\n            ")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-s-operation"},nativeOn:{click:function(s){return e.openRoleItem(t.row)}}},[e._v("角色分配")])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[5,10,20,50,100,500],"page-size":e.listQuery.limit,total:e.total,"current-page":e.listQuery.page},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"page",t)},"update:current-page":function(t){return e.$set(e.listQuery,"page",t)},"size-change":e.changeSize,"current-change":e.fetchPage,"prev-click":e.fetchPrev,"next-click":e.fetchNext}})],1)],1),e._v(" "),s("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,width:"70%"},on:{"update:visible":function(t){e.formVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px","label-position":"right"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"手机",prop:"phone"}},[s("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"签名",prop:"signature"}},[s("el-input",{model:{value:e.form.signature,callback:function(t){e.$set(e.form,"signature",t)},expression:"form.signature"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[s("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.avatarloading,expression:"avatarloading"}],staticClass:"avatar-uploader",attrs:{action:"https://api.maiquer.tech/api/upload/image",name:"imgFile",headers:e.token,"on-success":e.handleAvatarSuccess,"show-file-list":!1,"before-upload":function(t){return e.beforeImgUpload(t,"avatar")}}},[e.form.avatar?s("img",{staticClass:"avatar",attrs:{src:e.form.avatar}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"背景图",prop:"backImg"}},[s("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.backImgloading,expression:"backImgloading"}],staticClass:"avatar-uploader",attrs:{action:"https://api.maiquer.tech/api/upload/image",name:"imgFile",headers:e.token,"on-success":e.handleBackImgSuccess,"show-file-list":!1,"before-upload":function(t){return e.beforeImgUpload(t,"backImg")}}},[e.form.backImg?s("img",{staticClass:"avatar",attrs:{src:e.form.backImg}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"角色分配"}},[s("el-checkbox-group",{model:{value:e.roleSet,callback:function(t){e.roleSet=t},expression:"roleSet"}},e._l(e.roleArray,(function(e){return s("el-checkbox",{key:e,attrs:{label:e}})})),1)],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"是否启用"}},[s("el-switch",{model:{value:e.form.enable,callback:function(t){e.$set(e.form,"enable",t)},expression:"form.enable"}})],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.saveUser}},[e._v(e._s(e.$t("button.submit")))]),e._v(" "),s("el-button",{nativeOn:{click:function(t){e.formVisible=!1}}},[e._v(e._s(e.$t("button.cancel")))])],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"角色分配",visible:e.roleDialog.visible,width:"25%"},on:{"update:visible":function(t){return e.$set(e.roleDialog,"visible",t)}}},[s("el-form",[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-tree",{ref:"roleTree",attrs:{data:e.roleDialog.roles,"show-checkbox":"","node-key":"roleId","default-checked-keys":e.roleDialog.checkedRoleKeys,props:e.roleDialog.defaultProps}})],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.setRole}},[e._v(e._s(e.$t("button.submit")))])],1)],1)],1)],1)},a=[],r=s("d967"),n=s("5f87");const o=["SUPER_ADMIN","SYSTEM_ADMIN","VIP","USER"];var l={name:"mgr",data(){return{roleArray:o,roleDialog:{visible:!1,roles:[{roleId:1,roleName:"SUPER_ADMIN"},{roleId:2,roleName:"SYSTEM_ADMIN"},{roleId:3,roleName:"VIP"},{roleId:4,roleName:"USER"}],checkedRoleKeys:[],defaultProps:{id:"roleId",label:"roleName"}},statusList:[{label:"启用",value:"1"},{label:"冻结",value:"2"}],formVisible:!1,formTitle:"添加用户",roleSet:[],form:{username:"",password:"",nickname:"",phone:"",email:"",avatar:"",backImg:"",signature:"从前从前,有个人爱你很久...",enable:!0},rules:{username:[{required:!0,message:"请输入登录账号",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],password:[{required:!1,message:"请输入登录密码",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],nickname:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],phone:[{required:!1,message:"请输入email",trigger:"blur"}],email:[{required:!1,message:"请输入email",trigger:"blur"}]},listQuery:{page:1,limit:5,userNmae:void 0,nickName:void 0,phone:void 0,email:void 0},avatarloading:!1,backImgloading:!1,total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(r["getList"])(this.listQuery).then(e=>{this.list=e.data.dataCurrentPage,this.listLoading=!1,this.total=e.data.totalCount})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.userNmae="",this.listQuery.nickName="",this.listQuery.page=1,this.listQuery.phone="",this.listQuery.email="",this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={username:"",password:"",nickname:"",phone:"",email:"",avatar:"",backImg:"",signature:"",enable:!0}},add(){this.resetForm(),this.formTitle="添加用户",this.formVisible=!0},changeUserStatus(e,t){var s={userId:e,enable:t};Object(r["changeStatus"])(s).then(()=>{this.$notify({title:"成功",message:"修改成功",type:"success"}),this.fetchData()}).catch(()=>{this.fetchData()})},saveUser(){var e=this;this.$refs["form"].validate(t=>{if(!t)return!1;var s=e.form,i=[];for(const e of this.roleSet)"SUPER_ADMIN"==e?i.push({roleId:1}):"SYSTEM_ADMIN"==e?i.push({roleId:2}):"VIP"==e?i.push({roleId:3}):i.push({roleId:4});s.roleSet=i,console.log(s),Object(r["saveUser"])(s).then(e=>{this.$message({message:"提交成功",type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},editItem(e){this.selRow=Object.assign({},e),this.edit()},edit(){if(this.checkSel()){let e=Object.assign({},this.selRow);e.password="";let t={id:e.id,username:e.username,password:"",nickname:e.nickname,phone:e.phone,email:e.email,signature:e.signature,avatar:e.avatar,backImg:e.backImg,roleSet:e.roleSet,enable:e.enable};this.form=t,this.formTitle="修改用户",this.formVisible=!0}},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(r["remove"])(e).then(e=>{this.$message({message:"删除成功",type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}},beforeImgUpload(e,t){"avatar"==t?this.avatarloading=!0:this.backImgloading=!0;const s="image/jpeg"===e.type||"image/gif"===e.type||"image/png"===e.type,i=e.size/1024/1024/1024/1024<4;return s||this.$message.error("上传头像图片只能是 JPG 格式!"),i||this.$message.error("上传头像图片大小不能超过 4MB!"),s&&i},handleAvatarSuccess(e){0==e.code?(this.form.avatar=e.data,this.$notify({title:"成功",message:"头像上传成功",type:"success"}),this.avatarloading=!1):(this.$message({message:e.message,type:"error"}),this.avatarloading=!1)},handleBackImgSuccess(e){0==e.code?(this.form.backImg=e.data,this.$notify({title:"成功",message:"头像上传成功",type:"success"}),this.backImgloading=!1):(this.$message({message:e.message,type:"error"}),this.backImgloading=!1)},resetPwd(){if(this.checkSel()){var e=this.selRow.id;this.$confirm("将密码重置为maiqu?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(r["resetPassword"])(e).then(e=>{this.$message({message:"重置密码成功",type:"success"})}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}},openRoleItem(e){this.selRow=e,this.openRole()},openRole(){this.checkSel()&&(this.roleDialog.visible=!0)},setRole(){var e=this.$refs.roleTree.getCheckedKeys(),t="";for(var s in e)t+=e[s]+",";var i={userId:this.selRow.id,roleIds:t.slice(0,-1)};Object(r["setRole"])(i).then(e=>{this.roleDialog.visible=!1,this.fetchData(),this.$message({message:"提交成功",type:"success"})})}},computed:{token(){return{Authorization:Object(n["getToken"])()}}}},c=l,u=(s("c8e0"),s("2877")),d=Object(u["a"])(c,i,a,!1,null,null,null);t["default"]=d.exports},a85d:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("iframe",{attrs:{src:"https://gitee.com/dyh-creator",width:"100%",height:"768px",frameborder:"0",scrolling:"auto"}})])])}],r=(s("b8ae"),s("2877")),n={},o=Object(r["a"])(n,i,a,!1,null,"dc069856",null);t["default"]=o.exports},a8ec:function(e,t,s){var i={"./App":"3dfd","./App.vue":"3dfd","./api/cms/article":"5248","./api/cms/article.js":"5248","./api/cms/banner":"3432","./api/cms/banner.js":"3432","./api/cms/channel":"4761","./api/cms/channel.js":"4761","./api/cms/contacts":"dee8","./api/cms/contacts.js":"dee8","./api/cms/fileInfo":"3be1","./api/cms/fileInfo.js":"3be1","./api/message/message":"5646","./api/message/message.js":"5646","./api/message/sender":"0e42","./api/message/sender.js":"0e42","./api/message/template":"ded0","./api/message/template.js":"ded0","./api/system/cfg":"7b3ee","./api/system/cfg.js":"7b3ee","./api/system/coupon":"5f22","./api/system/coupon.js":"5f22","./api/system/dept":"fcb7","./api/system/dept.js":"fcb7","./api/system/dict":"7754","./api/system/dict.js":"7754","./api/system/goods":"0baa","./api/system/goods.js":"0baa","./api/system/log":"a457","./api/system/log.js":"a457","./api/system/loginLog":"44368","./api/system/loginLog.js":"44368","./api/system/menu":"a6dc","./api/system/menu.js":"a6dc","./api/system/notice":"8b29","./api/system/notice.js":"8b29","./api/system/order":"d967","./api/system/order.js":"d967","./api/system/provider":"0aac","./api/system/provider.js":"0aac","./api/system/role":"3528","./api/system/role.js":"3528","./api/system/task":"94ab","./api/system/task.js":"94ab","./api/system/user":"c0c7","./api/system/user.js":"c0c7","./api/user":"c24f","./api/user.js":"c24f","./api/workflow/processDefinition":"5780","./api/workflow/processDefinition.js":"5780","./api/workflow/workFlowRequest":"e0e0","./api/workflow/workFlowRequest.js":"e0e0","./assets/404_images/404.png":"a36b","./assets/404_images/404_cloud.png":"26fc","./assets/custom-theme/fonts/element-icons.ttf":"b400","./assets/custom-theme/fonts/element-icons.woff":"f9da","./assets/custom-theme/index.css":"0f0f","./assets/img/app_download.png":"e4f2","./assets/img/avatar.gif":"8efb","./assets/img/logo.png":"4ffd","./background":"fe77","./background.js":"fe77","./components/Breadcrumb":"6350","./components/Breadcrumb/":"6350","./components/Breadcrumb/index":"6350","./components/Breadcrumb/index.vue":"6350","./components/DictSelect":"8546","./components/DictSelect/":"8546","./components/DictSelect/index":"8546","./components/DictSelect/index.vue":"8546","./components/Hamburger":"4f1e","./components/Hamburger/":"4f1e","./components/Hamburger/index":"4f1e","./components/Hamburger/index.vue":"4f1e","./components/HeaderSearch":"144c","./components/HeaderSearch/":"144c","./components/HeaderSearch/index":"144c","./components/HeaderSearch/index.vue":"144c","./components/IconSelect":"5aee","./components/IconSelect/":"5aee","./components/IconSelect/index":"5aee","./components/IconSelect/index.vue":"5aee","./components/IconSelect/requireIcons":"fd5f","./components/IconSelect/requireIcons.js":"fd5f","./components/LangSelect":"1131","./components/LangSelect/":"1131","./components/LangSelect/index":"1131","./components/LangSelect/index.vue":"1131","./components/RightPanel":"7403","./components/RightPanel/":"7403","./components/RightPanel/index":"7403","./components/RightPanel/index.vue":"7403","./components/SvgIcon":"c00a","./components/SvgIcon/":"c00a","./components/SvgIcon/index":"c00a","./components/SvgIcon/index.vue":"c00a","./components/ThemePicker":"b18f","./components/ThemePicker/":"b18f","./components/ThemePicker/index":"b18f","./components/ThemePicker/index.vue":"b18f","./components/Tinymce":"8256","./components/Tinymce/":"8256","./components/Tinymce/index":"8256","./components/Tinymce/index.vue":"8256","./components/TreeTable":"8ad4","./components/TreeTable/":"8ad4","./components/TreeTable/eval":"0e1e","./components/TreeTable/eval.js":"0e1e","./components/TreeTable/index":"8ad4","./components/TreeTable/index.vue":"8ad4","./directive/permission":"4381","./directive/permission/":"4381","./directive/permission/index":"4381","./directive/permission/index.js":"4381","./directive/permission/permission":"e799","./directive/permission/permission.js":"e799","./icons":"985d","./icons/":"985d","./icons/index":"985d","./icons/index.js":"985d","./icons/svg/404.svg":"a14a","./icons/svg/articleEdit.svg":"d4ce","./icons/svg/banner.svg":"5544","./icons/svg/bug.svg":"1779","./icons/svg/build.svg":"84c3","./icons/svg/cfg.svg":"acad","./icons/svg/channel.svg":"c2cd","./icons/svg/chart.svg":"c829","./icons/svg/clipboard.svg":"bc35","./icons/svg/code.svg":"d7a5","./icons/svg/component.svg":"56d6","./icons/svg/contacts.svg":"149b","./icons/svg/coupon.svg":"e24d","./icons/svg/dashboard.svg":"f782","./icons/svg/date.svg":"235f","./icons/svg/dept.svg":"6f9d","./icons/svg/dict.svg":"1eba","./icons/svg/documentation.svg":"90fb","./icons/svg/download.svg":"4dae","./icons/svg/drag.svg":"9bbf","./icons/svg/druid.svg":"9f46","./icons/svg/edit.svg":"aa46","./icons/svg/education.svg":"ad1c","./icons/svg/email.svg":"cbb7","./icons/svg/excel.svg":"6599","./icons/svg/exit-fullscreen.svg":"dbc7","./icons/svg/eye-open.svg":"d7ec","./icons/svg/file.svg":"b8b2","./icons/svg/form.svg":"eb1b","./icons/svg/fullscreen.svg":"9921","./icons/svg/goods.svg":"7421","./icons/svg/icon.svg":"9d91","./icons/svg/international.svg":"17df","./icons/svg/job.svg":"52d5","./icons/svg/language.svg":"2580","./icons/svg/link.svg":"18f0","./icons/svg/list.svg":"3289","./icons/svg/lock.svg":"ab00","./icons/svg/log.svg":"fea0","./icons/svg/logininfor.svg":"622a","./icons/svg/menu.svg":"bd3d","./icons/svg/message.svg":"47ff","./icons/svg/money.svg":"3046","./icons/svg/monitor.svg":"cdec","./icons/svg/nested.svg":"dcf8","./icons/svg/nested0.svg":"b517","./icons/svg/online.svg":"a3a7","./icons/svg/operation.svg":"1c17","./icons/svg/order.svg":"11ff","./icons/svg/password.svg":"2a3d","./icons/svg/password0.svg":"69b6","./icons/svg/pdf.svg":"f9a1","./icons/svg/people.svg":"d056","./icons/svg/peoples.svg":"2f11","./icons/svg/phone.svg":"dd82","./icons/svg/post.svg":"5c26","./icons/svg/processDefine.svg":"c389","./icons/svg/provider.svg":"74f7","./icons/svg/qq.svg":"1430","./icons/svg/search.svg":"8e8d","./icons/svg/sender.svg":"dff7","./icons/svg/server.svg":"cda5","./icons/svg/shopping.svg":"12a5","./icons/svg/shoppingCard.svg":"c6c1","./icons/svg/size.svg":"8644","./icons/svg/skill.svg":"096e","./icons/svg/star.svg":"708a","./icons/svg/start.svg":"2743","./icons/svg/swagger.svg":"0304","./icons/svg/system.svg":"30a9","./icons/svg/tab.svg":"8fb7","./icons/svg/table.svg":"47f1","./icons/svg/table0.svg":"e5bc","./icons/svg/task.svg":"771b","./icons/svg/template.svg":"dcbb","./icons/svg/theme.svg":"e534","./icons/svg/tool.svg":"3495","./icons/svg/tree-table.svg":"e7c8","./icons/svg/tree.svg":"93cd","./icons/svg/user.svg":"b3b5","./icons/svg/user0.svg":"1f6f","./icons/svg/validCode.svg":"48fd","./icons/svg/wechat.svg":"80da","./icons/svg/workFlowTask.svg":"5029","./icons/svg/workflow.svg":"3389","./icons/svg/zip.svg":"8aa6","./icons/svgo.yml":"260b","./lang":"9923","./lang/":"9923","./lang/en":"3fab","./lang/en.js":"3fab","./lang/index":"9923","./lang/index.js":"9923","./lang/zh":"9df6","./lang/zh.js":"9df6","./layout":"c1f7","./layout/":"c1f7","./layout/components":"cd4a","./layout/components/":"cd4a","./layout/components/AppMain":"1a4e","./layout/components/AppMain.vue":"1a4e","./layout/components/Navbar":"850b","./layout/components/Navbar.vue":"850b","./layout/components/Settings":"3160","./layout/components/Settings/":"3160","./layout/components/Settings/index":"3160","./layout/components/Settings/index.vue":"3160","./layout/components/Sidebar":"a04e","./layout/components/Sidebar/":"a04e","./layout/components/Sidebar/FixiOSBug":"5c70","./layout/components/Sidebar/FixiOSBug.js":"5c70","./layout/components/Sidebar/Item":"837c","./layout/components/Sidebar/Item.vue":"837c","./layout/components/Sidebar/Link":"a6e1","./layout/components/Sidebar/Link.vue":"a6e1","./layout/components/Sidebar/Logo":"c463","./layout/components/Sidebar/Logo.vue":"c463","./layout/components/Sidebar/SidebarItem":"119c","./layout/components/Sidebar/SidebarItem.vue":"119c","./layout/components/Sidebar/index":"a04e","./layout/components/Sidebar/index.vue":"a04e","./layout/components/TagsView":"baad","./layout/components/TagsView/":"baad","./layout/components/TagsView/ScrollPane":"b3d7","./layout/components/TagsView/ScrollPane.vue":"b3d7","./layout/components/TagsView/index":"baad","./layout/components/TagsView/index.vue":"baad","./layout/components/index":"cd4a","./layout/components/index.js":"cd4a","./layout/index":"c1f7","./layout/index.vue":"c1f7","./layout/mixin/ResizeHandler":"72c5","./layout/mixin/ResizeHandler.js":"72c5","./main":"56d7","./main.js":"56d7","./permission":"223d","./permission.js":"223d","./router":"a18c","./router/":"a18c","./router/index":"a18c","./router/index.js":"a18c","./settings":"83d6","./settings.js":"83d6","./store":"4360","./store/":"4360","./store/getters":"94d5","./store/getters.js":"94d5","./store/index":"4360","./store/index.js":"4360","./store/modules/app":"d9cd","./store/modules/app.js":"d9cd","./store/modules/settings":"0781","./store/modules/settings.js":"0781","./store/modules/tagsView":"7509","./store/modules/tagsView.js":"7509","./store/modules/user":"0f9a","./store/modules/user.js":"0f9a","./styles/common.scss":"1be0","./styles/element-ui.scss":"cf99","./styles/element-variables.scss":"24ab","./styles/index.scss":"b20f","./styles/mixin.scss":"f53a","./styles/sidebar.scss":"97e7","./styles/transition.scss":"9d1f","./styles/variables.scss":"cf1e","./utils":"ed08","./utils/":"ed08","./utils/auth":"5f87","./utils/auth.js":"5f87","./utils/get-page-title":"036d","./utils/get-page-title.js":"036d","./utils/i18n":"79fa","./utils/i18n.js":"79fa","./utils/index":"ed08","./utils/index.js":"ed08","./utils/request":"b775","./utils/request.js":"b775","./utils/route":"1628","./utils/route.js":"1628","./utils/utils":"fa7d","./utils/utils.js":"fa7d","./utils/validate":"61f7","./utils/validate.js":"61f7","./views/404":"8cdb","./views/404.vue":"8cdb","./views/account/profile":"c704","./views/account/profile.js":"c704","./views/account/profile.vue":"72c3","./views/cms/article":"9d25","./views/cms/article/":"9d25","./views/cms/article/article":"5eba","./views/cms/article/article.js":"5eba","./views/cms/article/edit":"41bb","./views/cms/article/edit.js":"41bb","./views/cms/article/edit.vue":"fbd4","./views/cms/article/index":"9d25","./views/cms/article/index.vue":"9d25","./views/cms/article/plugins":"f09f","./views/cms/article/plugins.js":"f09f","./views/cms/article/toolbar":"3ca5","./views/cms/article/toolbar.js":"3ca5","./views/cms/banner":"af42","./views/cms/banner/":"af42","./views/cms/banner/banner":"9894","./views/cms/banner/banner.js":"9894","./views/cms/banner/index":"af42","./views/cms/banner/index.vue":"af42","./views/cms/channel":"a62c","./views/cms/channel/":"a62c","./views/cms/channel/channel":"5a12","./views/cms/channel/channel.js":"5a12","./views/cms/channel/index":"a62c","./views/cms/channel/index.vue":"a62c","./views/cms/contacts":"e752","./views/cms/contacts/":"e752","./views/cms/contacts/contacts":"0886","./views/cms/contacts/contacts.js":"0886","./views/cms/contacts/index":"e752","./views/cms/contacts/index.vue":"e752","./views/cms/demo":"08ab","./views/cms/demo/":"08ab","./views/cms/demo/index":"08ab","./views/cms/demo/index.vue":"08ab","./views/cms/file":"10a4","./views/cms/file/":"10a4","./views/cms/file/file":"eb6d","./views/cms/file/file.js":"eb6d","./views/cms/file/index":"10a4","./views/cms/file/index.vue":"10a4","./views/dashboard":"9406","./views/dashboard/":"9406","./views/dashboard/dashboard":"ec09","./views/dashboard/dashboard.js":"ec09","./views/dashboard/index":"9406","./views/dashboard/index.vue":"9406","./views/document":"a85d","./views/document/":"a85d","./views/document/index":"a85d","./views/document/index.vue":"a85d","./views/login":"9ed6","./views/login/":"9ed6","./views/login/index":"9ed6","./views/login/index.vue":"9ed6","./views/login/login":"85ad","./views/login/login.js":"85ad","./views/login/login.scss":"8a9b","./views/message/message":"719d","./views/message/message/":"719d","./views/message/message/index":"719d","./views/message/message/index.vue":"719d","./views/message/message/t_message":"3bfc","./views/message/message/t_message.js":"3bfc","./views/message/sender":"74cd","./views/message/sender/":"74cd","./views/message/sender/index":"74cd","./views/message/sender/index.vue":"74cd","./views/message/sender/t_message_sender":"8710","./views/message/sender/t_message_sender.js":"8710","./views/message/template":"80b1","./views/message/template/":"80b1","./views/message/template/index":"80b1","./views/message/template/index.vue":"80b1","./views/message/template/t_message_template":"e993","./views/message/template/t_message_template.js":"e993","./views/operation/api":"2153","./views/operation/api/":"2153","./views/operation/api/index":"2153","./views/operation/api/index.vue":"2153","./views/operation/druid":"4b90","./views/operation/druid/":"4b90","./views/operation/druid/index":"4b90","./views/operation/druid/index.vue":"4b90","./views/operation/log":"1393","./views/operation/log/":"1393","./views/operation/log/index":"1393","./views/operation/log/index.vue":"1393","./views/operation/log/log":"4782","./views/operation/log/log.js":"4782","./views/operation/loginLog":"4eb5","./views/operation/loginLog/":"4eb5","./views/operation/loginLog/index":"4eb5","./views/operation/loginLog/index.vue":"4eb5","./views/operation/loginLog/loginLog":"db65","./views/operation/loginLog/loginLog.js":"db65","./views/redirect":"ef3c","./views/redirect/":"ef3c","./views/redirect/index":"ef3c","./views/redirect/index.vue":"ef3c","./views/system/cfg":"bc89","./views/system/cfg/":"bc89","./views/system/cfg/cfg":"bc4f","./views/system/cfg/cfg.js":"bc4f","./views/system/cfg/index":"bc89","./views/system/cfg/index.vue":"bc89","./views/system/coupon":"5740","./views/system/coupon/":"5740","./views/system/coupon/coupon":"d597","./views/system/coupon/coupon.js":"d597","./views/system/coupon/index":"5740","./views/system/coupon/index.vue":"5740","./views/system/dept":"5cfa","./views/system/dept/":"5cfa","./views/system/dept/dept":"56f7","./views/system/dept/dept.js":"56f7","./views/system/dept/index":"5cfa","./views/system/dept/index.vue":"5cfa","./views/system/dict":"046a","./views/system/dict/":"046a","./views/system/dict/dict":"4c1f","./views/system/dict/dict.js":"4c1f","./views/system/dict/index":"046a","./views/system/dict/index.vue":"046a","./views/system/goods":"16ed","./views/system/goods/":"16ed","./views/system/goods/goods":"9f14","./views/system/goods/goods.js":"9f14","./views/system/goods/index":"16ed","./views/system/goods/index.vue":"16ed","./views/system/menu":"f794","./views/system/menu/":"f794","./views/system/menu/index":"f794","./views/system/menu/index.vue":"f794","./views/system/menu/menu":"020c","./views/system/menu/menu.js":"020c","./views/system/order":"a66b","./views/system/order/":"a66b","./views/system/order/index":"a66b","./views/system/order/index.vue":"a66b","./views/system/order/order":"1b4e","./views/system/order/order.js":"1b4e","./views/system/provider":"f7fe","./views/system/provider/":"f7fe","./views/system/provider/index":"f7fe","./views/system/provider/index.vue":"f7fe","./views/system/provider/provider":"deff","./views/system/provider/provider.js":"deff","./views/system/role":"70eb","./views/system/role/":"70eb","./views/system/role/index":"70eb","./views/system/role/index.vue":"70eb","./views/system/role/role":"30b0","./views/system/role/role.js":"30b0","./views/system/task":"6133","./views/system/task/":"6133","./views/system/task/index":"6133","./views/system/task/index.vue":"6133","./views/system/task/log":"4008","./views/system/task/log.js":"4008","./views/system/task/task":"1903","./views/system/task/task.js":"1903","./views/system/task/taskLog":"3914","./views/system/task/taskLog.vue":"3914","./views/system/user":"1f34","./views/system/user/":"1f34","./views/system/user/index":"1f34","./views/system/user/index.vue":"1f34","./views/system/user/user":"d43a","./views/system/user/user.js":"d43a","./views/workflow/processDefinition":"adbb","./views/workflow/processDefinition/":"adbb","./views/workflow/processDefinition/index":"adbb","./views/workflow/processDefinition/index.vue":"adbb","./views/workflow/processDefinition/processDefinition":"0c56","./views/workflow/processDefinition/processDefinition.js":"0c56","./views/workflow/task":"5b9a","./views/workflow/task/":"5b9a","./views/workflow/task/index":"5b9a","./views/workflow/task/index.vue":"5b9a","./views/workflow/task/task":"1232","./views/workflow/task/task.js":"1232","./views/workflow/workFlowRequest":"8ba8","./views/workflow/workFlowRequest/":"8ba8","./views/workflow/workFlowRequest/index":"8ba8","./views/workflow/workFlowRequest/index.vue":"8ba8","./views/workflow/workFlowRequest/workFlowRequest":"3ba2","./views/workflow/workFlowRequest/workFlowRequest.js":"3ba2"};function a(e){var t=r(e);return s(t)}function r(e){var t=i[e];if(!(t+1)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return t}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id="a8ec"},aa5a:function(e,t,s){"use strict";s("4c4f")},aace:function(e,t,s){},ab5f:function(e,t,s){"use strict";s("6954")},adbb:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",[s("el-col",{attrs:{span:24}},[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/workflow/process/definition/edit"],expression:"['/workflow/process/definition/edit']"}],attrs:{type:"success",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return e.onlineDrawingProcess(t)}}},[e._v(e._s(e.$t("button.add")))])],1)],1)],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[s("el-table-column",{attrs:{label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.name)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"标识"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.key)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"部署id"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.deploymentId)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"流程资源"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.resourceName)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(s){return e.onlineModificationProcess(t.row)}}},[e._v(e._s(e.$t("button.view")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/workflow/process/definition/delete"],expression:"['/workflow/process/definition/delete']"}],attrs:{type:"text",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(s){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("button.delete")))])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100,500],"page-size":e.listQuery.limit,total:e.total},on:{"size-change":e.changeSize,"current-change":e.fetchPage,"prev-click":e.fetchPrev,"next-click":e.fetchNext}}),e._v(" "),s("el-dialog",{attrs:{visible:e.processDefinitionForm.visible,title:e.processDefinitionForm.title,fullscreen:!0,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.processDefinitionForm,"visible",t)},close:e.closeDrawingWindow}},[s("div",{staticStyle:{position:"relative",height:"100%"}},[s("iframe",{attrs:{id:"iframe",src:e.processDefinitionForm.modelerUrl,frameborder:"0",width:"100%",height:"600px",scrolling:"auto"}})])]),e._v(" "),s("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,width:"70%"},on:{"update:visible":function(t){e.formVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"名称"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"标识"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.key,callback:function(t){e.$set(e.form,"key",t)},expression:"form.key"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"版本号"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.version,callback:function(t){e.$set(e.form,"version",t)},expression:"form.version"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"部署id"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.deploymentId,callback:function(t){e.$set(e.form,"deploymentId",t)},expression:"form.deploymentId"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"流程资源"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.resourceName,callback:function(t){e.$set(e.form,"resourceName",t)},expression:"form.resourceName"}})],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("button.submit")))]),e._v(" "),s("el-button",{nativeOn:{click:function(t){e.formVisible=!1}}},[e._v(e._s(e.$t("button.cancel")))])],1)],1)],1)],1)},a=[],r=s("5780"),n=s("4381"),o=s("5f87"),l={name:"processDefinition",directives:{permission:n["default"]},data(){return{formVisible:!1,formTitle:"添加流程定义",isAdd:!0,form:{name:"",key:"",version:"",deploymentId:"",resourceName:"",id:""},processDefinitionForm:{title:"",modelerUrl:"",visible:!1},listQuery:{page:1,limit:20,id:void 0},total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},computed:{rules(){return{}}},created(){this.init()},methods:{init(){this.fetchData(),localStorage.setItem("Authorization",Object(o["getToken"])())},fetchData(){this.listLoading=!0,r["default"].getList(this.listQuery).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.fetchData()},reset(){this.listQuery.id="",this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={name:"",key:"",version:"",deploymentId:"",resourceName:"",id:""}},add(){this.formTitle="添加流程定义",this.formVisible=!0,this.isAdd=!0,void 0!==this.$refs["form"]&&this.$refs["form"].resetFields()},onlineDrawingProcess(){this.processDefinitionForm.title="编辑流程图",this.processDefinitionForm.visible=!0,localStorage.setItem("VUE_APP_BASE_API","http://10.15.120.205:8080"),this.processDefinitionForm.modelerUrl="/bpmnjs/index.html?type=addBpmn"},onlineModificationProcess(e){this.processDefinitionForm.title="查看流程图",this.processDefinitionForm.visible=!0,localStorage.setItem("VUE_APP_BASE_API","http://10.15.120.205:8080"),this.processDefinitionForm.modelerUrl="/bpmnjs/index.html?type=lookBpmn&deploymentFileUUID="+e.deploymentId+"&deploymentName="+encodeURI(e.resourceName)},closeDrawingWindow(){console.log("关闭窗口"),this.fetchData()},save(){this.$refs["form"].validate(e=>{if(!e)return!1;{const e={id:this.form.id,name:this.form.name,key:this.form.key,version:this.form.version,deploymentId:this.form.deploymentId,resourceName:this.form.resourceName};e.id?r["default"].update(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1}):r["default"].add(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1})}})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},editItem(e){this.selRow=e,this.edit()},edit(){if(this.checkSel()){this.isAdd=!1;let e=Object.assign({},this.selRow);this.form=e,this.formTitle="编辑流程定义",this.formVisible=!0,void 0!==this.$refs["form"]&&this.$refs["form"].resetFields()}},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm(this.$t("common.deleteConfirm"),this.$t("common.tooltip"),{confirmButtonText:this.$t("button.submit"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then(()=>{r["default"].remove(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}}}},c=l,u=(s("0d1b"),s("2877")),d=Object(u["a"])(c,i,a,!1,null,"79d9cf0c",null);t["default"]=d.exports},af42:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:6}},[s("el-input",{attrs:{size:"mini",placeholder:"标题"},model:{value:e.listQuery.title,callback:function(t){e.$set(e.listQuery,"title",t)},expression:"listQuery.title"}})],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-search"},nativeOn:{click:function(t){return e.search(t)}}},[e._v(e._s(e.$t("button.search")))]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(e._s(e.$t("button.reset")))])],1)],1),e._v(" "),s("br"),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/banner/edit"],expression:"['/banner/edit']"}],attrs:{type:"success",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return e.add(t)}}},[e._v(e._s(e.$t("button.add")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/banner/remove"],expression:"['/banner/remove']"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(t){return e.remove(t)}}},[e._v(e._s(e.$t("button.delete")))])],1)],1)],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[s("el-table-column",{attrs:{label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.id)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.title)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"类别"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.type)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"url"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.url)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("img",{staticStyle:{width:"200px"},attrs:{src:e.row.img}})]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/banner/remove"],expression:"['/banner/remove']"}],attrs:{type:"text",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(s){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("button.delete")))])]}}])})],1),e._v(" "),s("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,width:"70%"},on:{"update:visible":function(t){e.formVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"标题",prop:"title"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"url",prop:"url"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"类型"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.options,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"banner图片"}},[s("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"false",action:e.uploadUrl,headers:e.uploadHeaders,"before-upload":e.handleBeforeUpload,"on-success":e.handleUploadSuccess}},[s("i",{staticClass:"el-icon-upload"}),e._v(" "),s("div",{staticClass:"el-upload__text"},[e._v("上传图片")])])],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("button.submit")))]),e._v(" "),s("el-button",{nativeOn:{click:function(t){e.formVisible=!1}}},[e._v(e._s(e.$t("button.cancel")))])],1)],1)],1)],1)},a=[],r=s("3432"),n=s("5f87"),o=s("5c96"),l=s("fa7d"),c=s("4381"),u={name:"banner",directives:{permission:c["default"]},data(){return{uploadUrl:"",uploadFileId:"",uploadHeaders:{Authorization:""},loadingInstance:{},formVisible:!1,formTitle:"添加banner",deptList:[],isAdd:!0,options:[{label:"首页",value:"index"},{label:"新闻",value:"news"},{label:"产品",value:"product"},{label:"解决方案",value:"solution"},{label:"案例",value:"case"}],form:{id:"",title:"",url:"",img:"",idFile:"",type:"index"},listQuery:{title:void 0},list:null,listLoading:!0,selRow:{}}},computed:{rules(){return{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],url:[{required:!0,message:"URL不能为空",trigger:"blur"}]}}},created(){this.init()},methods:{init(){this.uploadUrl=Object(l["getApiUrl"])()+"/file",this.uploadHeaders["Authorization"]=Object(n["getToken"])(),this.fetchData()},fetchData(){this.listLoading=!0,Object(r["getList"])(this.listQuery).then(e=>{for(var t in this.list=e.data,this.list){let e=this.list[t];e.img=Object(l["getApiUrl"])()+"/file/getImgStream?idFile="+e.idFile,console.log(e)}this.listLoading=!1})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.title="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.getList()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={id:"",title:"",url:"",idFile:this.uploadFileId,type:""}},add(){this.resetForm(),this.formTitle="添加banner",this.formVisible=!0,this.isAdd=!0},save(){this.$refs["form"].validate(e=>{if(!e)return!1;Object(r["save"])({id:this.form.id,title:this.form.title,url:this.form.url,idFile:this.uploadFileId,type:this.form.type}).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm(this.$t("common.deleteConfirm"),this.$t("common.tooltip"),{confirmButtonText:this.$t("button.submit"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then(()=>{Object(r["remove"])(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData()})}).catch(()=>{})}},handleBeforeUpload(){if(""!==this.uploadFileId)return this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1;this.loadingInstance=o["Loading"].service({lock:!0,text:this.$t("common.uploading"),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})},handleUploadSuccess(e,t){this.loadingInstance.close(),2e4===e.code?(console.log(e.data),this.uploadFileId=e.data.id,this.form.fileName=e.data.originalFileName):this.$message({message:this.$t("common.uploadError"),type:"error"})}}},d=u,m=(s("f6e0"),s("2877")),h=Object(m["a"])(d,i,a,!1,null,"03a2aae8",null);t["default"]=h.exports},b18f:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-color-picker",{staticClass:"theme-picker",attrs:{predefine:["#409EFF","#1890ff","#304156","#212121","#11a983","#13c2c2","#6959CD","#f5222d"],"popper-class":"theme-picker-dropdown"},model:{value:e.theme,callback:function(t){e.theme=t},expression:"theme"}})},a=[],r=(s("6b54"),s("ac6a"),s("3b2b"),s("a481"),s("1da1"));const n=s("f6f8").version,o="#409EFF";var l={data(){return{chalk:"",theme:""}},computed:{defaultTheme(){return this.$store.state.settings.theme}},watch:{defaultTheme:{handler:function(e,t){this.theme=e},immediate:!0},theme(e){var t=this;return Object(r["a"])((function*(){const s=t.chalk?t.theme:o;if("string"!==typeof e)return;const i=t.getThemeCluster(e.replace("#","")),a=t.getThemeCluster(s.replace("#",""));console.log(i,a);const r=t.$message({message:"  Compiling the theme",customClass:"theme-message",type:"success",duration:0,iconClass:"el-icon-loading"}),l=(e,s)=>()=>{const a=t.getThemeCluster(o.replace("#","")),r=t.updateStyle(t[e],a,i);let n=document.getElementById(s);n||(n=document.createElement("style"),n.setAttribute("id",s),document.head.appendChild(n)),n.innerText=r};if(!t.chalk){const e=`https://unpkg.com/element-ui@${n}/lib/theme-chalk/index.css`;yield t.getCSSString(e,"chalk")}const c=l("chalk","chalk-style");c();const u=[].slice.call(document.querySelectorAll("style")).filter(e=>{const t=e.innerText;return new RegExp(s,"i").test(t)&&!/Chalk Variables/.test(t)});u.forEach(e=>{const s=e.innerText;"string"===typeof s&&(e.innerText=t.updateStyle(s,a,i))}),t.$emit("change",e),r.close()}))()}},methods:{updateStyle(e,t,s){let i=e;return t.forEach((e,t)=>{i=i.replace(new RegExp(e,"ig"),s[t])}),i},getCSSString(e,t){return new Promise(s=>{const i=new XMLHttpRequest;i.onreadystatechange=()=>{4===i.readyState&&200===i.status&&(this[t]=i.responseText.replace(/@font-face{[^}]+}/,""),s())},i.open("GET",e),i.send()})},getThemeCluster(e){const t=(e,t)=>{let s=parseInt(e.slice(0,2),16),i=parseInt(e.slice(2,4),16),a=parseInt(e.slice(4,6),16);return 0===t?[s,i,a].join(","):(s+=Math.round(t*(255-s)),i+=Math.round(t*(255-i)),a+=Math.round(t*(255-a)),s=s.toString(16),i=i.toString(16),a=a.toString(16),`#${s}${i}${a}`)},s=(e,t)=>{let s=parseInt(e.slice(0,2),16),i=parseInt(e.slice(2,4),16),a=parseInt(e.slice(4,6),16);return s=Math.round((1-t)*s),i=Math.round((1-t)*i),a=Math.round((1-t)*a),s=s.toString(16),i=i.toString(16),a=a.toString(16),`#${s}${i}${a}`},i=[e];for(let a=0;a<=9;a++)i.push(t(e,Number((a/10).toFixed(2))));return i.push(s(e,.1)),i}}},c=l,u=(s("06c2"),s("2877")),d=Object(u["a"])(c,i,a,!1,null,null,null);t["default"]=d.exports},b3b6:function(e,t,s){},b400:function(e,t,s){e.exports=s.p+"static/fonts/element-icons.27c72091.ttf"},b89f:function(e,t,s){},b8ae:function(e,t,s){"use strict";s("4cf4")},bc4f:function(e,t,s){"use strict";s.r(t);var i=s("7b3ee"),a=s("fa7d"),r=s("4381");t["default"]={name:"cfg",directives:{permission:r["default"]},data(){return{formVisible:!1,formTitle:this.$t("config.add"),isAdd:!0,form:{id:"",cfgName:"",cfgValue:"",cfgDesc:""},listQuery:{page:1,limit:20,cfgName:void 0,cfgValue:void 0},dialog:{show:!1,title:"",content:""},total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},computed:{rules(){return{cfgName:[{required:!0,message:this.$t("config.name")+this.$t("common.isRequired"),trigger:"blur"},{min:3,max:2e3,message:this.$t("config.name")+this.$t("config.lengthValidation"),trigger:"blur"}],cfgValue:[{required:!0,message:this.$t("config.value")+this.$t("common.isRequired"),trigger:"blur"},{min:1,max:2e3,message:this.$t("config.value")+this.$t("config.lengthValidation"),trigger:"blur"}]}}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,i["default"].getList(this.listQuery).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.cfgName="",this.listQuery.cfgValue="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={id:"",cfgName:"",cfgValue:"",cfgDesc:""}},add(){this.resetForm(),this.formTitle=this.$t("config.add"),this.formVisible=!0,this.isAdd=!0},save(){this.$refs["form"].validate(e=>{if(!e)return!1;{const e={id:this.form.id,cfgName:this.form.cfgName,cfgValue:this.form.cfgValue,cfgDesc:this.form.cfgDesc};this.form.id?i["default"].update(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1}):i["default"].add(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1})}})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},editItem(e){this.selRow=Object.assign({},e),this.edit()},edit(){this.checkSel()&&(this.isAdd=!1,this.form=this.selRow,this.formTitle=this.$t("config.edit"),this.formVisible=!0)},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm(this.$t("common.deleteConfirm"),this.$t("common.tooltip"),{confirmButtonText:this.$t("button.submit"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then(()=>{i["default"].remove(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData()})}).catch(()=>{})}},exportXls(){i["default"].exportXls(this.listQuery).then(e=>{window.location.href=Object(a["getApiUrl"])()+"/file/download?idFile="+e.data.id})},showCfgValDialog(e){this.dialog.content=e.cfgValue,this.dialog.title=e.cfgName,this.dialog.show=!0}}}},bc89:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:e.$t("config.name")},model:{value:e.listQuery.cfgName,callback:function(t){e.$set(e.listQuery,"cfgName",t)},expression:"listQuery.cfgName"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:e.$t("config.value")},model:{value:e.listQuery.cfgValue,callback:function(t){e.$set(e.listQuery,"cfgValue",t)},expression:"listQuery.cfgValue"}})],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-search"},nativeOn:{click:function(t){return e.search(t)}}},[e._v(e._s(e.$t("button.search")))]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(e._s(e.$t("button.reset")))])],1)],1),e._v(" "),s("br"),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/cfg/add"],expression:"['/cfg/add']"}],attrs:{type:"success",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return e.add(t)}}},[e._v(e._s(e.$t("button.add")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/cfg/update"],expression:"['/cfg/update']"}],attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(t){return e.edit(t)}}},[e._v(e._s(e.$t("button.edit")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/cfg/delete"],expression:"['/cfg/delete']"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(t){return e.remove(t)}}},[e._v(e._s(e.$t("button.delete")))]),e._v(" "),s("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-document"},nativeOn:{click:function(t){return e.exportXls(t)}}},[e._v(e._s(e.$t("button.export")))])],1)],1)],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[s("el-table-column",{attrs:{label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.id)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:e.$t("config.name")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.cfgName)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:e.$t("config.value")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.cfgValue.length>50?s("el-button",{attrs:{type:"text",title:"点击查看全部参数值"},on:{click:function(s){return e.showCfgValDialog(t.row)}}},[e._v(e._s(t.row.cfgValue.substr(0,25)))]):s("div",[e._v(" "+e._s(t.row.cfgValue))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:e.$t("config.descript")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.cfgDesc)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/cfg/update"],expression:"['/cfg/update']"}],attrs:{type:"text",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(s){return e.editItem(t.row)}}},[e._v(e._s(e.$t("button.edit")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/cfg/delete"],expression:"['/cfg/delete']"}],attrs:{type:"text",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(s){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("button.delete")))])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100,500],"page-size":e.listQuery.limit,total:e.total,"current-page":e.listQuery.page},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"page",t)},"update:current-page":function(t){return e.$set(e.listQuery,"page",t)},"size-change":e.changeSize,"current-change":e.fetchPage,"prev-click":e.fetchPrev,"next-click":e.fetchNext}}),e._v(" "),s("el-dialog",{attrs:{title:e.dialog.title,visible:e.dialog.show,width:"50%"},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[s("span",[e._v(e._s(e.dialog.content))]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{nativeOn:{click:function(t){e.dialog.show=!1}}},[e._v(e._s(e.$t("button.close")))])],1)]),e._v(" "),s("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,width:"70%"},on:{"update:visible":function(t){e.formVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("config.name"),prop:"cfgName"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.cfgName,callback:function(t){e.$set(e.form,"cfgName",t)},expression:"form.cfgName"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("config.descript"),prop:"cfgDesc"}},[s("el-input",{model:{value:e.form.cfgDesc,callback:function(t){e.$set(e.form,"cfgDesc",t)},expression:"form.cfgDesc"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:e.$t("config.value"),prop:"cfgValue"}},[s("el-input",{attrs:{minlength:"1",type:"textarea",rows:5},model:{value:e.form.cfgValue,callback:function(t){e.$set(e.form,"cfgValue",t)},expression:"form.cfgValue"}})],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("button.submit")))]),e._v(" "),s("el-button",{nativeOn:{click:function(t){e.formVisible=!1}}},[e._v(e._s(e.$t("button.cancel")))])],1)],1)],1)],1)},a=[],r=s("7b3ee"),n=s("fa7d"),o=s("4381"),l={name:"cfg",directives:{permission:o["default"]},data(){return{formVisible:!1,formTitle:this.$t("config.add"),isAdd:!0,form:{id:"",cfgName:"",cfgValue:"",cfgDesc:""},listQuery:{page:1,limit:20,cfgName:void 0,cfgValue:void 0},dialog:{show:!1,title:"",content:""},total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},computed:{rules(){return{cfgName:[{required:!0,message:this.$t("config.name")+this.$t("common.isRequired"),trigger:"blur"},{min:3,max:2e3,message:this.$t("config.name")+this.$t("config.lengthValidation"),trigger:"blur"}],cfgValue:[{required:!0,message:this.$t("config.value")+this.$t("common.isRequired"),trigger:"blur"},{min:1,max:2e3,message:this.$t("config.value")+this.$t("config.lengthValidation"),trigger:"blur"}]}}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,r["default"].getList(this.listQuery).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.cfgName="",this.listQuery.cfgValue="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={id:"",cfgName:"",cfgValue:"",cfgDesc:""}},add(){this.resetForm(),this.formTitle=this.$t("config.add"),this.formVisible=!0,this.isAdd=!0},save(){this.$refs["form"].validate(e=>{if(!e)return!1;{const e={id:this.form.id,cfgName:this.form.cfgName,cfgValue:this.form.cfgValue,cfgDesc:this.form.cfgDesc};this.form.id?r["default"].update(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1}):r["default"].add(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1})}})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},editItem(e){this.selRow=Object.assign({},e),this.edit()},edit(){this.checkSel()&&(this.isAdd=!1,this.form=this.selRow,this.formTitle=this.$t("config.edit"),this.formVisible=!0)},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm(this.$t("common.deleteConfirm"),this.$t("common.tooltip"),{confirmButtonText:this.$t("button.submit"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then(()=>{r["default"].remove(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData()})}).catch(()=>{})}},exportXls(){r["default"].exportXls(this.listQuery).then(e=>{window.location.href=Object(n["getApiUrl"])()+"/file/download?idFile="+e.data.id})},showCfgValDialog(e){this.dialog.content=e.cfgValue,this.dialog.title=e.cfgName,this.dialog.show=!0}}},c=l,u=(s("1e97"),s("2877")),d=Object(u["a"])(c,i,a,!1,null,"0de701de",null);t["default"]=d.exports},be00:function(e,t,s){},bf0d:function(e,t,s){"use strict";s("4df8")},c0c7:function(e,t,s){"use strict";s.r(t),s.d(t,"getList",(function(){return a})),s.d(t,"saveUser",(function(){return r})),s.d(t,"editUser",(function(){return n})),s.d(t,"remove",(function(){return o})),s.d(t,"setRole",(function(){return l})),s.d(t,"changeStatus",(function(){return c})),s.d(t,"resetPassword",(function(){return u}));var i=s("b775");function a(e){return Object(i["default"])({url:"/user/queryPage",method:"get",params:e})}function r(e){return Object(i["default"])({url:"/user/add",method:"post",data:e})}function n(e){return Object(i["default"])({url:"/user/update",method:"put",data:e})}function o(e){return Object(i["default"])({url:"/user/delete/"+e,method:"delete"})}function l(e){return Object(i["default"])({url:"/user/setRole",method:"post",params:e})}function c(e){return Object(i["default"])({url:"/user/changeStatus",method:"get",params:{userId:e}})}function u(e){return Object(i["default"])({url:"/user/resetPassword",method:"post",params:{userId:e}})}},c311:function(e,t,s){"use strict";s("9850a")},c4b4:function(e,t,s){},c57f:function(e,t,s){"use strict";s("fc32")},c704:function(e,t,s){"use strict";s.r(t);s("a457");var i=s("c24f");t["default"]={data(){return{activeName:"profile",user:{},reverse:!1,activities:[],form:{oldPassword:"",password:"",rePassword:""}}},mounted(){this.init()},methods:{init(){this.user=this.$store.state.user.profile},handleClick(e,t){},queryByUser(){},updatePwd(){this.$refs["form"].validate(e=>{if(!e)return!1;Object(i["updatePwd"])({oldPassword:this.form.oldPassword,password:this.form.password,rePassword:this.form.rePassword}).then(e=>{this.$message({message:"密码修改成功",type:"success"}),this.$store.dispatch("user/logout");const t=this;setTimeout((function(){t.$router.push("/login")}),1e3)}).catch(e=>{})})}}}},c8e0:function(e,t,s){"use strict";s("5fb0")},c926:function(e,t,s){},cb32:function(e,t,s){"use strict";s("559a")},cd4c:function(e,t,s){"use strict";s("293a")},cd8f:function(e,t,s){"use strict";s("665b")},cecb:function(e,t,s){"use strict";s("131e")},cf99:function(e,t,s){},d3f45:function(e,t,s){},d43a:function(e,t,s){"use strict";s.r(t);var i=s("c0c7"),a=s("5f87");const r=["admin","user"];t["default"]={name:"mgr",data(){return{roleArray:r,roleDialog:{visible:!1,roles:[{roleId:1,roleName:"admin"},{roleId:2,roleName:"user"}],checkedRoleKeys:[],defaultProps:{id:"roleId",label:"roleName"}},editDialog:{visible:!1,title:"修改用户"},formVisible:!1,formTitle:"添加用户",roleSet:[],form:{username:"",password:"",nickname:"",phone:"",email:"",avatar:""},rules:{username:[{required:!0,message:"请输入登录账号",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],password:[{required:!1,message:"请输入登录密码",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],nickname:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],phone:[{required:!1,message:"请输入phone",trigger:"blur"}],email:[{required:!1,message:"请输入email",trigger:"blur"}]},listQuery:{page:1,limit:5,userNmae:void 0,nickName:void 0,phone:void 0,email:void 0},avatarloading:!1,backImgloading:!1,total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(i["getList"])(this.listQuery).then(e=>{this.list=e.data.dataCurrentPage,this.listLoading=!1,this.total=e.data.totalCount})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.userNmae="",this.listQuery.nickName="",this.listQuery.page=1,this.listQuery.phone="",this.listQuery.email="",this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={username:"",password:"",nickname:"",phone:"",email:"",avatar:"",backImg:"",signature:"",enable:!0}},add(){this.resetForm(),this.formTitle="添加用户",this.formVisible=!0},changeUserStatus(e,t){var s={userId:e,enable:t};Object(i["changeStatus"])(s).then(()=>{this.$notify({title:"成功",message:"修改成功",type:"success"}),this.fetchData()}).catch(()=>{this.fetchData()})},saveUser(){var e=this;this.$refs["form"].validate(t=>{if(!t)return!1;var s=e.form,a=[];for(const e of this.roleSet)"admin"==e?a.push({roleId:1}):"user"==e&&a.push({roleId:2});s.roleSet=a,console.log(s),Object(i["saveUser"])(s).then(e=>{this.$message({message:"提交成功",type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},editItem(e){this.selRow=Object.assign({},e),this.edit()},edit(){if(this.checkSel()){let e=Object.assign({},this.selRow);e.password="";let t={id:e.id,username:e.username,password:"",nickname:e.nickname,phone:e.phone,email:e.email,avatar:e.avatar,roleSet:e.roleSet};this.form=t,this.formTitle="修改用户",this.editDialog.visible=!0}},editUser(){var e=this;this.$refs["form"].validate(t=>{if(!t)return!1;var s=e.form,a=[];for(const e of this.roleSet)"admin"==e?a.push({roleId:1}):"user"==e&&a.push({roleId:2});s.roleSet=a,console.log(s),Object(i["editUser"])(s).then(e=>{this.$message({message:"提交成功",type:"success"}),this.fetchData(),this.formVisible=!1})})},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;console.log(this.selRow),this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(i["remove"])(e).then(e=>{this.$message({message:"删除成功",type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}},beforeImgUpload(e,t){"avatar"==t?this.avatarloading=!0:this.backImgloading=!0;const s="image/jpeg"===e.type||"image/gif"===e.type||"image/png"===e.type||"image/jpg"===e.type,i=e.size/1024/1024/1024/1024<4;return s||(console.log("上传头像图片格式不支持"),this.$message.error("上传头像图片格式不支持")),i||(console.log("上传头像图片大小不能超过 4MB!"),this.$message.error("上传头像图片大小不能超过 4MB!")),console.log(s&&i),s&&i},handleAvatarSuccess(e){200==e.code?(this.form.avatar=e.data,this.$notify({title:"成功",message:"头像上传成功",type:"success"}),this.avatarloading=!1):(this.$message({message:e.message,type:"error"}),this.avatarloading=!1)},handleBackImgSuccess(e){0==e.code?(this.form.backImg=e.data,this.$notify({title:"成功",message:"头像上传成功",type:"success"}),this.backImgloading=!1):(this.$message({message:e.message,type:"error"}),this.backImgloading=!1)},resetPwd(){if(this.checkSel()){var e=this.selRow.id;this.$confirm("将密码重置为maiqu?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(i["resetPassword"])(e).then(e=>{this.$message({message:"重置密码成功",type:"success"})}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}},openRoleItem(e){this.selRow=e,this.openRole()},openRole(){this.checkSel()&&(this.roleDialog.visible=!0)},setRole(){var e=this.$refs.roleTree.getCheckedKeys(),t="";for(var s in e)t+=e[s]+",";var a={userId:this.selRow.id,roleIds:t.slice(0,-1)};Object(i["setRole"])(a).then(e=>{this.roleDialog.visible=!1,this.fetchData(),this.$message({message:"提交成功",type:"success"})})}},computed:{token(){return{Authorization:Object(a["getToken"])()}}}}},d597:function(e,t,s){"use strict";s.r(t);var i=s("5f22"),a=s("5f87");const r=["SUPER_ADMIN","SYSTEM_ADMIN","VIP","USER"];t["default"]={name:"mgr",data(){return{roleArray:r,roleDialog:{visible:!1,roles:[{roleId:1,roleName:"SUPER_ADMIN"},{roleId:2,roleName:"SYSTEM_ADMIN"},{roleId:3,roleName:"VIP"},{roleId:4,roleName:"USER"}],checkedRoleKeys:[],defaultProps:{id:"roleId",label:"roleName"}},statusList:[{label:"启用",value:"1"},{label:"冻结",value:"2"}],formVisible:!1,formTitle:"添加用户",roleSet:[],form:{username:"",password:"",nickname:"",phone:"",email:"",avatar:"",backImg:"",signature:"从前从前,有个人爱你很久...",enable:!0},rules:{username:[{required:!0,message:"请输入登录账号",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],password:[{required:!1,message:"请输入登录密码",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],nickname:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],phone:[{required:!1,message:"请输入email",trigger:"blur"}],email:[{required:!1,message:"请输入email",trigger:"blur"}]},listQuery:{page:1,limit:5,userNmae:void 0,nickName:void 0,phone:void 0,email:void 0},avatarloading:!1,backImgloading:!1,total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(i["getList"])(this.listQuery).then(e=>{this.list=e.data.dataCurrentPage,this.listLoading=!1,this.total=e.data.totalCount})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.userNmae="",this.listQuery.nickName="",this.listQuery.page=1,this.listQuery.phone="",this.listQuery.email="",this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={username:"",password:"",nickname:"",phone:"",email:"",avatar:"",backImg:"",signature:"",enable:!0}},add(){this.resetForm(),this.formTitle="添加用户",this.formVisible=!0},changeUserStatus(e,t){var s={userId:e,enable:t};Object(i["changeStatus"])(s).then(()=>{this.$notify({title:"成功",message:"修改成功",type:"success"}),this.fetchData()}).catch(()=>{this.fetchData()})},saveUser(){var e=this;this.$refs["form"].validate(t=>{if(!t)return!1;var s=e.form,a=[];for(const e of this.roleSet)"SUPER_ADMIN"==e?a.push({roleId:1}):"SYSTEM_ADMIN"==e?a.push({roleId:2}):"VIP"==e?a.push({roleId:3}):a.push({roleId:4});s.roleSet=a,console.log(s),Object(i["saveUser"])(s).then(e=>{this.$message({message:"提交成功",type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},editItem(e){this.selRow=Object.assign({},e),this.edit()},edit(){if(this.checkSel()){let e=Object.assign({},this.selRow);e.password="";let t={id:e.id,username:e.username,password:"",nickname:e.nickname,phone:e.phone,email:e.email,signature:e.signature,avatar:e.avatar,backImg:e.backImg,roleSet:e.roleSet,enable:e.enable};this.form=t,this.formTitle="修改用户",this.formVisible=!0}},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(i["remove"])(e).then(e=>{this.$message({message:"删除成功",type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}},beforeImgUpload(e,t){"avatar"==t?this.avatarloading=!0:this.backImgloading=!0;const s="image/jpeg"===e.type||"image/gif"===e.type||"image/png"===e.type,i=e.size/1024/1024/1024/1024<4;return s||this.$message.error("上传头像图片只能是 JPG 格式!"),i||this.$message.error("上传头像图片大小不能超过 4MB!"),s&&i},handleAvatarSuccess(e){0==e.code?(this.form.avatar=e.data,this.$notify({title:"成功",message:"头像上传成功",type:"success"}),this.avatarloading=!1):(this.$message({message:e.message,type:"error"}),this.avatarloading=!1)},handleBackImgSuccess(e){0==e.code?(this.form.backImg=e.data,this.$notify({title:"成功",message:"头像上传成功",type:"success"}),this.backImgloading=!1):(this.$message({message:e.message,type:"error"}),this.backImgloading=!1)},resetPwd(){if(this.checkSel()){var e=this.selRow.id;this.$confirm("将密码重置为maiqu?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(i["resetPassword"])(e).then(e=>{this.$message({message:"重置密码成功",type:"success"})}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}},openRoleItem(e){this.selRow=e,this.openRole()},openRole(){this.checkSel()&&(this.roleDialog.visible=!0)},setRole(){var e=this.$refs.roleTree.getCheckedKeys(),t="";for(var s in e)t+=e[s]+",";var a={userId:this.selRow.id,roleIds:t.slice(0,-1)};Object(i["setRole"])(a).then(e=>{this.roleDialog.visible=!1,this.fetchData(),this.$message({message:"提交成功",type:"success"})})}},computed:{token(){return{Authorization:Object(a["getToken"])()}}}}},d967:function(e,t,s){"use strict";s.r(t),s.d(t,"getList",(function(){return a})),s.d(t,"saveUser",(function(){return r})),s.d(t,"remove",(function(){return n})),s.d(t,"setRole",(function(){return o})),s.d(t,"changeStatus",(function(){return l})),s.d(t,"resetPassword",(function(){return c}));var i=s("b775");function a(e){return Object(i["default"])({url:"/order/queryPage",method:"get",params:e})}function r(e){return Object(i["default"])({url:"/user",method:"post",params:e})}function n(e){return Object(i["default"])({url:"/user",method:"delete",params:{userId:e}})}function o(e){return Object(i["default"])({url:"/user/setRole",method:"post",params:e})}function l(e){return Object(i["default"])({url:"/user/changeStatus",method:"get",params:{userId:e}})}function c(e){return Object(i["default"])({url:"/user/resetPassword",method:"post",params:{userId:e}})}},db65:function(e,t,s){"use strict";s.r(t);var i=s("44368"),a=s("4381");t["default"]={name:"loginLog",directives:{permission:a["default"]},data(){return{listQuery:{page:1,limit:20,beginTime:void 0,endTime:void 0},total:0,list:null,listLoading:!0,selRow:{}}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(i["getList"])(this.listQuery).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.beginTime="",this.listQuery.endTime="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},clear(){this.$confirm("确定清空数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(i["clear"])().then(e=>{this.$message({message:"清空成功",type:"sucess"}),this.fetchData()})}).catch(()=>{})}}}},dde6:function(e,t,s){"use strict";s("1060")},ded0:function(e,t,s){"use strict";s.r(t),s.d(t,"getList",(function(){return a})),s.d(t,"save",(function(){return r})),s.d(t,"remove",(function(){return n}));var i=s("b775");function a(e){return Object(i["default"])({url:"/message/template/list",method:"get",params:e})}function r(e){return Object(i["default"])({url:"/message/template",method:"post",params:e})}function n(e){return Object(i["default"])({url:"/message/template",method:"delete",params:{id:e}})}},dee8:function(e,t,s){"use strict";s.r(t),s.d(t,"getList",(function(){return a}));var i=s("b775");function a(e){return Object(i["default"])({url:"/contacts/list",method:"get",params:e})}},deff:function(e,t,s){"use strict";s.r(t);var i=s("0aac"),a=s("5f87");const r=["SUPER_ADMIN","SYSTEM_ADMIN","VIP","USER"];t["default"]={name:"mgr",data(){return{roleArray:r,roleDialog:{visible:!1,roles:[{roleId:1,roleName:"SUPER_ADMIN"},{roleId:2,roleName:"SYSTEM_ADMIN"},{roleId:3,roleName:"VIP"},{roleId:4,roleName:"USER"}],checkedRoleKeys:[],defaultProps:{id:"roleId",label:"roleName"}},statusList:[{label:"启用",value:"1"},{label:"冻结",value:"2"}],formVisible:!1,formTitle:"添加用户",roleSet:[],form:{username:"",password:"",nickname:"",phone:"",email:"",avatar:"",backImg:"",signature:"从前从前,有个人爱你很久...",enable:!0},rules:{username:[{required:!0,message:"请输入登录账号",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],password:[{required:!1,message:"请输入登录密码",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],nickname:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],phone:[{required:!1,message:"请输入email",trigger:"blur"}],email:[{required:!1,message:"请输入email",trigger:"blur"}]},listQuery:{page:1,limit:5,userNmae:void 0,nickName:void 0,phone:void 0,email:void 0},avatarloading:!1,backImgloading:!1,total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(i["getList"])(this.listQuery).then(e=>{this.list=e.data.dataCurrentPage,this.listLoading=!1,this.total=e.data.totalCount})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.userNmae="",this.listQuery.nickName="",this.listQuery.page=1,this.listQuery.phone="",this.listQuery.email="",this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={username:"",password:"",nickname:"",phone:"",email:"",avatar:"",backImg:"",signature:"",enable:!0}},add(){this.resetForm(),this.formTitle="添加用户",this.formVisible=!0},changeUserStatus(e,t){var s={userId:e,enable:t};Object(i["changeStatus"])(s).then(()=>{this.$notify({title:"成功",message:"修改成功",type:"success"}),this.fetchData()}).catch(()=>{this.fetchData()})},saveUser(){var e=this;this.$refs["form"].validate(t=>{if(!t)return!1;var s=e.form,a=[];for(const e of this.roleSet)"SUPER_ADMIN"==e?a.push({roleId:1}):"SYSTEM_ADMIN"==e?a.push({roleId:2}):"VIP"==e?a.push({roleId:3}):a.push({roleId:4});s.roleSet=a,console.log(s),Object(i["saveUser"])(s).then(e=>{this.$message({message:"提交成功",type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},editItem(e){this.selRow=Object.assign({},e),this.edit()},edit(){if(this.checkSel()){let e=Object.assign({},this.selRow);e.password="";let t={id:e.id,username:e.username,password:"",nickname:e.nickname,phone:e.phone,email:e.email,signature:e.signature,avatar:e.avatar,backImg:e.backImg,roleSet:e.roleSet,enable:e.enable};this.form=t,this.formTitle="修改用户",this.formVisible=!0}},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(i["remove"])(e).then(e=>{this.$message({message:"删除成功",type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}},beforeImgUpload(e,t){"avatar"==t?this.avatarloading=!0:this.backImgloading=!0;const s="image/jpeg"===e.type||"image/gif"===e.type||"image/png"===e.type,i=e.size/1024/1024/1024/1024<4;return s||this.$message.error("上传头像图片只能是 JPG 格式!"),i||this.$message.error("上传头像图片大小不能超过 4MB!"),s&&i},handleAvatarSuccess(e){0==e.code?(this.form.avatar=e.data,this.$notify({title:"成功",message:"头像上传成功",type:"success"}),this.avatarloading=!1):(this.$message({message:e.message,type:"error"}),this.avatarloading=!1)},handleBackImgSuccess(e){0==e.code?(this.form.backImg=e.data,this.$notify({title:"成功",message:"头像上传成功",type:"success"}),this.backImgloading=!1):(this.$message({message:e.message,type:"error"}),this.backImgloading=!1)},resetPwd(){if(this.checkSel()){var e=this.selRow.id;this.$confirm("将密码重置为maiqu?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(i["resetPassword"])(e).then(e=>{this.$message({message:"重置密码成功",type:"success"})}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}},openRoleItem(e){this.selRow=e,this.openRole()},openRole(){this.checkSel()&&(this.roleDialog.visible=!0)},setRole(){var e=this.$refs.roleTree.getCheckedKeys(),t="";for(var s in e)t+=e[s]+",";var a={userId:this.selRow.id,roleIds:t.slice(0,-1)};Object(i["setRole"])(a).then(e=>{this.roleDialog.visible=!1,this.fetchData(),this.$message({message:"提交成功",type:"success"})})}},computed:{token(){return{Authorization:Object(a["getToken"])()}}}}},e0e0:function(e,t,s){"use strict";s.r(t);var i=s("b775");t["default"]={getList:function(e){return Object(i["default"])({url:"/workflow/request/list",method:"get",params:e})},getTasks:function(e){return Object(i["default"])({url:"/workflow/request/tasks",method:"get",params:e})},completeTask:function(e){return Object(i["default"])({url:"/workflow/request/completeTask",method:"post",params:e})},add:function(e){return Object(i["default"])({url:"/workflow/request",method:"post",params:e})},update:function(e){return Object(i["default"])({url:"/workflow/request",method:"PUT",params:e})},remove:function(e){return Object(i["default"])({url:"/workflow/request",method:"delete",params:{id:e}})}}},e171:function(e,t,s){},e28a:function(e,t,s){},e4f2:function(e,t,s){e.exports=s.p+"static/img/app_download.c05271f2.png"},e752:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:6}},[s("el-input",{attrs:{size:"mini",placeholder:"姓名"},model:{value:e.listQuery.userName,callback:function(t){e.$set(e.listQuery,"userName",t)},expression:"listQuery.userName"}})],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("el-input",{attrs:{size:"mini",placeholder:"手机号"},model:{value:e.listQuery.mobile,callback:function(t){e.$set(e.listQuery,"mobile",t)},expression:"listQuery.mobile"}})],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-date-picker",{attrs:{size:"mini",type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"邀约开始日期","end-placeholder":"邀约截至日期","value-format":"yyyyMMddHHmmss",align:"right"},model:{value:e.rangeDate,callback:function(t){e.rangeDate=t},expression:"rangeDate"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-search"},nativeOn:{click:function(t){return e.search(t)}}},[e._v(e._s(e.$t("button.search")))]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(e._s(e.$t("button.reset")))])],1)],1),e._v(" "),s("br")],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[s("el-table-column",{attrs:{label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.id)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"联系人"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.userName)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"联系手机"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.mobile)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"email"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.email)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"邀约时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.createTime)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.remark)+"\n      ")]}}])})],1),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100,500],"page-size":e.listQuery.limit,total:e.total,"current-page":e.listQuery.page},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"page",t)},"update:current-page":function(t){return e.$set(e.listQuery,"page",t)},"size-change":e.changeSize,"current-change":e.fetchPage,"prev-click":e.fetchPrev,"next-click":e.fetchNext}})],1)},a=[],r=s("dee8"),n={name:"contacts",data(){return{listQuery:{page:1,limit:20,userName:void 0,mobile:void 0,startDate:void 0,endDate:void 0},rangeDate:void 0,total:0,list:null,listLoading:!0,selRow:{},pickerOptions:{shortcuts:[{text:"最近一周",onClick(e){const t=new Date,s=new Date;s.setTime(s.getTime()-6048e5),e.$emit("pick",[s,t])}},{text:"最近一个月",onClick(e){const t=new Date,s=new Date;s.setTime(s.getTime()-2592e6),e.$emit("pick",[s,t])}},{text:"最近三个月",onClick(e){const t=new Date,s=new Date;s.setTime(s.getTime()-7776e6),e.$emit("pick",[s,t])}}]}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0;let e=this.listQuery;this.rangeDate&&(e["startDate"]=this.rangeDate[0],e["endDate"]=this.rangeDate[1]),Object(r["getList"])(e).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.userName=void 0,this.listQuery.mobile=void 0,this.listQuery.startDate=void 0,this.listQuery.endDate=void 0,this.rangeDate=void 0,this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e}}},o=n,l=(s("02b2"),s("2877")),c=Object(l["a"])(o,i,a,!1,null,"167ef0c4",null);t["default"]=c.exports},e799:function(e,t,s){"use strict";s.r(t);var i=s("4360");t["default"]={inserted(e,t,s){const a=t.value,r=i["default"].getters&&i["default"].getters.permissions;if(!(a&&a instanceof Array&&a.length>0))throw new Error("need roles! Like v-permission=\"['admin','editor']\"");{const t=a,s=r.some(e=>t.includes(e));s||e.parentNode&&e.parentNode.removeChild(e)}}}},e993:function(e,t,s){"use strict";s.r(t);var i=s("ded0"),a=s("0e42"),r=s("4381");t["default"]={name:"msgTpl",directives:{permission:r["default"]},data(){return{formVisible:!1,formTitle:"添加消息模板",isAdd:!0,form:{code:"",title:"",content:"",type:"",idMessageSender:"",remoteTplCode:"",id:""},sendList:[],listQuery:{page:1,limit:20,id:"",idMessageSender:"",title:""},total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData(),Object(a["queryAll"])().then(e=>{this.sendList=e.data})},fetchData(){this.listLoading=!0,Object(i["getList"])(this.listQuery).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.id="",this.listQuery.idMessageSender="",this.listQuery.title="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={code:"",title:"",content:"",type:0,idMessageSender:"",remoteTplCode:"",id:""}},add(){this.resetForm(),this.formTitle="添加消息模板",this.formVisible=!0,this.isAdd=!0},save(){this.$refs["form"].validate(e=>{if(!e)return!1;Object(i["save"])({code:this.form.code,title:this.form.title,content:this.form.content,type:this.form.type,remoteTplCode:this.form.remoteTplCode,idMessageSender:this.form.idMessageSender,id:this.form.id}).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},editItem(e){this.selRow=Object.assign({},e),this.edit()},edit(){this.checkSel()&&(this.isAdd=!1,this.form=this.selRow,this.formTitle="编辑消息模板",this.formVisible=!0)},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm(this.$t("common.deleteConfirm"),this.$t("common.tooltip"),{confirmButtonText:this.$t("button.submit"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then(()=>{Object(i["remove"])(e).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.fetchData()})}).catch(()=>{})}}}}},e9b3:function(e,t,s){"use strict";s("be00")},e9fe:function(e,t,s){},eaaa:function(e,t,s){"use strict";s("574f")},eb6d:function(e,t,s){"use strict";s.r(t);s("28a5");var i=s("3be1"),a=s("fa7d");t["default"]={name:"file",data(){return{listQuery:{page:1,limit:20,originalFileName:void 0},total:0,list:null,listLoading:!0,selRow:{},downloadUrl:"",imgHost:""}},created(){this.init()},methods:{init(){this.downloadUrl=Object(a["getApiUrl"])()+"/file/download?idFile=",this.imgHost=Object(a["getApiUrl"])()+"/file/getImgStream?idFile=",this.fetchData()},fetchData(){this.listLoading=!0,Object(i["getList"])(this.listQuery).then(e=>{this.list=e.data.records,this.listLoading=!1,this.total=e.data.total})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.originalFileName="",this.listQuery.page=1,this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},download(e,t){window.location.href=this.downloadUrl+e+"&fileName="+t},chkFileType(e,t){const s=t.split(",");for(const a in s){const t=s[a];var i=e.length-t.length;const r=i>=0&&e.lastIndexOf(t)==i;if(r)return r}}}}},ec09:function(e,t,s){"use strict";s.r(t);var i=s("5530"),a=(s("8b29"),s("2f62")),r=s("9ca8"),n=(s("94b1"),s("ef97"),s("c037"),s("675c"),s("8deb"),s("15af"),s("1111"),s("007d"),s("2f73"),s("d070"),s("d28f"),s("627c"),s("5450"),s("0352"),s("c54d"),s("8ee0"),s("eec4")),o=s.n(n);t["default"]={name:"dashboard",components:{chart:r["a"]},data(){const e=[];for(let t=0;t<=360;t++){const s=t/180*Math.PI,i=Math.sin(2*s)*Math.cos(2*s);e.push([i,t])}return{notice:[],lineData:{title:{text:""},tooltip:{trigger:"axis"},legend:{data:[this.$t("dashboard.email"),this.$t("dashboard.ad"),this.$t("dashboard.vedio"),this.$t("dashboard.direct"),this.$t("dashboard.searchEngine")]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:[this.$t("common.week.mon"),this.$t("common.week.tue"),this.$t("common.week.wed"),this.$t("common.week.thu"),this.$t("common.week.fri"),this.$t("common.week.sat"),this.$t("common.week.sun")]},yAxis:{type:"value"},series:[{name:this.$t("dashboard.email"),type:"line",stack:"总量",data:[120,132,101,134,90,230,210]},{name:this.$t("dashboard.ad"),type:"line",stack:"总量",data:[220,182,191,234,290,330,310]},{name:this.$t("dashboard.vedio"),type:"line",stack:"总量",data:[150,232,201,154,190,330,410]},{name:this.$t("dashboard.direct"),type:"line",stack:"总量",data:[320,332,301,334,390,330,320]},{name:this.$t("dashboard.searchEngine"),type:"line",stack:"总量",data:[820,932,901,934,1290,1330,1320]}]},barData:{xAxis:{type:"category",data:[this.$t("common.week.mon"),this.$t("common.week.tue"),this.$t("common.week.wed"),this.$t("common.week.thu"),this.$t("common.week.fri"),this.$t("common.week.sat"),this.$t("common.week.sun")]},yAxis:{type:"value"},series:[{data:[120,200,150,80,70,110,130],type:"bar"}]},pieData:{title:{text:this.$t("dashboard.userFrom"),subtext:"纯属虚构",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:[this.$t("dashboard.email"),this.$t("dashboard.ad"),this.$t("dashboard.vedio"),this.$t("dashboard.direct"),this.$t("dashboard.searchEngine")]},series:[{name:"from",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:335,name:this.$t("dashboard.direct")},{value:310,name:this.$t("dashboard.email")},{value:234,name:this.$t("dashboard.ad")},{value:135,name:this.$t("dashboard.vedio")},{value:1548,name:this.$t("dashboard.searchEngine")}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},tableData:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}]}},computed:Object(i["a"])({},Object(a["b"])(["name"])),created(){this.fetchData()},mounted(){let e=this,t=o()();t.listenTo(document.getElementById("dashboard"),t=>{e.$nextTick(()=>{e.$refs.lineChart.resize(),e.$refs.barChart.resize(),e.$refs.pieChart.resize()})})},methods:{fetchData(){}}}},ed08:function(e,t,s){"use strict";s.r(t),s.d(t,"parseTime",(function(){return i})),s.d(t,"formatTime",(function(){return a})),s.d(t,"param2Obj",(function(){return r}));s("28a5"),s("a481"),s("6b54");function i(e,t){if(0===arguments.length)return null;const s=t||"{y}-{m}-{d} {h}:{i}:{s}";let i;"object"===typeof e?i=e:("string"===typeof e&&/^[0-9]+$/.test(e)&&(e=parseInt(e)),"number"===typeof e&&10===e.toString().length&&(e*=1e3),i=new Date(e));const a={y:i.getFullYear(),m:i.getMonth()+1,d:i.getDate(),h:i.getHours(),i:i.getMinutes(),s:i.getSeconds(),a:i.getDay()},r=s.replace(/{(y|m|d|h|i|s|a)+}/g,(e,t)=>{let s=a[t];return"a"===t?["日","一","二","三","四","五","六"][s]:(e.length>0&&s<10&&(s="0"+s),s||0)});return r}function a(e,t){e=10===(""+e).length?1e3*parseInt(e):+e;const s=new Date(e),a=Date.now(),r=(a-s)/1e3;return r<30?"刚刚":r<3600?Math.ceil(r/60)+"分钟前":r<86400?Math.ceil(r/3600)+"小时前":r<172800?"1天前":t?i(e,t):s.getMonth()+1+"月"+s.getDate()+"日"+s.getHours()+"时"+s.getMinutes()+"分"}function r(e){const t=e.split("?")[1];return t?JSON.parse('{"'+decodeURIComponent(t).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"').replace(/\+/g," ")+'"}'):{}}},ef3c:function(e,t,s){"use strict";s.r(t);s("a481");var i,a,r={created(){const e=this.$route,t=e.params,s=e.query,i=t.path;this.$router.replace({path:"/"+i,query:s})},render:function(e){return e()}},n=r,o=s("2877"),l=Object(o["a"])(n,i,a,!1,null,null,null);t["default"]=l.exports},f09f:function(e,t,s){"use strict";s.r(t);const i=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"];t["default"]=i},f271:function(e,t,s){"use strict";s("aace")},f3cc:function(e,t,s){},f53a:function(e,t,s){},f6e0:function(e,t,s){"use strict";s("00f6")},f794:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/menu/add"],expression:"['/menu/add']"}],attrs:{type:"success",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return e.add(t)}}},[e._v(e._s(e.$t("button.add")))])],1),e._v(" "),s("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.data,"row-key":"id",border:"","default-expand-all":!1,"tree-props":{children:"children",hasChildren:"hasChildren"}}},[s("el-table-column",{attrs:{label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text"},on:{click:function(s){return e.edit(t.row)}}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.code))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"图标"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("svg-icon",{attrs:{"icon-class":e.row.icon}})]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"组件"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.component))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(1==t.row.ismenu?"菜单":"按钮"))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"URL"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.url))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"是否隐藏"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.hidden))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"顺序"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.num))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/menu/edit"],expression:"['/menu/edit']"}],attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(s){return e.edit(t.row)}}},[e._v(e._s(e.$t("button.edit")))]),e._v(" "),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/menu/remove"],expression:"['/menu/remove']"}],attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(s){return e.remove(t.row)}}},[e._v(e._s(e.$t("button.delete")))])]}}])})],1),e._v(" "),s("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,width:"70%"},on:{"update:visible":function(t){e.formVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"名称",prop:"name"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"资源地址",prop:"url"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"菜单类型"}},[s("el-radio-group",{model:{value:e.form.ismenu,callback:function(t){e.$set(e.form,"ismenu",t)},expression:"form.ismenu"}},[s("el-radio",{attrs:{label:1}},[e._v("菜单")]),e._v(" "),s("el-radio",{attrs:{label:0}},[e._v("按钮")])],1)],1)],1),e._v(" "),s("el-col",{directives:[{name:"show",rawName:"v-show",value:e.form.ismenu,expression:"form.ismenu"}],attrs:{span:12}},[s("el-form-item",{attrs:{label:"是否隐藏"}},[s("el-radio-group",{model:{value:e.form.hidden,callback:function(t){e.$set(e.form,"hidden",t)},expression:"form.hidden"}},[s("el-radio",{attrs:{label:!0}},[e._v("是")]),e._v(" "),s("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"菜单编号",prop:"code"}},[s("el-input",{model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"父菜单"}},[s("treeselect",{attrs:{options:e.treeData,placeholder:"请选择父菜单/顶级菜单目录无需选择"},model:{value:e.form.pcode,callback:function(t){e.$set(e.form,"pcode",t)},expression:"form.pcode"}})],1)],1),e._v(" "),s("el-col",{directives:[{name:"show",rawName:"v-show",value:1===e.form.ismenu,expression:"form.ismenu===1"}],attrs:{span:12}},[s("el-form-item",{attrs:{label:"组件"}},[s("el-input",{on:{focus:e.componentTips},model:{value:e.form.component,callback:function(t){e.$set(e.form,"component",t)},expression:"form.component"}})],1)],1),e._v(" "),s("el-col",{directives:[{name:"show",rawName:"v-show",value:1===e.form.ismenu,expression:"form.ismenu===1"}],attrs:{span:12}},[s("el-form-item",{attrs:{label:"图标"}},[s("el-popover",{attrs:{placement:"bottom-start",width:"460",trigger:"click"},on:{show:function(t){return e.$refs["iconSelect"].reset()}}},[s("IconSelect",{ref:"iconSelect",on:{selected:e.selected}}),e._v(" "),s("el-input",{attrs:{slot:"reference",placeholder:"点击选择图标",readonly:""},slot:"reference",model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}},[e.form.icon?s("svg-icon",{staticClass:"el-input__icon",staticStyle:{height:"32px",width:"16px"},attrs:{slot:"prefix","icon-class":e.form.icon},slot:"prefix"}):s("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"prefix"},slot:"prefix"})],1)],1)],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"排序",prop:"num"}},[s("el-input",{attrs:{type:"number"},model:{value:e.form.num,callback:function(t){e.$set(e.form,"num",t)},expression:"form.num"}})],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("button.submit")))]),e._v(" "),s("el-button",{nativeOn:{click:function(t){e.formVisible=!1}}},[e._v(e._s(e.$t("button.cancel")))])],1)],1)],1)],1)},a=[],r=s("8ad4"),n=s("a6dc"),o=s("4381"),l=s("5aee"),c={directives:{permission:o["default"]},name:"menu",components:{treeTable:r["default"],IconSelect:l["default"]},data(){return{showTree:!1,defaultProps:{id:"code",label:"name",children:"children"},listLoading:!0,expandAll:!1,formTitle:"",formVisible:!1,isAdd:!1,form:{id:"",name:"",code:"",url:"",pcode:"",ismenu:1,hidden:!1,num:1},rules:{name:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],code:[{required:!0,message:"请输入编码",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],url:[{required:!0,message:"请输入资源地址",trigger:"blur"}],num:[{required:!0,message:"请输入排序",trigger:"blur"}]},data:[],treeData:[],selRow:{}}},created(){this.init()},methods:{selected(e){this.form.icon=e,this.$forceUpdate()},init(){this.fetchData(),Object(n["getMenuTree"])().then(e=>{this.treeData=e.data})},fetchData(){this.listLoading=!0,Object(n["getList"])().then(e=>{this.data=e.data,this.listLoading=!1})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},add(){this.form={ismenu:1,hidden:!1},this.formTitle="添加菜单",this.formVisible=!0,this.isAdd=!0,void 0!==this.$refs["form"]&&this.$refs["form"].resetFields()},save(){var e=this;this.$refs["form"].validate(t=>{if(!t)return!1;{const t=e.form;delete t.parent,delete t.children,Object(n["save"])(t).then(t=>{this.$message({message:"提交成功",type:"success"}),e.fetchData(),e.formVisible=!1})}})},edit(e){this.form=Object.assign({},e),"是"===e.isMenuName?this.form.ismenu=1:this.form.ismenu=0,"0"==this.form.pcode&&(this.form.pcode=void 0),this.formTitle="编辑菜单",this.formVisible=!0,this.isAdd=!1},remove(e){this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(n["delMenu"])(e.id).then(e=>{this.$message({message:"删除成功",type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})})},componentTips(){this.$notify({title:"提示",dangerouslyUseHTMLString:!0,message:"顶级目录请输入layout,<br/>左侧菜单请根据实际组件路径输入:views/...<br/>功能按钮无需输入该值"})}}},u=c,d=(s("5737"),s("2877")),m=Object(d["a"])(u,i,a,!1,null,"0cf19986",null);t["default"]=m.exports},f7fe:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.userName,callback:function(t){e.$set(e.listQuery,"userName",t)},expression:"listQuery.userName"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入昵称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.nickName,callback:function(t){e.$set(e.listQuery,"nickName",t)},expression:"listQuery.nickName"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入手机号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.phone,callback:function(t){e.$set(e.listQuery,"phone",t)},expression:"listQuery.phone"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入邮箱"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.listQuery.email,callback:function(t){e.$set(e.listQuery,"email",t)},expression:"listQuery.email"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-search"},nativeOn:{click:function(t){return e.search(t)}}},[e._v(e._s(e.$t("button.search")))]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(e._s(e.$t("button.reset")))])],1)],1),e._v(" "),s("br"),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return e.add(t)}}},[e._v("\r\n        "+e._s(e.$t("button.add"))+"\r\n        ")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(t){return e.edit(t)}}},[e._v("\r\n        "+e._s(e.$t("button.edit"))+"\r\n        ")]),e._v(" "),s("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(t){return e.remove(t)}}},[e._v("\r\n        "+e._s(e.$t("button.delete"))+"\r\n        ")]),e._v(" "),s("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-refresh-right"},nativeOn:{click:function(t){return e.resetPwd(t)}}},[e._v("\r\n        "+e._s(e.$t("button.resetPwd"))+"\r\n        ")]),e._v(" "),s("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-s-operation"},nativeOn:{click:function(t){return e.openRole(t)}}},[e._v("\r\n        "+e._s(e.$t("button.roleAllocate")))])],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,size:"mini","element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[s("el-table-column",{attrs:{label:"编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("\r\n            "+e._s(t.row.code)+"\r\n            ")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"供应商名",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v("\r\n                "+e._s(t.row.name)+"\r\n            ")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("el-tag",{attrs:{size:"mini"}},[e._v(" "+e._s(t.row.desc)+" ")])],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"手机"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n            "+e._s(t.row.phone||"未绑定手机")+"\r\n        ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n            "+e._s(t.row.address)+"\r\n        ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(s){return e.editItem(t.row)}}},[e._v("\r\n            "+e._s(e.$t("button.edit"))+"\r\n            ")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(s){return e.removeItem(t.row)}}},[e._v("\r\n            "+e._s(e.$t("button.delete"))+"\r\n            ")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-s-operation"},nativeOn:{click:function(s){return e.openRoleItem(t.row)}}},[e._v("角色分配")])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[5,10,20,50,100,500],"page-size":e.listQuery.limit,total:e.total,"current-page":e.listQuery.page},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"page",t)},"update:current-page":function(t){return e.$set(e.listQuery,"page",t)},"size-change":e.changeSize,"current-change":e.fetchPage,"prev-click":e.fetchPrev,"next-click":e.fetchNext}})],1)],1),e._v(" "),s("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible,width:"70%"},on:{"update:visible":function(t){e.formVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px","label-position":"right"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[s("el-input",{attrs:{minlength:"1"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"手机",prop:"phone"}},[s("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"签名",prop:"signature"}},[s("el-input",{model:{value:e.form.signature,callback:function(t){e.$set(e.form,"signature",t)},expression:"form.signature"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[s("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.avatarloading,expression:"avatarloading"}],staticClass:"avatar-uploader",attrs:{action:"https://api.maiquer.tech/api/upload/image",name:"imgFile",headers:e.token,"on-success":e.handleAvatarSuccess,"show-file-list":!1,"before-upload":function(t){return e.beforeImgUpload(t,"avatar")}}},[e.form.avatar?s("img",{staticClass:"avatar",attrs:{src:e.form.avatar}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"背景图",prop:"backImg"}},[s("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.backImgloading,expression:"backImgloading"}],staticClass:"avatar-uploader",attrs:{action:"https://api.maiquer.tech/api/upload/image",name:"imgFile",headers:e.token,"on-success":e.handleBackImgSuccess,"show-file-list":!1,"before-upload":function(t){return e.beforeImgUpload(t,"backImg")}}},[e.form.backImg?s("img",{staticClass:"avatar",attrs:{src:e.form.backImg}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"角色分配"}},[s("el-checkbox-group",{model:{value:e.roleSet,callback:function(t){e.roleSet=t},expression:"roleSet"}},e._l(e.roleArray,(function(e){return s("el-checkbox",{key:e,attrs:{label:e}})})),1)],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"是否启用"}},[s("el-switch",{model:{value:e.form.enable,callback:function(t){e.$set(e.form,"enable",t)},expression:"form.enable"}})],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.saveUser}},[e._v(e._s(e.$t("button.submit")))]),e._v(" "),s("el-button",{nativeOn:{click:function(t){e.formVisible=!1}}},[e._v(e._s(e.$t("button.cancel")))])],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"角色分配",visible:e.roleDialog.visible,width:"25%"},on:{"update:visible":function(t){return e.$set(e.roleDialog,"visible",t)}}},[s("el-form",[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-tree",{ref:"roleTree",attrs:{data:e.roleDialog.roles,"show-checkbox":"","node-key":"roleId","default-checked-keys":e.roleDialog.checkedRoleKeys,props:e.roleDialog.defaultProps}})],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.setRole}},[e._v(e._s(e.$t("button.submit")))])],1)],1)],1)],1)},a=[],r=s("0aac"),n=s("5f87");const o=["SUPER_ADMIN","SYSTEM_ADMIN","VIP","USER"];var l={name:"mgr",data(){return{roleArray:o,roleDialog:{visible:!1,roles:[{roleId:1,roleName:"SUPER_ADMIN"},{roleId:2,roleName:"SYSTEM_ADMIN"},{roleId:3,roleName:"VIP"},{roleId:4,roleName:"USER"}],checkedRoleKeys:[],defaultProps:{id:"roleId",label:"roleName"}},statusList:[{label:"启用",value:"1"},{label:"冻结",value:"2"}],formVisible:!1,formTitle:"添加用户",roleSet:[],form:{username:"",password:"",nickname:"",phone:"",email:"",avatar:"",backImg:"",signature:"从前从前,有个人爱你很久...",enable:!0},rules:{username:[{required:!0,message:"请输入登录账号",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],password:[{required:!1,message:"请输入登录密码",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],nickname:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],phone:[{required:!1,message:"请输入email",trigger:"blur"}],email:[{required:!1,message:"请输入email",trigger:"blur"}]},listQuery:{page:1,limit:5,userNmae:void 0,nickName:void 0,phone:void 0,email:void 0},avatarloading:!1,backImgloading:!1,total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter(e){const t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created(){this.init()},methods:{init(){this.fetchData()},fetchData(){this.listLoading=!0,Object(r["getList"])(this.listQuery).then(e=>{this.list=e.data.dataCurrentPage,this.listLoading=!1,this.total=e.data.totalCount})},search(){this.listQuery.page=1,this.fetchData()},reset(){this.listQuery.userNmae="",this.listQuery.nickName="",this.listQuery.page=1,this.listQuery.phone="",this.listQuery.email="",this.fetchData()},handleFilter(){this.listQuery.page=1,this.getList()},handleClose(){},fetchNext(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage(e){this.listQuery.page=e,this.fetchData()},changeSize(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange(e,t){this.selRow=e},resetForm(){this.form={username:"",password:"",nickname:"",phone:"",email:"",avatar:"",backImg:"",signature:"",enable:!0}},add(){this.resetForm(),this.formTitle="添加用户",this.formVisible=!0},changeUserStatus(e,t){var s={userId:e,enable:t};Object(r["changeStatus"])(s).then(()=>{this.$notify({title:"成功",message:"修改成功",type:"success"}),this.fetchData()}).catch(()=>{this.fetchData()})},saveUser(){var e=this;this.$refs["form"].validate(t=>{if(!t)return!1;var s=e.form,i=[];for(const e of this.roleSet)"SUPER_ADMIN"==e?i.push({roleId:1}):"SYSTEM_ADMIN"==e?i.push({roleId:2}):"VIP"==e?i.push({roleId:3}):i.push({roleId:4});s.roleSet=i,console.log(s),Object(r["saveUser"])(s).then(e=>{this.$message({message:"提交成功",type:"success"}),this.fetchData(),this.formVisible=!1})})},checkSel(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},editItem(e){this.selRow=Object.assign({},e),this.edit()},edit(){if(this.checkSel()){let e=Object.assign({},this.selRow);e.password="";let t={id:e.id,username:e.username,password:"",nickname:e.nickname,phone:e.phone,email:e.email,signature:e.signature,avatar:e.avatar,backImg:e.backImg,roleSet:e.roleSet,enable:e.enable};this.form=t,this.formTitle="修改用户",this.formVisible=!0}},removeItem(e){this.selRow=e,this.remove()},remove(){if(this.checkSel()){var e=this.selRow.id;this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(r["remove"])(e).then(e=>{this.$message({message:"删除成功",type:"success"}),this.fetchData()}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}},beforeImgUpload(e,t){"avatar"==t?this.avatarloading=!0:this.backImgloading=!0;const s="image/jpeg"===e.type||"image/gif"===e.type||"image/png"===e.type,i=e.size/1024/1024/1024/1024<4;return s||this.$message.error("上传头像图片只能是 JPG 格式!"),i||this.$message.error("上传头像图片大小不能超过 4MB!"),s&&i},handleAvatarSuccess(e){0==e.code?(this.form.avatar=e.data,this.$notify({title:"成功",message:"头像上传成功",type:"success"}),this.avatarloading=!1):(this.$message({message:e.message,type:"error"}),this.avatarloading=!1)},handleBackImgSuccess(e){0==e.code?(this.form.backImg=e.data,this.$notify({title:"成功",message:"头像上传成功",type:"success"}),this.backImgloading=!1):(this.$message({message:e.message,type:"error"}),this.backImgloading=!1)},resetPwd(){if(this.checkSel()){var e=this.selRow.id;this.$confirm("将密码重置为maiqu?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(r["resetPassword"])(e).then(e=>{this.$message({message:"重置密码成功",type:"success"})}).catch(e=>{this.$notify.error({title:"错误",message:e})})}).catch(()=>{})}},openRoleItem(e){this.selRow=e,this.openRole()},openRole(){this.checkSel()&&(this.roleDialog.visible=!0)},setRole(){var e=this.$refs.roleTree.getCheckedKeys(),t="";for(var s in e)t+=e[s]+",";var i={userId:this.selRow.id,roleIds:t.slice(0,-1)};Object(r["setRole"])(i).then(e=>{this.roleDialog.visible=!1,this.fetchData(),this.$message({message:"提交成功",type:"success"})})}},computed:{token(){return{Authorization:Object(n["getToken"])()}}}},c=l,u=(s("463c"),s("2877")),d=Object(u["a"])(c,i,a,!1,null,null,null);t["default"]=d.exports},f9da:function(e,t,s){e.exports=s.p+"static/fonts/element-icons.9b70ee41.woff"},fa7d:function(e,t,s){"use strict";s.r(t),s.d(t,"getApiUrl",(function(){return a}));const i="http://10.15.120.205:8080";function a(){return i}},fab5:function(e,t,s){"use strict";s("b3b6")},fb69:function(e,t,s){},fbd4:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"block"},[s("el-form",{ref:"form",attrs:{model:e.form}},[s("el-input",{ref:"content",attrs:{type:"hidden"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}}),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-button",{attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("button.submit")))]),e._v(" "),s("el-button",{attrs:{icon:"el-icon-back",size:"mini"},nativeOn:{click:function(t){return e.back(t)}}},[e._v(e._s(e.$t("button.back")))])],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-input",{staticStyle:{"font-size":"1.2rem",margin:".2rem 0rem"},attrs:{minlength:"1",placeholder:"文章标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("el-select",{attrs:{placeholder:"选择栏目"},model:{value:e.form.idChannel,callback:function(t){e.$set(e.form,"idChannel",t)},expression:"form.idChannel"}},e._l(e.options,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),s("el-col",{attrs:{span:16}},[s("el-input",{staticStyle:{"margin-bottom":".2rem"},attrs:{minlength:"1",placeholder:"作者"},model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1)],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[e.ifUpload?s("el-form-item",{attrs:{label:"题图"}},[s("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:e.uploadUrl,headers:e.uploadHeaders,"before-upload":e.handleBeforeUpload,"on-success":e.handleUploadSuccess}},[s("i",{staticClass:"el-icon-upload"}),e._v(" "),s("div",{staticClass:"el-upload__text"},[e._v("上传图片")])])],1):e._e(),e._v(" "),!0!==e.ifUpload?s("img",{staticStyle:{height:"8rem"},attrs:{src:e.articleImg}}):e._e(),e._v(" "),!0!==e.ifUpload?s("el-button",{attrs:{icon:"el-icon-edit"},nativeOn:{click:function(t){return e.uploadImg(t)}}},[e._v("修改题图")]):e._e()],1)],1),e._v(" "),s("br")],1),e._v(" "),s("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:e.fullscreen}},[s("textarea",{staticClass:"tinymce-textarea",attrs:{id:e.tinymceId}}),e._v(" "),s("div",{staticClass:"editor-custom-btn-container"},[s("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:e.imageSuccessCBK}})],1)])],1)])},a=[],r=(s("28a5"),s("ac6a"),s("8256")),n=s("5c96"),o=s("f09f"),l=s("3ca5"),c=s("5248"),u=s("4761"),d=s("fa7d"),m=s("5f87"),h={name:"editArticle",components:{editorImage:r["default"]},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:Number,required:!1,default:360}},data(){return{uploadUrl:"",uploadFileId:"",uploadHeaders:{Authorization:""},loadingInstance:{},form:{title:"",author:"",idChannel:"1",content:"",img:""},articleImg:"",ifUpload:!0,options:[],hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"}}},computed:{language(){return this.languageTypeList[this.$store.getters.language]}},watch:{value(e){!this.hasChange&&this.hasInit&&this.$nextTick(()=>window.tinymce.get(this.tinymceId).setContent(e||""))},language(){this.destroyTinymce(),this.$nextTick(()=>this.initTinymce())}},mounted(){this.init(),this.initTinymce()},activated(){this.initTinymce()},deactivated(){this.destroyTinymce()},destroyed(){this.destroyTinymce()},methods:{init(){this.uploadUrl=Object(d["getApiUrl"])()+"/file",this.uploadHeaders["Authorization"]=Object(m["getToken"])();const e=this.$route.query.id;e&&Object(c["get"])(e).then(e=>{this.form=e.data,this.setContent(e.data.content),this.articleImg=this.uploadUrl+"/getImgStream?idFile="+e.data.img,this.ifUpload=!1}),Object(u["getList"])().then(e=>{this.options=e.data})},initTinymce(){const e=this;window.tinymce.init({value:"aaaaaa",language:this.language,selector:"#"+this.tinymceId,height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:l["default"],menubar:this.menubar,plugins:o["default"],end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:t=>{e.value&&t.setContent(e.value),e.hasInit=!0,t.on("NodeChange Change KeyUp SetContent",()=>{this.hasChange=!0;const e=t.getContent();this.form.content=e})},setup(t){t.on("FullscreenStateChanged",t=>{e.fullscreen=t.state})}})},destroyTinymce(){const e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand("mceFullScreen"),e&&e.destroy()},setContent(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK(e){const t=this;e.forEach(e=>{window.tinymce.get(t.tinymceId).insertContent(`<img class="wscnph" src="${e.url}" >`)})},save(){this.$refs["form"].validate(e=>{if(!e)return!1;{const e=this.form.content.split("%").join("%25");Object(c["save"])({id:this.form.id,title:this.form.title,author:this.form.author,idChannel:this.form.idChannel,content:e,img:this.form.img}).then(e=>{this.$message({message:this.$t("common.optionSuccess"),type:"success"}),this.back()})}})},back(){this.$router.go(-1)},handleBeforeUpload(){if(""!==this.uploadFileId)return this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1;this.loadingInstance=n["Loading"].service({lock:!0,text:this.$t("common.uploading"),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})},handleUploadSuccess(e,t){this.loadingInstance.close(),2e4===e.code?this.form.img=e.data.id:this.$message({message:this.$t("common.uploadError"),type:"error"})},uploadImg(){this.ifUpload=!this.ifUpload}}},f=h,p=(s("41c4"),s("2877")),g=Object(p["a"])(f,i,a,!1,null,"2ff21208",null);t["default"]=g.exports},fc32:function(e,t,s){},fcb7:function(e,t,s){"use strict";s.r(t),s.d(t,"tree",(function(){return a})),s.d(t,"list",(function(){return r})),s.d(t,"save",(function(){return n})),s.d(t,"del",(function(){return o}));var i=s("b775");function a(){return Object(i["default"])({url:"/dept/tree",method:"get"})}function r(){return Object(i["default"])({url:"/dept/list",method:"get"})}function n(e){return Object(i["default"])({url:"/dept",method:"post",params:e})}function o(e){return Object(i["default"])({url:"/dept",method:"delete",params:{id:e}})}},fd5f:function(e,t,s){"use strict";s.r(t);s("4917"),s("ac6a");const i=s("51ff"),a=e=>e.keys(),r=/\.\/(.*)\.svg/,n=a(i).map(e=>e.match(r)[1]);t["default"]=n},fe77:function(e,t,s){"use strict";s.r(t),function(e){s("6b54");var t=s("1da1"),i=s("bdb9"),a=s("7f5b"),r=s("b206"),n=s.n(r);const o=!1;function l(){return c.apply(this,arguments)}function c(){return c=Object(t["a"])((function*(){const e=new i["BrowserWindow"]({width:800,height:600,webPreferences:{nodeIntegration:Object({NODE_ENV:"production",VUE_APP_BASE_API:"http://10.15.120.205:8080",BASE_URL:"app://./",IS_ELECTRON:!0}).ELECTRON_NODE_INTEGRATION,contextIsolation:!Object({NODE_ENV:"production",VUE_APP_BASE_API:"http://10.15.120.205:8080",BASE_URL:"app://./",IS_ELECTRON:!0}).ELECTRON_NODE_INTEGRATION}});Object({NODE_ENV:"production",VUE_APP_BASE_API:"http://10.15.120.205:8080",BASE_URL:"app://./",IS_ELECTRON:!0}).WEBPACK_DEV_SERVER_URL?(yield e.loadURL(Object({NODE_ENV:"production",VUE_APP_BASE_API:"http://10.15.120.205:8080",BASE_URL:"app://./",IS_ELECTRON:!0}).WEBPACK_DEV_SERVER_URL),Object({NODE_ENV:"production",VUE_APP_BASE_API:"http://10.15.120.205:8080",BASE_URL:"app://./",IS_ELECTRON:!0}).IS_TEST||e.webContents.openDevTools()):(Object(a["a"])("app"),e.loadURL("app://./index.html"))})),c.apply(this,arguments)}i["protocol"].registerSchemesAsPrivileged([{scheme:"app",privileges:{secure:!0,standard:!0}}]),i["app"].on("window-all-closed",()=>{"darwin"!==e.platform&&i["app"].quit()}),i["app"].on("activate",()=>{0===i["BrowserWindow"].getAllWindows().length&&l()}),i["app"].on("ready",Object(t["a"])((function*(){if(o&&!Object({NODE_ENV:"production",VUE_APP_BASE_API:"http://10.15.120.205:8080",BASE_URL:"app://./",IS_ELECTRON:!0}).IS_TEST)try{yield n()(r["VUEJS_DEVTOOLS"])}catch(e){console.error("Vue Devtools failed to install:",e.toString())}l()}))),o&&("win32"===e.platform?e.on("message",e=>{"graceful-exit"===e&&i["app"].quit()}):e.on("SIGTERM",()=>{i["app"].quit()}))}.call(this,s("4362"))}}]);